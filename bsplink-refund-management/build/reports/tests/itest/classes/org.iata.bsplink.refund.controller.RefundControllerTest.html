<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta http-equiv="x-ua-compatible" content="IE=edge"/>
<title>Test results - Class org.iata.bsplink.refund.controller.RefundControllerTest</title>
<link href="../css/base-style.css" rel="stylesheet" type="text/css"/>
<link href="../css/style.css" rel="stylesheet" type="text/css"/>
<script src="../js/report.js" type="text/javascript"></script>
</head>
<body>
<div id="content">
<h1>Class org.iata.bsplink.refund.controller.RefundControllerTest</h1>
<div class="breadcrumbs">
<a href="../index.html">all</a> &gt; 
<a href="../packages/org.iata.bsplink.refund.controller.html">org.iata.bsplink.refund.controller</a> &gt; RefundControllerTest</div>
<div id="summary">
<table>
<tr>
<td>
<div class="summaryGroup">
<table>
<tr>
<td>
<div class="infoBox" id="tests">
<div class="counter">66</div>
<p>tests</p>
</div>
</td>
<td>
<div class="infoBox" id="failures">
<div class="counter">0</div>
<p>failures</p>
</div>
</td>
<td>
<div class="infoBox" id="ignored">
<div class="counter">0</div>
<p>ignored</p>
</div>
</td>
<td>
<div class="infoBox" id="duration">
<div class="counter">1.831s</div>
<p>duration</p>
</div>
</td>
</tr>
</table>
</div>
</td>
<td>
<div class="infoBox success" id="successRate">
<div class="percent">100%</div>
<p>successful</p>
</div>
</td>
</tr>
</table>
</div>
<div id="tabs">
<ul class="tabLinks">
<li>
<a href="#tab0">Tests</a>
</li>
<li>
<a href="#tab1">Standard output</a>
</li>
</ul>
<div id="tab0" class="tab">
<h2>Tests</h2>
<table>
<thead>
<tr>
<th>Test</th>
<th>Duration</th>
<th>Result</th>
</tr>
</thead>
<tr>
<td class="success">getAllFilesForRefundBadRequest</td>
<td>0.007s</td>
<td class="success">passed</td>
</tr>
<tr>
<td class="success">getAllFilesForRefundOk</td>
<td>0.018s</td>
<td class="success">passed</td>
</tr>
<tr>
<td class="success">testAgentValidatorIsInvokedOnRefundCreation</td>
<td>0.020s</td>
<td class="success">passed</td>
</tr>
<tr>
<td class="success">testAirlineValidatorIsInvokedOnRefundCreation</td>
<td>0.023s</td>
<td class="success">passed</td>
</tr>
<tr>
<td class="success">testChangeRefundStatusViaMassloadFileName</td>
<td>0.022s</td>
<td class="success">passed</td>
</tr>
<tr>
<td class="success">testChangeRefundStatusViaMassloadFileNameIncorrectAirline</td>
<td>0.021s</td>
<td class="success">passed</td>
</tr>
<tr>
<td class="success">testChangeRefundStatusViaMassloadFileNameNotFound</td>
<td>0.014s</td>
<td class="success">passed</td>
</tr>
<tr>
<td class="success">testChangeRefundStatusViaMassloadFileNameNotFoundBecauseOfStatus</td>
<td>0.013s</td>
<td class="success">passed</td>
</tr>
<tr>
<td class="success">testCountryValidatorIsInvokedOnRefundCreation</td>
<td>0.040s</td>
<td class="success">passed</td>
</tr>
<tr>
<td class="success">testCurrencyValidatorIsInvokedOnRefundCreation</td>
<td>0.022s</td>
<td class="success">passed</td>
</tr>
<tr>
<td class="success">testDeleteIndirectRefund</td>
<td>0.009s</td>
<td class="success">passed</td>
</tr>
<tr>
<td class="success">testDeleteIndirectRefundNotFound</td>
<td>0.013s</td>
<td class="success">passed</td>
</tr>
<tr>
<td class="success">testGetAllCommentsForRefund</td>
<td>0.030s</td>
<td class="success">passed</td>
</tr>
<tr>
<td class="success">testGetAllCommentsForRefundNotFound</td>
<td>0.007s</td>
<td class="success">passed</td>
</tr>
<tr>
<td class="success">testGetRefund</td>
<td>0.009s</td>
<td class="success">passed</td>
</tr>
<tr>
<td class="success">testGetRefundByIsoCountryCodeAirlineCodeTicketDocumentNumber</td>
<td>0.011s</td>
<td class="success">passed</td>
</tr>
<tr>
<td class="success">testGetRefundByIsoCountryCodeAirlineCodeTicketDocumentNumberNotFound</td>
<td>0.010s</td>
<td class="success">passed</td>
</tr>
<tr>
<td class="success">testGetRefundHistory</td>
<td>0.023s</td>
<td class="success">passed</td>
</tr>
<tr>
<td class="success">testGetRefundHistoryBadRequest</td>
<td>0.009s</td>
<td class="success">passed</td>
</tr>
<tr>
<td class="success">testGetRefundNotFound</td>
<td>0.008s</td>
<td class="success">passed</td>
</tr>
<tr>
<td class="success">testGetRefunds</td>
<td>0.030s</td>
<td class="success">passed</td>
</tr>
<tr>
<td class="success">testOnUpdateRefundUpdateValidatorIsNotCalledIfThereArePreviousErrors</td>
<td>0.021s</td>
<td class="success">passed</td>
</tr>
<tr>
<td class="success">testOnUpdateRefundViaMassloadValidatorIsNotCalledIfThereArePreviousErrors</td>
<td>0.017s</td>
<td class="success">passed</td>
</tr>
<tr>
<td class="success">testPartialRefundValidatorIsInvokedOnRefundCreation</td>
<td>0.311s</td>
<td class="success">passed</td>
</tr>
<tr>
<td class="success">testRefundValidatorIsInvokedOnRefundCreation</td>
<td>0.031s</td>
<td class="success">passed</td>
</tr>
<tr>
<td class="success">testRespondsWithBadRequestIfStatusIsNotAllowedForDeletion</td>
<td>0.009s</td>
<td class="success">passed</td>
</tr>
<tr>
<td class="success">testSaveComment</td>
<td>0.016s</td>
<td class="success">passed</td>
</tr>
<tr>
<td class="success">testSaveCommentsNoRefundFound</td>
<td>0.015s</td>
<td class="success">passed</td>
</tr>
<tr>
<td class="success">testSaveCommentsNoRefundId</td>
<td>0.009s</td>
<td class="success">passed</td>
</tr>
<tr>
<td class="success">testSaveCommentsNoText</td>
<td>0.021s</td>
<td class="success">passed</td>
</tr>
<tr>
<td class="success">testSaveFiles</td>
<td>0.019s</td>
<td class="success">passed</td>
</tr>
<tr>
<td class="success">testSaveFilesRefundNotFound</td>
<td>0.018s</td>
<td class="success">passed</td>
</tr>
<tr>
<td class="success">testSaveFilesThrowsException</td>
<td>0.015s</td>
<td class="success">passed</td>
</tr>
<tr>
<td class="success">testSaveIndirectRefund</td>
<td>0.025s</td>
<td class="success">passed</td>
</tr>
<tr>
<td class="success">testSaveIndirectRefundHasErrors</td>
<td>0.017s</td>
<td class="success">passed</td>
</tr>
<tr>
<td class="success">testSaveIndirectRefundWithAuthorizedStatus</td>
<td>0.033s</td>
<td class="success">passed</td>
</tr>
<tr>
<td class="success">testSaveIndirectRefundWithoutPermission</td>
<td>0.017s</td>
<td class="success">passed</td>
</tr>
<tr>
<td class="success">testSaveIndirectReturnsEntity</td>
<td>0.027s</td>
<td class="success">passed</td>
</tr>
<tr>
<td class="success">testUpdateRefund</td>
<td>0.033s</td>
<td class="success">passed</td>
</tr>
<tr>
<td class="success">testUpdateRefundAmountToPassengerLessThanOne</td>
<td>0.025s</td>
<td class="success">passed</td>
</tr>
<tr>
<td class="success">testUpdateRefundChangeAgentCode</td>
<td>0.017s</td>
<td class="success">passed</td>
</tr>
<tr>
<td class="success">testUpdateRefundChangeAirlineCode</td>
<td>0.027s</td>
<td class="success">passed</td>
</tr>
<tr>
<td class="success">testUpdateRefundErrors</td>
<td>0.014s</td>
<td class="success">passed</td>
</tr>
<tr>
<td class="success">testUpdateRefundModifyComments</td>
<td>0.032s</td>
<td class="success">passed</td>
</tr>
<tr>
<td class="success">testUpdateRefundModifyFiles</td>
<td>0.109s</td>
<td class="success">passed</td>
</tr>
<tr>
<td class="success">testUpdateRefundModifyHistory</td>
<td>0.037s</td>
<td class="success">passed</td>
</tr>
<tr>
<td class="success">testUpdateRefundNotFound</td>
<td>0.026s</td>
<td class="success">passed</td>
</tr>
<tr>
<td class="success">testUpdateRefundRejectedStatus</td>
<td>0.031s</td>
<td class="success">passed</td>
</tr>
<tr>
<td class="success">testUpdateRefundRejectionReasonFilled</td>
<td>0.050s</td>
<td class="success">passed</td>
</tr>
<tr>
<td class="success">testUpdateRefundRejectionReasonNotFilled</td>
<td>0.022s</td>
<td class="success">passed</td>
</tr>
<tr>
<td class="success">testUpdateRefundStatusErrors</td>
<td>0.011s</td>
<td class="success">passed</td>
</tr>
<tr>
<td class="success">testUpdateRefundStatusNotAllowed</td>
<td>0.014s</td>
<td class="success">passed</td>
</tr>
<tr>
<td class="success">testUpdateRefundStatusNotFound</td>
<td>0.022s</td>
<td class="success">passed</td>
</tr>
<tr>
<td class="success">testUpdateRefundStatusNull</td>
<td>0.031s</td>
<td class="success">passed</td>
</tr>
<tr>
<td class="success">testUpdateRefundStatusOk</td>
<td>0.032s</td>
<td class="success">passed</td>
</tr>
<tr>
<td class="success">testUpdateRefundStatusToPending</td>
<td>0.024s</td>
<td class="success">passed</td>
</tr>
<tr>
<td class="success">testUpdateRefundStatusToPendingFieldsNotFilled</td>
<td>0.033s</td>
<td class="success">passed</td>
</tr>
<tr>
<td class="success">testUpdateRefundUnderInvestigationStatus</td>
<td>0.045s</td>
<td class="success">passed</td>
</tr>
<tr>
<td class="success">testUpdateRefundWithFileName</td>
<td>0.039s</td>
<td class="success">passed</td>
</tr>
<tr>
<td class="success">testUpdateRefundWithFileNameBadRequestIncorrectAirline</td>
<td>0.030s</td>
<td class="success">passed</td>
</tr>
<tr>
<td class="success">testUpdateRefundWithFileNameCorrectHistoryEntry</td>
<td>0.040s</td>
<td class="success">passed</td>
</tr>
<tr>
<td class="success">testUpdateRefundWithFileNameNotFound</td>
<td>0.022s</td>
<td class="success">passed</td>
</tr>
<tr>
<td class="success">testUpdateRefundWithIncorrectAirlineInFileName</td>
<td>0.027s</td>
<td class="success">passed</td>
</tr>
<tr>
<td class="success">testUpdateRefundWithIncorrectCountryInFileName</td>
<td>0.020s</td>
<td class="success">passed</td>
</tr>
<tr>
<td class="success">testUpdateRefundWithIncorrectFileName</td>
<td>0.018s</td>
<td class="success">passed</td>
</tr>
<tr>
<td class="success">testValidatesConjunctionsOnRefundCreation</td>
<td>0.020s</td>
<td class="success">passed</td>
</tr>
</table>
</div>
<div id="tab1" class="tab">
<h2>Standard output</h2>
<span class="code">
<pre>22246 [Test worker] INFO  org.springframework.boot.test.context.SpringBootTestContextBootstrapper  – Neither @ContextConfiguration nor @ContextHierarchy found for test class [org.iata.bsplink.refund.controller.RefundControllerTest], using SpringBootContextLoader
22247 [Test worker] INFO  org.springframework.test.context.support.AbstractContextLoader  – Could not detect default resource locations for test class [org.iata.bsplink.refund.controller.RefundControllerTest]: no resource found for suffixes {-context.xml, Context.groovy}.
22247 [Test worker] INFO  org.springframework.test.context.support.AnnotationConfigContextLoaderUtils  – Could not detect default configuration classes for test class [org.iata.bsplink.refund.controller.RefundControllerTest]: RefundControllerTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
22251 [Test worker] INFO  org.springframework.boot.test.context.SpringBootTestContextBootstrapper  – Found @SpringBootConfiguration org.iata.bsplink.refund.Application for test class org.iata.bsplink.refund.controller.RefundControllerTest
22252 [Test worker] INFO  org.springframework.boot.test.context.SpringBootTestContextBootstrapper  – Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener, org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener]
22253 [Test worker] INFO  org.springframework.boot.test.context.SpringBootTestContextBootstrapper  – Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@39e601c9, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@12994f87, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@3361608b, org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener@5ec28fed, org.springframework.test.context.support.DirtiesContextTestExecutionListener@57a325b5, org.springframework.test.context.transaction.TransactionalTestExecutionListener@f9eadb1, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@37c3f1f1, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener@7d34ad03, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener@3374a19d, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener@497d6167, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener@61195dc0, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener@399db855]
22349 [Test worker] INFO  org.springframework.context.annotation.AnnotationConfigApplicationContext  – Refreshing org.springframework.context.annotation.AnnotationConfigApplicationContext@66828f45: startup date [Thu Aug 09 13:37:06 CEST 2018]; root of context hierarchy
22393 [Test worker] INFO  org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker  – Bean 'configurationPropertiesRebinderAutoConfiguration' of type [org.springframework.cloud.autoconfigure.ConfigurationPropertiesRebinderAutoConfiguration$$EnhancerBySpringCGLIB$$7e42e66b] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
  ____                  _   _           _        ____            __                       _ 
 | __ )   ___   _ __   | | (_)  _ __   | | __   |  _ \    ___   / _|  _   _   _ __     __| |
 |  _ \  / __| | '_ \  | | | | | '_ \  | |/ /   | |_) |  / _ \ | |_  | | | | | '_ \   / _` |
 | |_) | \__ \ | |_) | | | | | | | | | |   &lt;    |  _ &lt;  |  __/ |  _| | |_| | | | | | | (_| |
 |____/  |___/ | .__/  |_| |_| |_| |_| |_|\_\   |_| \_\  \___| |_|    \__,_| |_| |_|  \__,_|
               |_|     
                                                         
                                       
 :: bsplink-refund-management
22505 [Test worker] INFO  org.iata.bsplink.refund.controller.RefundControllerTest  – No active profile set, falling back to default profiles: default
22507 [Test worker] INFO  org.springframework.web.context.support.GenericWebApplicationContext  – Refreshing org.springframework.web.context.support.GenericWebApplicationContext@2128d014: startup date [Thu Aug 09 13:37:06 CEST 2018]; parent: org.springframework.context.annotation.AnnotationConfigApplicationContext@66828f45
23066 [Test worker] INFO  org.springframework.beans.factory.support.DefaultListableBeanFactory  – Overriding bean definition for bean 'dataSource' with a different definition: replacing [Root bean: class [null]; scope=refresh; abstract=false; lazyInit=false; autowireMode=3; dependencyCheck=0; autowireCandidate=false; primary=false; factoryBeanName=org.springframework.boot.autoconfigure.jdbc.DataSourceConfiguration$Hikari; factoryMethodName=dataSource; initMethodName=null; destroyMethodName=(inferred); defined in class path resource [org/springframework/boot/autoconfigure/jdbc/DataSourceConfiguration$Hikari.class]] with [Root bean: class [org.springframework.aop.scope.ScopedProxyFactoryBean]; scope=; abstract=false; lazyInit=false; autowireMode=0; dependencyCheck=0; autowireCandidate=true; primary=false; factoryBeanName=null; factoryMethodName=null; initMethodName=null; destroyMethodName=null; defined in BeanDefinition defined in class path resource [org/springframework/boot/autoconfigure/jdbc/DataSourceConfiguration$Hikari.class]]
23081 [Test worker] INFO  org.springframework.cloud.context.scope.GenericScope  – BeanFactory id=0cb40e0d-ae91-3a4e-9a0d-cdb6fd9a07d3
23626 [Test worker] INFO  org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker  – Bean 'org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration' of type [org.springframework.transaction.annotation.ProxyTransactionManagementConfiguration$$EnhancerBySpringCGLIB$$6228e36e] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
23649 [Test worker] INFO  org.springframework.context.support.PostProcessorRegistrationDelegate$BeanPostProcessorChecker  – Bean 'org.springframework.cloud.autoconfigure.ConfigurationPropertiesRebinderAutoConfiguration' of type [org.springframework.cloud.autoconfigure.ConfigurationPropertiesRebinderAutoConfiguration$$EnhancerBySpringCGLIB$$7e42e66b] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
2018-08-09 13:37:07.682  INFO 26020 --- [    Test worker] com.zaxxer.hikari.HikariDataSource       : HikariPool-4 - Starting...
2018-08-09 13:37:07.685  INFO 26020 --- [    Test worker] com.zaxxer.hikari.HikariDataSource       : HikariPool-4 - Start completed.
2018-08-09 13:37:07.685  INFO 26020 --- [    Test worker] o.f.c.internal.database.DatabaseFactory  : Database: jdbc:h2:mem:testdb (H2 1.4)
2018-08-09 13:37:07.690  INFO 26020 --- [    Test worker] o.f.core.internal.command.DbValidate     : Successfully validated 1 migration (execution time 00:00.003s)
2018-08-09 13:37:07.702  INFO 26020 --- [    Test worker] o.f.core.internal.command.DbMigrate      : Current version of schema &quot;PUBLIC&quot;: 0001
2018-08-09 13:37:07.702  INFO 26020 --- [    Test worker] o.f.core.internal.command.DbMigrate      : Schema &quot;PUBLIC&quot; is up to date. No migration necessary.
23823 [Test worker] INFO  org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean  – Building JPA container EntityManagerFactory for persistence unit 'default'
2018-08-09 13:37:07.775  INFO 26020 --- [    Test worker] o.hibernate.jpa.internal.util.LogHelper  : HHH000204: Processing PersistenceUnitInfo [
	name: default
	...]
2018-08-09 13:37:07.787  INFO 26020 --- [    Test worker] org.hibernate.dialect.Dialect            : HHH000400: Using dialect: org.hibernate.dialect.H2Dialect
24024 [Test worker] INFO  org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean  – Initialized JPA EntityManagerFactory for persistence unit 'default'
24070 [Test worker] INFO  org.springframework.context.annotation.AnnotationConfigApplicationContext  – Refreshing FeignContext-airlines: startup date [Thu Aug 09 13:37:08 CEST 2018]; parent: org.springframework.web.context.support.GenericWebApplicationContext@2128d014
24667 [Test worker] WARN  org.springframework.boot.autoconfigure.orm.jpa.JpaBaseConfiguration$JpaWebConfiguration$JpaWebMvcConfiguration  – spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
24712 [Test worker] INFO  org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping  – Mapped &quot;{[/v1/agents/{code}],methods=[GET]}&quot; onto public org.springframework.http.ResponseEntity&lt;org.iata.bsplink.refund.dto.Agent&gt; org.iata.bsplink.refund.controller.AgentController.getAgent(java.lang.String)
24712 [Test worker] INFO  org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping  – Mapped &quot;{[/v1/airlines/{isoCountryCode}/{airlineCode}],methods=[GET]}&quot; onto public org.springframework.http.ResponseEntity&lt;org.iata.bsplink.refund.dto.Airline&gt; org.iata.bsplink.refund.controller.AirlineController.getAirline(java.lang.String,java.lang.String)
24713 [Test worker] INFO  org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping  – Mapped &quot;{[/v1/configurations/{isoc}],methods=[GET]}&quot; onto public org.springframework.http.ResponseEntity&lt;org.iata.bsplink.refund.model.entity.Config&gt; org.iata.bsplink.refund.controller.ConfigController.getConfig(java.lang.String)
24714 [Test worker] INFO  org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping  – Mapped &quot;{[/v1/configurations/isocs],methods=[GET]}&quot; onto public org.springframework.http.ResponseEntity&lt;java.util.List&lt;java.lang.String&gt;&gt; org.iata.bsplink.refund.controller.ConfigController.getIsocs()
24714 [Test worker] INFO  org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping  – Mapped &quot;{[/v1/configurations],methods=[GET]}&quot; onto public org.springframework.http.ResponseEntity&lt;java.util.List&lt;org.iata.bsplink.refund.model.entity.Config&gt;&gt; org.iata.bsplink.refund.controller.ConfigController.getConfigs()
24714 [Test worker] INFO  org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping  – Mapped &quot;{[/v1/configurations],methods=[POST]}&quot; onto public org.springframework.http.ResponseEntity&lt;org.iata.bsplink.refund.model.entity.Config&gt; org.iata.bsplink.refund.controller.ConfigController.save(org.iata.bsplink.refund.model.entity.Config,org.springframework.validation.Errors)
24715 [Test worker] INFO  org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping  – Mapped &quot;{[/v1/currencies/{isoc}],methods=[GET]}&quot; onto public org.springframework.http.ResponseEntity&lt;java.util.List&lt;org.iata.bsplink.refund.fake.IsocCurrencies&gt;&gt; org.iata.bsplink.refund.controller.CurrenciesController.getCurrencies(java.lang.String)
24716 [Test worker] INFO  org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping  – Mapped &quot;{[/v1/reasons/indirects/{id}],methods=[GET]}&quot; onto public org.springframework.http.ResponseEntity&lt;org.iata.bsplink.refund.model.entity.Reason&gt; org.iata.bsplink.refund.controller.ReasonController.getReason(java.util.Optional&lt;org.iata.bsplink.refund.model.entity.Reason&gt;)
24716 [Test worker] INFO  org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping  – Mapped &quot;{[/v1/reasons/indirects],methods=[POST]}&quot; onto public org.springframework.http.ResponseEntity&lt;org.iata.bsplink.refund.model.entity.Reason&gt; org.iata.bsplink.refund.controller.ReasonController.createReason(org.iata.bsplink.refund.model.entity.Reason,org.springframework.validation.Errors)
24717 [Test worker] INFO  org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping  – Mapped &quot;{[/v1/reasons/indirects],methods=[GET]}&quot; onto public org.springframework.http.ResponseEntity&lt;java.util.List&lt;org.iata.bsplink.refund.model.entity.Reason&gt;&gt; org.iata.bsplink.refund.controller.ReasonController.getReasons()
24717 [Test worker] INFO  org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping  – Mapped &quot;{[/v1/reasons/indirects],methods=[GET],params=[isoCountryCode &amp;&amp; refundType]}&quot; onto public org.springframework.http.ResponseEntity&lt;java.util.List&lt;org.iata.bsplink.refund.model.entity.Reason&gt;&gt; org.iata.bsplink.refund.controller.ReasonController.getReasonsByIsocAndType(java.lang.String,org.iata.bsplink.refund.model.entity.ReasonType)
24717 [Test worker] INFO  org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping  – Mapped &quot;{[/v1/reasons/indirects],methods=[GET],params=[isoCountryCode]}&quot; onto public org.springframework.http.ResponseEntity&lt;java.util.List&lt;org.iata.bsplink.refund.model.entity.Reason&gt;&gt; org.iata.bsplink.refund.controller.ReasonController.getReasonsByIsoc(java.lang.String)
24717 [Test worker] INFO  org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping  – Mapped &quot;{[/v1/reasons/indirects/{id}],methods=[DELETE]}&quot; onto public org.springframework.http.ResponseEntity&lt;org.iata.bsplink.refund.model.entity.Reason&gt; org.iata.bsplink.refund.controller.ReasonController.deleteReason(java.util.Optional&lt;org.iata.bsplink.refund.model.entity.Reason&gt;)
24722 [Test worker] INFO  org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping  – Mapped &quot;{[/v1/reasons/indirects/{id}],methods=[PUT]}&quot; onto public org.springframework.http.ResponseEntity&lt;org.iata.bsplink.refund.model.entity.Reason&gt; org.iata.bsplink.refund.controller.ReasonController.updateReason(java.lang.Long,org.iata.bsplink.refund.model.entity.Reason)
24725 [Test worker] INFO  org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping  – Mapped &quot;{[/v1/refunds/indirects/{id}/files],methods=[GET]}&quot; onto public org.springframework.http.ResponseEntity&lt;java.util.List&lt;org.iata.bsplink.refund.model.entity.BsplinkFile&gt;&gt; org.iata.bsplink.refund.controller.RefundController.getAllFilesForRefund(org.iata.bsplink.refund.model.entity.Refund)
24725 [Test worker] INFO  org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping  – Mapped &quot;{[/v1/refunds/indirects/{id}/files],methods=[POST],consumes=[multipart/form-data]}&quot; onto public org.springframework.http.ResponseEntity&lt;java.util.List&lt;org.iata.bsplink.refund.response.SimpleResponse&gt;&gt; org.iata.bsplink.refund.controller.RefundController.saveFiles(org.iata.bsplink.refund.model.entity.Refund,java.util.List&lt;org.springframework.web.multipart.MultipartFile&gt;)
24725 [Test worker] INFO  org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping  – Mapped &quot;{[/v1/refunds/indirects],methods=[POST]}&quot; onto public org.springframework.http.ResponseEntity&lt;org.iata.bsplink.refund.model.entity.Refund&gt; org.iata.bsplink.refund.controller.RefundController.saveRefund(org.iata.bsplink.refund.model.entity.Refund,org.springframework.validation.Errors)
24726 [Test worker] INFO  org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping  – Mapped &quot;{[/v1/refunds/indirects/{id}],methods=[PUT]}&quot; onto public org.springframework.http.ResponseEntity&lt;org.iata.bsplink.refund.model.entity.Refund&gt; org.iata.bsplink.refund.controller.RefundController.updateRefund(java.lang.Long,org.iata.bsplink.refund.model.entity.Refund,org.springframework.validation.Errors)
24726 [Test worker] INFO  org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping  – Mapped &quot;{[/v1/refunds/indirects/{id}],methods=[DELETE]}&quot; onto public org.springframework.http.ResponseEntity&lt;org.iata.bsplink.refund.model.entity.Refund&gt; org.iata.bsplink.refund.controller.RefundController.deleteRefund(java.util.Optional&lt;org.iata.bsplink.refund.model.entity.Refund&gt;)
24726 [Test worker] INFO  org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping  – Mapped &quot;{[/v1/refunds/indirects/{id}/history],methods=[GET]}&quot; onto public org.springframework.http.ResponseEntity&lt;java.util.List&lt;org.iata.bsplink.refund.model.entity.RefundHistory&gt;&gt; org.iata.bsplink.refund.controller.RefundController.getRefundHistory(java.util.Optional&lt;org.iata.bsplink.refund.model.entity.Refund&gt;)
24726 [Test worker] INFO  org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping  – Mapped &quot;{[/v1/refunds/indirects/{id}/status],methods=[POST]}&quot; onto public org.springframework.http.ResponseEntity&lt;org.iata.bsplink.refund.model.entity.Refund&gt; org.iata.bsplink.refund.controller.RefundController.changeRefundStatus(org.iata.bsplink.refund.model.entity.Refund,org.iata.bsplink.refund.dto.RefundStatusRequest,org.springframework.validation.Errors)
24727 [Test worker] INFO  org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping  – Mapped &quot;{[/v1/refunds/indirects],methods=[GET],params=[isoCountryCode &amp;&amp; airlineCode &amp;&amp; ticketDocumentNumber]}&quot; onto public org.springframework.http.ResponseEntity&lt;org.iata.bsplink.refund.model.entity.Refund&gt; org.iata.bsplink.refund.controller.RefundController.getRefundByIsoCountryCodeAirlineCodeTicketDocumentNumber(java.lang.String,java.lang.String,java.lang.String)
24727 [Test worker] INFO  org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping  – Mapped &quot;{[/v1/refunds/indirects/{id}],methods=[PUT],params=[fileName]}&quot; onto public org.springframework.http.ResponseEntity&lt;org.iata.bsplink.refund.model.entity.Refund&gt; org.iata.bsplink.refund.controller.RefundController.updateRefundViaMassload(java.lang.Long,java.lang.String,org.iata.bsplink.refund.model.entity.Refund,org.springframework.validation.Errors)
24727 [Test worker] INFO  org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping  – Mapped &quot;{[/v1/refunds/indirects/{id}/status],methods=[POST],params=[fileName]}&quot; onto public org.springframework.http.ResponseEntity&lt;org.iata.bsplink.refund.model.entity.Refund&gt; org.iata.bsplink.refund.controller.RefundController.changeRefundStatusViaMassload(java.lang.String,org.iata.bsplink.refund.model.entity.Refund,org.iata.bsplink.refund.dto.RefundStatusRequest,org.springframework.validation.Errors)
24727 [Test worker] INFO  org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping  – Mapped &quot;{[/v1/refunds/indirects/{id}],methods=[GET]}&quot; onto public org.springframework.http.ResponseEntity&lt;org.iata.bsplink.refund.model.entity.Refund&gt; org.iata.bsplink.refund.controller.RefundController.getRefund(java.util.Optional&lt;org.iata.bsplink.refund.model.entity.Refund&gt;)
24728 [Test worker] INFO  org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping  – Mapped &quot;{[/v1/refunds/indirects],methods=[GET]}&quot; onto public org.springframework.http.ResponseEntity&lt;java.util.List&lt;org.iata.bsplink.refund.model.entity.Refund&gt;&gt; org.iata.bsplink.refund.controller.RefundController.getRefunds()
24728 [Test worker] INFO  org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping  – Mapped &quot;{[/v1/refunds/indirects/{id}/comments],methods=[GET],produces=[application/json;charset=UTF-8]}&quot; onto public org.springframework.http.ResponseEntity&lt;java.util.List&lt;org.iata.bsplink.refund.model.entity.Comment&gt;&gt; org.iata.bsplink.refund.controller.RefundController.getAllCommentsForRefund(org.iata.bsplink.refund.model.entity.Refund)
24728 [Test worker] INFO  org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping  – Mapped &quot;{[/v1/refunds/indirects/{id}/comments],methods=[POST]}&quot; onto public org.springframework.http.ResponseEntity&lt;org.iata.bsplink.refund.model.entity.Comment&gt; org.iata.bsplink.refund.controller.RefundController.saveComment(org.iata.bsplink.refund.dto.CommentRequest,java.lang.Long)
24730 [Test worker] INFO  org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping  – Mapped &quot;{[/v1/refunds/indirects/permissions],methods=[POST]}&quot; onto public org.springframework.http.ResponseEntity&lt;org.iata.bsplink.refund.model.entity.RefundIssuePermission&gt; org.iata.bsplink.refund.controller.RefundIssuePermissionController.createRefundIssuePermission(org.iata.bsplink.refund.model.entity.RefundIssuePermission,org.springframework.validation.Errors)
24730 [Test worker] INFO  org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping  – Mapped &quot;{[/v1/refunds/indirects/permissions],methods=[GET]}&quot; onto public org.springframework.http.ResponseEntity&lt;java.util.List&lt;org.iata.bsplink.refund.model.entity.RefundIssuePermission&gt;&gt; org.iata.bsplink.refund.controller.RefundIssuePermissionController.getRefundIssuePermissions()
24730 [Test worker] INFO  org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping  – Mapped &quot;{[/v1/refunds/indirects/permissions/{id}],methods=[DELETE]}&quot; onto public org.springframework.http.ResponseEntity&lt;org.iata.bsplink.refund.model.entity.RefundIssuePermission&gt; org.iata.bsplink.refund.controller.RefundIssuePermissionController.deleteRefundIssuePermission(java.util.Optional&lt;org.iata.bsplink.refund.model.entity.RefundIssuePermission&gt;)
24730 [Test worker] INFO  org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping  – Mapped &quot;{[/v1/refunds/indirects/permissions/{id}],methods=[GET]}&quot; onto public org.springframework.http.ResponseEntity&lt;org.iata.bsplink.refund.model.entity.RefundIssuePermission&gt; org.iata.bsplink.refund.controller.RefundIssuePermissionController.getRefundIssuePermission(java.util.Optional&lt;org.iata.bsplink.refund.model.entity.RefundIssuePermission&gt;)
24730 [Test worker] INFO  org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping  – Mapped &quot;{[/v1/refunds/indirects/permissions],methods=[GET],params=[isoCountryCode &amp;&amp; airlineCode &amp;&amp; agentCode]}&quot; onto public org.springframework.http.ResponseEntity&lt;org.iata.bsplink.refund.model.entity.RefundIssuePermission&gt; org.iata.bsplink.refund.controller.RefundIssuePermissionController.getRefundIssuePermissionByIsoCountryCodeAndAirlineCodeAndAgentCode(java.lang.String,java.lang.String,java.lang.String)
24731 [Test worker] INFO  org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping  – Mapped &quot;{[/v1/refunds/indirects/permissions],methods=[GET],params=[isoCountryCode &amp;&amp; airlineCode]}&quot; onto public org.springframework.http.ResponseEntity&lt;java.util.List&lt;org.iata.bsplink.refund.model.entity.RefundIssuePermission&gt;&gt; org.iata.bsplink.refund.controller.RefundIssuePermissionController.getRefundIssuePermissionByIsoCountryCodeAndAirlineCode(java.lang.String,java.lang.String)
24732 [Test worker] INFO  org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping  – Mapped &quot;{[/swagger-resources/configuration/security]}&quot; onto public org.springframework.http.ResponseEntity&lt;springfox.documentation.swagger.web.SecurityConfiguration&gt; springfox.documentation.swagger.web.ApiResourceController.securityConfiguration()
24732 [Test worker] INFO  org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping  – Mapped &quot;{[/swagger-resources]}&quot; onto public org.springframework.http.ResponseEntity&lt;java.util.List&lt;springfox.documentation.swagger.web.SwaggerResource&gt;&gt; springfox.documentation.swagger.web.ApiResourceController.swaggerResources()
24732 [Test worker] INFO  org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping  – Mapped &quot;{[/swagger-resources/configuration/ui]}&quot; onto public org.springframework.http.ResponseEntity&lt;springfox.documentation.swagger.web.UiConfiguration&gt; springfox.documentation.swagger.web.ApiResourceController.uiConfiguration()
24746 [Test worker] INFO  org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping  – Mapped &quot;{[/error],produces=[text/html]}&quot; onto public org.springframework.web.servlet.ModelAndView org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController.errorHtml(javax.servlet.http.HttpServletRequest,javax.servlet.http.HttpServletResponse)
24746 [Test worker] INFO  org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping  – Mapped &quot;{[/error]}&quot; onto public org.springframework.http.ResponseEntity&lt;java.util.Map&lt;java.lang.String, java.lang.Object&gt;&gt; org.springframework.boot.autoconfigure.web.servlet.error.BasicErrorController.error(javax.servlet.http.HttpServletRequest)
24840 [Test worker] INFO  springfox.documentation.spring.web.PropertySourcedRequestMappingHandlerMapping  – Mapped URL path [/v2/api-docs] onto method [public org.springframework.http.ResponseEntity&lt;springfox.documentation.spring.web.json.Json&gt; springfox.documentation.swagger2.web.Swagger2Controller.getDocumentation(java.lang.String,javax.servlet.http.HttpServletRequest)]
24949 [Test worker] INFO  org.springframework.boot.test.mock.web.SpringBootMockServletContext  – Initializing Spring FrameworkServlet ''
24949 [Test worker] INFO  org.springframework.test.web.servlet.TestDispatcherServlet  – FrameworkServlet '': initialization started
24986 [Test worker] INFO  org.springframework.web.servlet.handler.SimpleUrlHandlerMapping  – Mapped URL path [/webjars/**] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]
24986 [Test worker] INFO  org.springframework.web.servlet.handler.SimpleUrlHandlerMapping  – Mapped URL path [/**] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]
25006 [Test worker] INFO  org.springframework.web.servlet.handler.SimpleUrlHandlerMapping  – Mapped URL path [/**/favicon.ico] onto handler of type [class org.springframework.web.servlet.resource.ResourceHttpRequestHandler]
25139 [Test worker] INFO  org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter  – Looking for @ControllerAdvice: org.springframework.web.context.support.GenericWebApplicationContext@2128d014: startup date [Thu Aug 09 13:37:06 CEST 2018]; parent: org.springframework.context.annotation.AnnotationConfigApplicationContext@66828f45
25170 [Test worker] INFO  org.springframework.web.servlet.mvc.method.annotation.ExceptionHandlerExceptionResolver  – Detected @ExceptionHandler methods in applicationExceptionHandler
25207 [Test worker] INFO  org.springframework.test.web.servlet.TestDispatcherServlet  – FrameworkServlet '': initialization completed in 258 ms
25256 [Test worker] WARN  org.springframework.cloud.netflix.archaius.ArchaiusAutoConfiguration  – Netflix ConfigurationManager has already been installed, unable to re-install
25556 [Test worker] INFO  org.springframework.context.support.DefaultLifecycleProcessor  – Starting beans in phase 2147483647
2018-08-09 13:37:09.507  INFO 26020 --- [    Test worker] d.s.w.p.DocumentationPluginsBootstrapper : Context refreshed
2018-08-09 13:37:09.508  INFO 26020 --- [    Test worker] d.s.w.p.DocumentationPluginsBootstrapper : Found 1 custom documentation plugin(s)
2018-08-09 13:37:09.533  INFO 26020 --- [    Test worker] s.d.s.w.s.ApiListingReferenceScanner     : Scanning for api listing references
25785 [Test worker] INFO  org.iata.bsplink.refund.controller.RefundControllerTest  – Started RefundControllerTest in 3.53 seconds (JVM running for 27.103)
25831 [Test worker] INFO  org.springframework.test.context.transaction.TransactionContext  – Began transaction (1) for test context [DefaultTestContext@32e1cd1c testClass = RefundControllerTest, testInstance = org.iata.bsplink.refund.controller.RefundControllerTest@45fdbe66, testMethod = testPartialRefundValidatorIsInvokedOnRefundCreation@RefundControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@1f5d4e4b testClass = RefundControllerTest, locations = '{}', classes = '{class org.iata.bsplink.refund.Application}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{app.host.local.protocol=local, app.host.sftp.protocol=sftp, org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@e7e8512, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@4ece6cea, [ImportsContextCustomizer@7e32a44a key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@7c81a5a0, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@2dc9c285, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@d444633b, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@794b4b8d], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -&gt; true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@494e061e]; rollback [true]
2018-08-09 13:37:09.981  INFO 26020 --- [    Test worker] o.i.b.refund.service.RefundService       : Saving refund : Refund(id=null, ticketDocumentNumber=null, status=PENDING, isoCountryCode=AA, agentCode=78200011, airlineCode=220, dateOfIssue=2018-06-19, billingPeriod=null, currency=RefundCurrency(code=ABC, decimals=0), passenger=PEPE, amounts=RefundAmounts(grossFare=0, lessGrossFareUsed=0, commissionAmount=0, commissionRate=0, spam=0, cancellationPenalty=0, miscellaneousFee=0, taxOnCancellationPenalty=0, taxOnMiscellaneousFee=0, commissionOnCpAndMfAmount=0, commissionOnCpAndMfRate=0, tax=0, refundToPassenger=0), partialRefund=false, netReporting=false, waiverCode=null, tourCode=null, dateOfIssueRelatedDocument=2000-01-02, dateOfAirlineAction=null, exchange=false, agentContact=null, airlineContact=null, settlementAuthorisationCode=null, customerFileReference=null, agentVatNumber=null, airlineVatNumber=null, originalIssue=null, airlineCodeRelatedDocument=220, relatedDocument=RelatedDocument(relatedTicketDocumentNumber=1234567890, relatedTicketCoupon1=true, relatedTicketCoupon2=false, relatedTicketCoupon3=false, relatedTicketCoupon4=false), statisticalCode=I, formOfPaymentAmounts=[], conjunctions=[], taxMiscellaneousFees=[], issueReason=Reason for Issuance, rejectionReason=null, airlineRemark=null, attachedFiles=null, comments=null, history=null, agentRegistrationNumber=null, airlineRegistrationNumber=null)
2018-08-09 13:37:09.996  INFO 26020 --- [    Test worker] o.i.b.refund.service.RefundService       : Saving refund history for: Refund(id=43, ticketDocumentNumber=null, status=PENDING, isoCountryCode=AA, agentCode=78200011, airlineCode=220, dateOfIssue=2018-06-19, billingPeriod=null, currency=RefundCurrency(code=ABC, decimals=0), passenger=PEPE, amounts=RefundAmounts(grossFare=0, lessGrossFareUsed=0, commissionAmount=0, commissionRate=0, spam=0, cancellationPenalty=0, miscellaneousFee=0, taxOnCancellationPenalty=0, taxOnMiscellaneousFee=0, commissionOnCpAndMfAmount=0, commissionOnCpAndMfRate=0, tax=0, refundToPassenger=0), partialRefund=false, netReporting=false, waiverCode=null, tourCode=null, dateOfIssueRelatedDocument=2000-01-02, dateOfAirlineAction=null, exchange=false, agentContact=null, airlineContact=null, settlementAuthorisationCode=null, customerFileReference=null, agentVatNumber=null, airlineVatNumber=null, originalIssue=null, airlineCodeRelatedDocument=220, relatedDocument=RelatedDocument(relatedTicketDocumentNumber=1234567890, relatedTicketCoupon1=true, relatedTicketCoupon2=false, relatedTicketCoupon3=false, relatedTicketCoupon4=false), statisticalCode=I, formOfPaymentAmounts=[], conjunctions=[], taxMiscellaneousFees=[], issueReason=Reason for Issuance, rejectionReason=null, airlineRemark=null, attachedFiles=null, comments=null, history=null, agentRegistrationNumber=null, airlineRegistrationNumber=null) Action: REFUND_ISSUE
2018-08-09 13:37:09.999  INFO 26020 --- [    Test worker] o.i.b.r.service.RefundHistoryService     : Saving refund history: RefundHistory(id=null, action=REFUND_ISSUE, insertDateTime=2018-08-09T11:37:09.998Z, refundId=43, fileName=null)
2018-08-09 13:37:10.001  INFO 26020 --- [    Test worker] o.i.b.refund.service.RefundService       : Refund history saved: RefundHistory(id=44, action=REFUND_ISSUE, insertDateTime=2018-08-09T11:37:09.998Z, refundId=43, fileName=null)
2018-08-09 13:37:10.001  INFO 26020 --- [    Test worker] o.i.b.r.service.RefundHistoryService     : Getting refund history by id: 43
2018-08-09 13:37:10.002  INFO 26020 --- [    Test worker] o.h.h.i.QueryTranslatorFactoryInitiator  : HHH000397: Using ASTQueryTranslatorFactory
26140 [Test worker] INFO  org.springframework.test.context.transaction.TransactionContext  – Rolled back transaction for test context [DefaultTestContext@32e1cd1c testClass = RefundControllerTest, testInstance = org.iata.bsplink.refund.controller.RefundControllerTest@45fdbe66, testMethod = testPartialRefundValidatorIsInvokedOnRefundCreation@RefundControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@1f5d4e4b testClass = RefundControllerTest, locations = '{}', classes = '{class org.iata.bsplink.refund.Application}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{app.host.local.protocol=local, app.host.sftp.protocol=sftp, org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@e7e8512, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@4ece6cea, [ImportsContextCustomizer@7e32a44a key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@7c81a5a0, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@2dc9c285, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@d444633b, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@794b4b8d], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -&gt; true]].
26143 [Test worker] INFO  org.springframework.test.context.transaction.TransactionContext  – Began transaction (1) for test context [DefaultTestContext@32e1cd1c testClass = RefundControllerTest, testInstance = org.iata.bsplink.refund.controller.RefundControllerTest@21648771, testMethod = testUpdateRefundStatusNotFound@RefundControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@1f5d4e4b testClass = RefundControllerTest, locations = '{}', classes = '{class org.iata.bsplink.refund.Application}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{app.host.local.protocol=local, app.host.sftp.protocol=sftp, org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@e7e8512, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@4ece6cea, [ImportsContextCustomizer@7e32a44a key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@7c81a5a0, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@2dc9c285, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@d444633b, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@794b4b8d], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -&gt; true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@494e061e]; rollback [true]
2018-08-09 13:37:10.112  INFO 26020 --- [    Test worker] o.i.b.r.controller.RefundController      : received request to change refund's status: null
26164 [Test worker] INFO  org.springframework.test.context.transaction.TransactionContext  – Rolled back transaction for test context [DefaultTestContext@32e1cd1c testClass = RefundControllerTest, testInstance = org.iata.bsplink.refund.controller.RefundControllerTest@21648771, testMethod = testUpdateRefundStatusNotFound@RefundControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@1f5d4e4b testClass = RefundControllerTest, locations = '{}', classes = '{class org.iata.bsplink.refund.Application}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{app.host.local.protocol=local, app.host.sftp.protocol=sftp, org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@e7e8512, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@4ece6cea, [ImportsContextCustomizer@7e32a44a key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@7c81a5a0, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@2dc9c285, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@d444633b, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@794b4b8d], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -&gt; true]].
26169 [Test worker] INFO  org.springframework.test.context.transaction.TransactionContext  – Began transaction (1) for test context [DefaultTestContext@32e1cd1c testClass = RefundControllerTest, testInstance = org.iata.bsplink.refund.controller.RefundControllerTest@47506e9f, testMethod = testSaveCommentsNoText@RefundControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@1f5d4e4b testClass = RefundControllerTest, locations = '{}', classes = '{class org.iata.bsplink.refund.Application}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{app.host.local.protocol=local, app.host.sftp.protocol=sftp, org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@e7e8512, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@4ece6cea, [ImportsContextCustomizer@7e32a44a key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@7c81a5a0, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@2dc9c285, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@d444633b, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@794b4b8d], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -&gt; true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@494e061e]; rollback [true]
26175 [Test worker] INFO  org.iata.bsplink.commons.rest.exception.handler.ApplicationExceptionHandler  – &lt;400 Bad Request,ApplicationErrorResponse(timestamp=1533814630126, status=400, error=Bad Request, message=Bad Request, path=/v1/refunds/indirects/45/comments),{}&gt;
org.springframework.http.converter.HttpMessageNotReadableException: JSON parse error: text; nested exception is com.fasterxml.jackson.databind.JsonMappingException: text
 at [Source: (PushbackInputStream); line: 1, column: 9] (through reference chain: org.iata.bsplink.refund.dto.CommentRequest[&quot;text&quot;])
	at org.springframework.http.converter.json.AbstractJackson2HttpMessageConverter.readJavaType(AbstractJackson2HttpMessageConverter.java:241)
	at org.springframework.http.converter.json.AbstractJackson2HttpMessageConverter.read(AbstractJackson2HttpMessageConverter.java:223)
	at org.springframework.web.servlet.mvc.method.annotation.AbstractMessageConverterMethodArgumentResolver.readWithMessageConverters(AbstractMessageConverterMethodArgumentResolver.java:206)
	at org.springframework.web.servlet.mvc.method.annotation.RequestResponseBodyMethodProcessor.readWithMessageConverters(RequestResponseBodyMethodProcessor.java:157)
	at org.springframework.web.servlet.mvc.method.annotation.RequestResponseBodyMethodProcessor.resolveArgument(RequestResponseBodyMethodProcessor.java:130)
	at org.springframework.web.method.support.HandlerMethodArgumentResolverComposite.resolveArgument(HandlerMethodArgumentResolverComposite.java:124)
	at org.springframework.web.method.support.InvocableHandlerMethod.getMethodArgumentValues(InvocableHandlerMethod.java:161)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:131)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:102)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:870)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:776)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:991)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:925)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:978)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:881)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:661)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:855)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:66)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:742)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:166)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:99)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.HttpPutFormContentFilter.doFilterInternal(HttpPutFormContentFilter.java:109)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:81)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:200)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:166)
	at org.iata.bsplink.refund.controller.RefundControllerTest.testSaveCommentsNoText(RefundControllerTest.java:193)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.springframework.test.context.junit4.statements.RunBeforeTestExecutionCallbacks.evaluate(RunBeforeTestExecutionCallbacks.java:73)
	at org.springframework.test.context.junit4.statements.RunAfterTestExecutionCallbacks.evaluate(RunAfterTestExecutionCallbacks.java:83)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75)
	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86)
	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:251)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)
	at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecutor.runTestClass(JUnitTestClassExecutor.java:116)
	at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecutor.execute(JUnitTestClassExecutor.java:59)
	at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecutor.execute(JUnitTestClassExecutor.java:39)
	at org.gradle.api.internal.tasks.testing.junit.AbstractJUnitTestClassProcessor.processTestClass(AbstractJUnitTestClassProcessor.java:66)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.processTestClass(SuiteTestClassProcessor.java:51)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:35)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:32)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:93)
	at com.sun.proxy.$Proxy1.processTestClass(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.processTestClass(TestWorker.java:109)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:35)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.remote.internal.hub.MessageHubBackedObjectConnection$DispatchWrapper.dispatch(MessageHubBackedObjectConnection.java:146)
	at org.gradle.internal.remote.internal.hub.MessageHubBackedObjectConnection$DispatchWrapper.dispatch(MessageHubBackedObjectConnection.java:128)
	at org.gradle.internal.remote.internal.hub.MessageHub$Handler.run(MessageHub.java:404)
	at org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:63)
	at org.gradle.internal.concurrent.ManagedExecutorImpl$1.run(ManagedExecutorImpl.java:46)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at org.gradle.internal.concurrent.ThreadFactoryImpl$ManagedThreadRunnable.run(ThreadFactoryImpl.java:55)
	at java.lang.Thread.run(Thread.java:748)
Caused by: com.fasterxml.jackson.databind.JsonMappingException: text
 at [Source: (PushbackInputStream); line: 1, column: 9] (through reference chain: org.iata.bsplink.refund.dto.CommentRequest[&quot;text&quot;])
	at com.fasterxml.jackson.databind.JsonMappingException.from(JsonMappingException.java:277)
	at com.fasterxml.jackson.databind.deser.SettableBeanProperty._throwAsIOE(SettableBeanProperty.java:598)
	at com.fasterxml.jackson.databind.deser.SettableBeanProperty._throwAsIOE(SettableBeanProperty.java:586)
	at com.fasterxml.jackson.databind.deser.impl.MethodProperty.deserializeAndSet(MethodProperty.java:134)
	at com.fasterxml.jackson.databind.deser.BeanDeserializer.deserializeFromObject(BeanDeserializer.java:369)
	at com.fasterxml.jackson.databind.deser.BeanDeserializer.deserialize(BeanDeserializer.java:159)
	at com.fasterxml.jackson.databind.ObjectMapper._readMapAndClose(ObjectMapper.java:4001)
	at com.fasterxml.jackson.databind.ObjectMapper.readValue(ObjectMapper.java:3072)
	at org.springframework.http.converter.json.AbstractJackson2HttpMessageConverter.readJavaType(AbstractJackson2HttpMessageConverter.java:235)
	... 91 more
Caused by: java.lang.NullPointerException: text
	at org.iata.bsplink.refund.dto.CommentRequest.setText(CommentRequest.java:13)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at com.fasterxml.jackson.databind.deser.impl.MethodProperty.deserializeAndSet(MethodProperty.java:132)
	... 96 more
26188 [Test worker] INFO  org.springframework.test.context.transaction.TransactionContext  – Rolled back transaction for test context [DefaultTestContext@32e1cd1c testClass = RefundControllerTest, testInstance = org.iata.bsplink.refund.controller.RefundControllerTest@47506e9f, testMethod = testSaveCommentsNoText@RefundControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@1f5d4e4b testClass = RefundControllerTest, locations = '{}', classes = '{class org.iata.bsplink.refund.Application}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{app.host.local.protocol=local, app.host.sftp.protocol=sftp, org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@e7e8512, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@4ece6cea, [ImportsContextCustomizer@7e32a44a key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@7c81a5a0, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@2dc9c285, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@d444633b, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@794b4b8d], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -&gt; true]].
26191 [Test worker] INFO  org.springframework.test.context.transaction.TransactionContext  – Began transaction (1) for test context [DefaultTestContext@32e1cd1c testClass = RefundControllerTest, testInstance = org.iata.bsplink.refund.controller.RefundControllerTest@43433b32, testMethod = testSaveFilesRefundNotFound@RefundControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@1f5d4e4b testClass = RefundControllerTest, locations = '{}', classes = '{class org.iata.bsplink.refund.Application}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{app.host.local.protocol=local, app.host.sftp.protocol=sftp, org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@e7e8512, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@4ece6cea, [ImportsContextCustomizer@7e32a44a key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@7c81a5a0, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@2dc9c285, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@d444633b, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@794b4b8d], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -&gt; true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@494e061e]; rollback [true]
2018-08-09 13:37:10.154  INFO 26020 --- [    Test worker] o.i.b.r.controller.RefundController      : received request for getting comments with refund: null
26207 [Test worker] INFO  org.springframework.test.context.transaction.TransactionContext  – Rolled back transaction for test context [DefaultTestContext@32e1cd1c testClass = RefundControllerTest, testInstance = org.iata.bsplink.refund.controller.RefundControllerTest@43433b32, testMethod = testSaveFilesRefundNotFound@RefundControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@1f5d4e4b testClass = RefundControllerTest, locations = '{}', classes = '{class org.iata.bsplink.refund.Application}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{app.host.local.protocol=local, app.host.sftp.protocol=sftp, org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@e7e8512, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@4ece6cea, [ImportsContextCustomizer@7e32a44a key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@7c81a5a0, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@2dc9c285, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@d444633b, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@794b4b8d], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -&gt; true]].
26210 [Test worker] INFO  org.springframework.test.context.transaction.TransactionContext  – Began transaction (1) for test context [DefaultTestContext@32e1cd1c testClass = RefundControllerTest, testInstance = org.iata.bsplink.refund.controller.RefundControllerTest@4b513395, testMethod = testSaveFilesThrowsException@RefundControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@1f5d4e4b testClass = RefundControllerTest, locations = '{}', classes = '{class org.iata.bsplink.refund.Application}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{app.host.local.protocol=local, app.host.sftp.protocol=sftp, org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@e7e8512, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@4ece6cea, [ImportsContextCustomizer@7e32a44a key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@7c81a5a0, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@2dc9c285, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@d444633b, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@794b4b8d], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -&gt; true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@494e061e]; rollback [true]
2018-08-09 13:37:10.167  INFO 26020 --- [    Test worker] o.i.b.r.controller.RefundController      : received request for getting comments with refund: Refund(id=46, ticketDocumentNumber=1234567890, status=PENDING, isoCountryCode=AA, agentCode=78200011, airlineCode=220, dateOfIssue=2018-06-19, billingPeriod=null, currency=RefundCurrency(code=ABC, decimals=0), passenger=PEPE, amounts=RefundAmounts(grossFare=0, lessGrossFareUsed=0, commissionAmount=0, commissionRate=0, spam=0, cancellationPenalty=0, miscellaneousFee=0, taxOnCancellationPenalty=0, taxOnMiscellaneousFee=0, commissionOnCpAndMfAmount=0, commissionOnCpAndMfRate=0, tax=0, refundToPassenger=0), partialRefund=false, netReporting=false, waiverCode=null, tourCode=null, dateOfIssueRelatedDocument=2000-01-02, dateOfAirlineAction=null, exchange=false, agentContact=null, airlineContact=null, settlementAuthorisationCode=null, customerFileReference=null, agentVatNumber=null, airlineVatNumber=null, originalIssue=null, airlineCodeRelatedDocument=220, relatedDocument=RelatedDocument(relatedTicketDocumentNumber=1234567890, relatedTicketCoupon1=true, relatedTicketCoupon2=false, relatedTicketCoupon3=false, relatedTicketCoupon4=false), statisticalCode=I, formOfPaymentAmounts=[], conjunctions=[], taxMiscellaneousFees=[], issueReason=Reason for Issuance, rejectionReason=null, airlineRemark=null, attachedFiles=null, comments=null, history=null, agentRegistrationNumber=null, airlineRegistrationNumber=null)
2018-08-09 13:37:10.167  INFO 26020 --- [    Test worker] o.i.bsplink.refund.utils.FilesUtility    : save multipart file from local to remote. File name: fileOne.txt. Refund: Refund(id=46, ticketDocumentNumber=1234567890, status=PENDING, isoCountryCode=AA, agentCode=78200011, airlineCode=220, dateOfIssue=2018-06-19, billingPeriod=null, currency=RefundCurrency(code=ABC, decimals=0), passenger=PEPE, amounts=RefundAmounts(grossFare=0, lessGrossFareUsed=0, commissionAmount=0, commissionRate=0, spam=0, cancellationPenalty=0, miscellaneousFee=0, taxOnCancellationPenalty=0, taxOnMiscellaneousFee=0, commissionOnCpAndMfAmount=0, commissionOnCpAndMfRate=0, tax=0, refundToPassenger=0), partialRefund=false, netReporting=false, waiverCode=null, tourCode=null, dateOfIssueRelatedDocument=2000-01-02, dateOfAirlineAction=null, exchange=false, agentContact=null, airlineContact=null, settlementAuthorisationCode=null, customerFileReference=null, agentVatNumber=null, airlineVatNumber=null, originalIssue=null, airlineCodeRelatedDocument=220, relatedDocument=RelatedDocument(relatedTicketDocumentNumber=1234567890, relatedTicketCoupon1=true, relatedTicketCoupon2=false, relatedTicketCoupon3=false, relatedTicketCoupon4=false), statisticalCode=I, formOfPaymentAmounts=[], conjunctions=[], taxMiscellaneousFees=[], issueReason=Reason for Issuance, rejectionReason=null, airlineRemark=null, attachedFiles=null, comments=null, history=null, agentRegistrationNumber=null, airlineRegistrationNumber=null)
2018-08-09 13:37:10.167  INFO 26020 --- [    Test worker] o.i.bsplink.refund.utils.FilesUtility    : save file fileOne.txt in attached_files directory
2018-08-09 13:37:10.169  INFO 26020 --- [    Test worker] o.i.bsplink.refund.utils.FilesUtility    : file fileOne.txt saved. Path: attached_files/fileOne.txt
2018-08-09 13:37:10.169  INFO 26020 --- [    Test worker] o.i.bsplink.refund.utils.FilesUtility    : upload file: fileOne.txt from local to remote
2018-08-09 13:37:10.170  INFO 26020 --- [    Test worker] o.i.bsplink.refund.utils.FilesUtility    : get remote path for refund: Refund(id=46, ticketDocumentNumber=1234567890, status=PENDING, isoCountryCode=AA, agentCode=78200011, airlineCode=220, dateOfIssue=2018-06-19, billingPeriod=null, currency=RefundCurrency(code=ABC, decimals=0), passenger=PEPE, amounts=RefundAmounts(grossFare=0, lessGrossFareUsed=0, commissionAmount=0, commissionRate=0, spam=0, cancellationPenalty=0, miscellaneousFee=0, taxOnCancellationPenalty=0, taxOnMiscellaneousFee=0, commissionOnCpAndMfAmount=0, commissionOnCpAndMfRate=0, tax=0, refundToPassenger=0), partialRefund=false, netReporting=false, waiverCode=null, tourCode=null, dateOfIssueRelatedDocument=2000-01-02, dateOfAirlineAction=null, exchange=false, agentContact=null, airlineContact=null, settlementAuthorisationCode=null, customerFileReference=null, agentVatNumber=null, airlineVatNumber=null, originalIssue=null, airlineCodeRelatedDocument=220, relatedDocument=RelatedDocument(relatedTicketDocumentNumber=1234567890, relatedTicketCoupon1=true, relatedTicketCoupon2=false, relatedTicketCoupon3=false, relatedTicketCoupon4=false), statisticalCode=I, formOfPaymentAmounts=[], conjunctions=[], taxMiscellaneousFees=[], issueReason=Reason for Issuance, rejectionReason=null, airlineRemark=null, attachedFiles=null, comments=null, history=null, agentRegistrationNumber=null, airlineRegistrationNumber=null)
26224 [Test worker] INFO  org.springframework.test.context.transaction.TransactionContext  – Rolled back transaction for test context [DefaultTestContext@32e1cd1c testClass = RefundControllerTest, testInstance = org.iata.bsplink.refund.controller.RefundControllerTest@4b513395, testMethod = testSaveFilesThrowsException@RefundControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@1f5d4e4b testClass = RefundControllerTest, locations = '{}', classes = '{class org.iata.bsplink.refund.Application}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{app.host.local.protocol=local, app.host.sftp.protocol=sftp, org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@e7e8512, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@4ece6cea, [ImportsContextCustomizer@7e32a44a key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@7c81a5a0, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@2dc9c285, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@d444633b, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@794b4b8d], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -&gt; true]].
26226 [Test worker] INFO  org.springframework.test.context.transaction.TransactionContext  – Began transaction (1) for test context [DefaultTestContext@32e1cd1c testClass = RefundControllerTest, testInstance = org.iata.bsplink.refund.controller.RefundControllerTest@11489335, testMethod = testCurrencyValidatorIsInvokedOnRefundCreation@RefundControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@1f5d4e4b testClass = RefundControllerTest, locations = '{}', classes = '{class org.iata.bsplink.refund.Application}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{app.host.local.protocol=local, app.host.sftp.protocol=sftp, org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@e7e8512, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@4ece6cea, [ImportsContextCustomizer@7e32a44a key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@7c81a5a0, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@2dc9c285, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@d444633b, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@794b4b8d], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -&gt; true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@494e061e]; rollback [true]
2018-08-09 13:37:10.187  INFO 26020 --- [    Test worker] o.i.b.refund.service.RefundService       : Saving refund : Refund(id=null, ticketDocumentNumber=null, status=PENDING, isoCountryCode=AA, agentCode=78200011, airlineCode=220, dateOfIssue=2018-06-19, billingPeriod=null, currency=RefundCurrency(code=ABC, decimals=0), passenger=PEPE, amounts=RefundAmounts(grossFare=0, lessGrossFareUsed=0, commissionAmount=0, commissionRate=0, spam=0, cancellationPenalty=0, miscellaneousFee=0, taxOnCancellationPenalty=0, taxOnMiscellaneousFee=0, commissionOnCpAndMfAmount=0, commissionOnCpAndMfRate=0, tax=0, refundToPassenger=0), partialRefund=false, netReporting=false, waiverCode=null, tourCode=null, dateOfIssueRelatedDocument=2000-01-02, dateOfAirlineAction=null, exchange=false, agentContact=null, airlineContact=null, settlementAuthorisationCode=null, customerFileReference=null, agentVatNumber=null, airlineVatNumber=null, originalIssue=null, airlineCodeRelatedDocument=220, relatedDocument=RelatedDocument(relatedTicketDocumentNumber=1234567890, relatedTicketCoupon1=true, relatedTicketCoupon2=false, relatedTicketCoupon3=false, relatedTicketCoupon4=false), statisticalCode=I, formOfPaymentAmounts=[], conjunctions=[], taxMiscellaneousFees=[], issueReason=Reason for Issuance, rejectionReason=null, airlineRemark=null, attachedFiles=null, comments=null, history=null, agentRegistrationNumber=null, airlineRegistrationNumber=null)
2018-08-09 13:37:10.188  INFO 26020 --- [    Test worker] o.i.b.refund.service.RefundService       : Saving refund history for: Refund(id=47, ticketDocumentNumber=null, status=PENDING, isoCountryCode=AA, agentCode=78200011, airlineCode=220, dateOfIssue=2018-06-19, billingPeriod=null, currency=RefundCurrency(code=ABC, decimals=0), passenger=PEPE, amounts=RefundAmounts(grossFare=0, lessGrossFareUsed=0, commissionAmount=0, commissionRate=0, spam=0, cancellationPenalty=0, miscellaneousFee=0, taxOnCancellationPenalty=0, taxOnMiscellaneousFee=0, commissionOnCpAndMfAmount=0, commissionOnCpAndMfRate=0, tax=0, refundToPassenger=0), partialRefund=false, netReporting=false, waiverCode=null, tourCode=null, dateOfIssueRelatedDocument=2000-01-02, dateOfAirlineAction=null, exchange=false, agentContact=null, airlineContact=null, settlementAuthorisationCode=null, customerFileReference=null, agentVatNumber=null, airlineVatNumber=null, originalIssue=null, airlineCodeRelatedDocument=220, relatedDocument=RelatedDocument(relatedTicketDocumentNumber=1234567890, relatedTicketCoupon1=true, relatedTicketCoupon2=false, relatedTicketCoupon3=false, relatedTicketCoupon4=false), statisticalCode=I, formOfPaymentAmounts=[], conjunctions=[], taxMiscellaneousFees=[], issueReason=Reason for Issuance, rejectionReason=null, airlineRemark=null, attachedFiles=null, comments=null, history=null, agentRegistrationNumber=null, airlineRegistrationNumber=null) Action: REFUND_ISSUE
2018-08-09 13:37:10.189  INFO 26020 --- [    Test worker] o.i.b.r.service.RefundHistoryService     : Saving refund history: RefundHistory(id=null, action=REFUND_ISSUE, insertDateTime=2018-08-09T11:37:10.189Z, refundId=47, fileName=null)
2018-08-09 13:37:10.189  INFO 26020 --- [    Test worker] o.i.b.refund.service.RefundService       : Refund history saved: RefundHistory(id=48, action=REFUND_ISSUE, insertDateTime=2018-08-09T11:37:10.189Z, refundId=47, fileName=null)
2018-08-09 13:37:10.189  INFO 26020 --- [    Test worker] o.i.b.r.service.RefundHistoryService     : Getting refund history by id: 47
26246 [Test worker] INFO  org.springframework.test.context.transaction.TransactionContext  – Rolled back transaction for test context [DefaultTestContext@32e1cd1c testClass = RefundControllerTest, testInstance = org.iata.bsplink.refund.controller.RefundControllerTest@11489335, testMethod = testCurrencyValidatorIsInvokedOnRefundCreation@RefundControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@1f5d4e4b testClass = RefundControllerTest, locations = '{}', classes = '{class org.iata.bsplink.refund.Application}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{app.host.local.protocol=local, app.host.sftp.protocol=sftp, org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@e7e8512, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@4ece6cea, [ImportsContextCustomizer@7e32a44a key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@7c81a5a0, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@2dc9c285, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@d444633b, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@794b4b8d], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -&gt; true]].
26249 [Test worker] INFO  org.springframework.test.context.transaction.TransactionContext  – Began transaction (1) for test context [DefaultTestContext@32e1cd1c testClass = RefundControllerTest, testInstance = org.iata.bsplink.refund.controller.RefundControllerTest@41bfc0f3, testMethod = testGetRefundHistory@RefundControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@1f5d4e4b testClass = RefundControllerTest, locations = '{}', classes = '{class org.iata.bsplink.refund.Application}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{app.host.local.protocol=local, app.host.sftp.protocol=sftp, org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@e7e8512, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@4ece6cea, [ImportsContextCustomizer@7e32a44a key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@7c81a5a0, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@2dc9c285, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@d444633b, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@794b4b8d], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -&gt; true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@494e061e]; rollback [true]
2018-08-09 13:37:10.201  INFO 26020 --- [    Test worker] o.i.b.refund.service.RefundService       : Saving refund : Refund(id=null, ticketDocumentNumber=1234567890, status=PENDING, isoCountryCode=AA, agentCode=78200011, airlineCode=220, dateOfIssue=2018-06-19, billingPeriod=null, currency=RefundCurrency(code=ABC, decimals=0), passenger=PEPE, amounts=RefundAmounts(grossFare=0, lessGrossFareUsed=0, commissionAmount=0, commissionRate=0, spam=0, cancellationPenalty=0, miscellaneousFee=0, taxOnCancellationPenalty=0, taxOnMiscellaneousFee=0, commissionOnCpAndMfAmount=0, commissionOnCpAndMfRate=0, tax=0, refundToPassenger=0), partialRefund=false, netReporting=false, waiverCode=null, tourCode=null, dateOfIssueRelatedDocument=2000-01-02, dateOfAirlineAction=null, exchange=false, agentContact=null, airlineContact=null, settlementAuthorisationCode=null, customerFileReference=null, agentVatNumber=null, airlineVatNumber=null, originalIssue=null, airlineCodeRelatedDocument=220, relatedDocument=RelatedDocument(relatedTicketDocumentNumber=1234567890, relatedTicketCoupon1=true, relatedTicketCoupon2=false, relatedTicketCoupon3=false, relatedTicketCoupon4=false), statisticalCode=I, formOfPaymentAmounts=[], conjunctions=[], taxMiscellaneousFees=[], issueReason=Reason for Issuance, rejectionReason=null, airlineRemark=null, attachedFiles=null, comments=null, history=null, agentRegistrationNumber=null, airlineRegistrationNumber=null)
2018-08-09 13:37:10.202  INFO 26020 --- [    Test worker] o.i.b.refund.service.RefundService       : Saving refund history for: Refund(id=49, ticketDocumentNumber=1234567890, status=PENDING, isoCountryCode=AA, agentCode=78200011, airlineCode=220, dateOfIssue=2018-06-19, billingPeriod=null, currency=RefundCurrency(code=ABC, decimals=0), passenger=PEPE, amounts=RefundAmounts(grossFare=0, lessGrossFareUsed=0, commissionAmount=0, commissionRate=0, spam=0, cancellationPenalty=0, miscellaneousFee=0, taxOnCancellationPenalty=0, taxOnMiscellaneousFee=0, commissionOnCpAndMfAmount=0, commissionOnCpAndMfRate=0, tax=0, refundToPassenger=0), partialRefund=false, netReporting=false, waiverCode=null, tourCode=null, dateOfIssueRelatedDocument=2000-01-02, dateOfAirlineAction=null, exchange=false, agentContact=null, airlineContact=null, settlementAuthorisationCode=null, customerFileReference=null, agentVatNumber=null, airlineVatNumber=null, originalIssue=null, airlineCodeRelatedDocument=220, relatedDocument=RelatedDocument(relatedTicketDocumentNumber=1234567890, relatedTicketCoupon1=true, relatedTicketCoupon2=false, relatedTicketCoupon3=false, relatedTicketCoupon4=false), statisticalCode=I, formOfPaymentAmounts=[], conjunctions=[], taxMiscellaneousFees=[], issueReason=Reason for Issuance, rejectionReason=null, airlineRemark=null, attachedFiles=null, comments=null, history=null, agentRegistrationNumber=null, airlineRegistrationNumber=null) Action: REFUND_ISSUE
2018-08-09 13:37:10.202  INFO 26020 --- [    Test worker] o.i.b.r.service.RefundHistoryService     : Saving refund history: RefundHistory(id=null, action=REFUND_ISSUE, insertDateTime=2018-08-09T11:37:10.202Z, refundId=49, fileName=null)
2018-08-09 13:37:10.203  INFO 26020 --- [    Test worker] o.i.b.refund.service.RefundService       : Refund history saved: RefundHistory(id=50, action=REFUND_ISSUE, insertDateTime=2018-08-09T11:37:10.202Z, refundId=49, fileName=null)
2018-08-09 13:37:10.203  INFO 26020 --- [    Test worker] o.i.b.r.service.RefundHistoryService     : Getting refund history by id: 49
2018-08-09 13:37:10.209  INFO 26020 --- [    Test worker] o.i.b.r.controller.RefundController      : received to get refund's history: Optional[Refund(id=49, ticketDocumentNumber=1234567890, status=PENDING, isoCountryCode=AA, agentCode=78200011, airlineCode=220, dateOfIssue=2018-06-19, billingPeriod=null, currency=RefundCurrency(code=ABC, decimals=0), passenger=PEPE, amounts=RefundAmounts(grossFare=0, lessGrossFareUsed=0, commissionAmount=0, commissionRate=0, spam=0, cancellationPenalty=0, miscellaneousFee=0, taxOnCancellationPenalty=0, taxOnMiscellaneousFee=0, commissionOnCpAndMfAmount=0, commissionOnCpAndMfRate=0, tax=0, refundToPassenger=0), partialRefund=false, netReporting=false, waiverCode=null, tourCode=null, dateOfIssueRelatedDocument=2000-01-02, dateOfAirlineAction=null, exchange=false, agentContact=null, airlineContact=null, settlementAuthorisationCode=null, customerFileReference=null, agentVatNumber=null, airlineVatNumber=null, originalIssue=null, airlineCodeRelatedDocument=220, relatedDocument=RelatedDocument(relatedTicketDocumentNumber=1234567890, relatedTicketCoupon1=true, relatedTicketCoupon2=false, relatedTicketCoupon3=false, relatedTicketCoupon4=false), statisticalCode=I, formOfPaymentAmounts=[], conjunctions=[], taxMiscellaneousFees=[], issueReason=Reason for Issuance, rejectionReason=null, airlineRemark=null, attachedFiles=null, comments=null, history=[RefundHistory(id=50, action=REFUND_ISSUE, insertDateTime=2018-08-09T11:37:10.202Z, refundId=49, fileName=null)], agentRegistrationNumber=null, airlineRegistrationNumber=null)]
2018-08-09 13:37:10.209  INFO 26020 --- [    Test worker] o.i.b.r.service.RefundHistoryService     : Getting refund history by id: 49
2018-08-09 13:37:10.218  INFO 26020 --- [    Test worker] o.i.b.r.controller.RefundController      : responding with response: [RefundHistory(id=50, action=REFUND_ISSUE, insertDateTime=2018-08-09T11:37:10.202Z, refundId=49, fileName=null)]
26272 [Test worker] INFO  org.springframework.test.context.transaction.TransactionContext  – Rolled back transaction for test context [DefaultTestContext@32e1cd1c testClass = RefundControllerTest, testInstance = org.iata.bsplink.refund.controller.RefundControllerTest@41bfc0f3, testMethod = testGetRefundHistory@RefundControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@1f5d4e4b testClass = RefundControllerTest, locations = '{}', classes = '{class org.iata.bsplink.refund.Application}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{app.host.local.protocol=local, app.host.sftp.protocol=sftp, org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@e7e8512, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@4ece6cea, [ImportsContextCustomizer@7e32a44a key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@7c81a5a0, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@2dc9c285, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@d444633b, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@794b4b8d], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -&gt; true]].
26274 [Test worker] INFO  org.springframework.test.context.transaction.TransactionContext  – Began transaction (1) for test context [DefaultTestContext@32e1cd1c testClass = RefundControllerTest, testInstance = org.iata.bsplink.refund.controller.RefundControllerTest@5feda32e, testMethod = testSaveIndirectRefundHasErrors@RefundControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@1f5d4e4b testClass = RefundControllerTest, locations = '{}', classes = '{class org.iata.bsplink.refund.Application}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{app.host.local.protocol=local, app.host.sftp.protocol=sftp, org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@e7e8512, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@4ece6cea, [ImportsContextCustomizer@7e32a44a key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@7c81a5a0, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@2dc9c285, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@d444633b, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@794b4b8d], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -&gt; true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@494e061e]; rollback [true]
26283 [Test worker] INFO  org.iata.bsplink.commons.rest.exception.handler.ApplicationExceptionHandler  – &lt;400 Bad Request,ValidationErrorResponse(validationErrors=[org.iata.bsplink.commons.rest.response.validation.ValidationError@ae341e8]),{}&gt;
org.iata.bsplink.commons.rest.exception.ApplicationValidationException: Validation error
	at org.iata.bsplink.refund.controller.RefundController.saveRefund(RefundController.java:288)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:209)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:136)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:102)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:870)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:776)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:991)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:925)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:978)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:881)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:661)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:855)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:66)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:742)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:166)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:99)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.HttpPutFormContentFilter.doFilterInternal(HttpPutFormContentFilter.java:109)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:81)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:200)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:166)
	at org.iata.bsplink.refund.controller.RefundControllerTest.testSaveIndirectRefundHasErrors(RefundControllerTest.java:434)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.springframework.test.context.junit4.statements.RunBeforeTestExecutionCallbacks.evaluate(RunBeforeTestExecutionCallbacks.java:73)
	at org.springframework.test.context.junit4.statements.RunAfterTestExecutionCallbacks.evaluate(RunAfterTestExecutionCallbacks.java:83)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75)
	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86)
	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:251)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)
	at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecutor.runTestClass(JUnitTestClassExecutor.java:116)
	at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecutor.execute(JUnitTestClassExecutor.java:59)
	at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecutor.execute(JUnitTestClassExecutor.java:39)
	at org.gradle.api.internal.tasks.testing.junit.AbstractJUnitTestClassProcessor.processTestClass(AbstractJUnitTestClassProcessor.java:66)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.processTestClass(SuiteTestClassProcessor.java:51)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:35)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:32)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:93)
	at com.sun.proxy.$Proxy1.processTestClass(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.processTestClass(TestWorker.java:109)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:35)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.remote.internal.hub.MessageHubBackedObjectConnection$DispatchWrapper.dispatch(MessageHubBackedObjectConnection.java:146)
	at org.gradle.internal.remote.internal.hub.MessageHubBackedObjectConnection$DispatchWrapper.dispatch(MessageHubBackedObjectConnection.java:128)
	at org.gradle.internal.remote.internal.hub.MessageHub$Handler.run(MessageHub.java:404)
	at org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:63)
	at org.gradle.internal.concurrent.ManagedExecutorImpl$1.run(ManagedExecutorImpl.java:46)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at org.gradle.internal.concurrent.ThreadFactoryImpl$ManagedThreadRunnable.run(ThreadFactoryImpl.java:55)
	at java.lang.Thread.run(Thread.java:748)
26290 [Test worker] INFO  org.springframework.test.context.transaction.TransactionContext  – Rolled back transaction for test context [DefaultTestContext@32e1cd1c testClass = RefundControllerTest, testInstance = org.iata.bsplink.refund.controller.RefundControllerTest@5feda32e, testMethod = testSaveIndirectRefundHasErrors@RefundControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@1f5d4e4b testClass = RefundControllerTest, locations = '{}', classes = '{class org.iata.bsplink.refund.Application}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{app.host.local.protocol=local, app.host.sftp.protocol=sftp, org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@e7e8512, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@4ece6cea, [ImportsContextCustomizer@7e32a44a key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@7c81a5a0, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@2dc9c285, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@d444633b, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@794b4b8d], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -&gt; true]].
26292 [Test worker] INFO  org.springframework.test.context.transaction.TransactionContext  – Began transaction (1) for test context [DefaultTestContext@32e1cd1c testClass = RefundControllerTest, testInstance = org.iata.bsplink.refund.controller.RefundControllerTest@421f3d87, testMethod = testDeleteIndirectRefund@RefundControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@1f5d4e4b testClass = RefundControllerTest, locations = '{}', classes = '{class org.iata.bsplink.refund.Application}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{app.host.local.protocol=local, app.host.sftp.protocol=sftp, org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@e7e8512, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@4ece6cea, [ImportsContextCustomizer@7e32a44a key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@7c81a5a0, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@2dc9c285, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@d444633b, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@794b4b8d], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -&gt; true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@494e061e]; rollback [true]
26301 [Test worker] INFO  org.springframework.test.context.transaction.TransactionContext  – Rolled back transaction for test context [DefaultTestContext@32e1cd1c testClass = RefundControllerTest, testInstance = org.iata.bsplink.refund.controller.RefundControllerTest@421f3d87, testMethod = testDeleteIndirectRefund@RefundControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@1f5d4e4b testClass = RefundControllerTest, locations = '{}', classes = '{class org.iata.bsplink.refund.Application}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{app.host.local.protocol=local, app.host.sftp.protocol=sftp, org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@e7e8512, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@4ece6cea, [ImportsContextCustomizer@7e32a44a key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@7c81a5a0, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@2dc9c285, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@d444633b, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@794b4b8d], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -&gt; true]].
26303 [Test worker] INFO  org.springframework.test.context.transaction.TransactionContext  – Began transaction (1) for test context [DefaultTestContext@32e1cd1c testClass = RefundControllerTest, testInstance = org.iata.bsplink.refund.controller.RefundControllerTest@9e4a1e5, testMethod = testUpdateRefundModifyFiles@RefundControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@1f5d4e4b testClass = RefundControllerTest, locations = '{}', classes = '{class org.iata.bsplink.refund.Application}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{app.host.local.protocol=local, app.host.sftp.protocol=sftp, org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@e7e8512, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@4ece6cea, [ImportsContextCustomizer@7e32a44a key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@7c81a5a0, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@2dc9c285, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@d444633b, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@794b4b8d], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -&gt; true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@494e061e]; rollback [true]
2018-08-09 13:37:10.351  INFO 26020 --- [    Test worker] o.i.b.r.controller.RefundController      : received request to update indirect refund: Refund(id=53, ticketDocumentNumber=null, status=PENDING, isoCountryCode=AA, agentCode=78200022, airlineCode=220, dateOfIssue=2018-07-19, billingPeriod=null, currency=RefundCurrency(code=ABC, decimals=0), passenger=JUAN, amounts=RefundAmounts(grossFare=0, lessGrossFareUsed=0, commissionAmount=0, commissionRate=0, spam=0, cancellationPenalty=0, miscellaneousFee=0, taxOnCancellationPenalty=0, taxOnMiscellaneousFee=0, commissionOnCpAndMfAmount=0, commissionOnCpAndMfRate=0, tax=0, refundToPassenger=0), partialRefund=false, netReporting=false, waiverCode=null, tourCode=tourCode, dateOfIssueRelatedDocument=2000-03-04, dateOfAirlineAction=null, exchange=false, agentContact=Contact(id=null, contactName=contact, phoneFaxNumber=654321654, email=email@email.com), airlineContact=null, settlementAuthorisationCode=null, customerFileReference=null, agentVatNumber=null, airlineVatNumber=null, originalIssue=null, airlineCodeRelatedDocument=220, relatedDocument=RelatedDocument(relatedTicketDocumentNumber=1111111111, relatedTicketCoupon1=true, relatedTicketCoupon2=true, relatedTicketCoupon3=false, relatedTicketCoupon4=false), statisticalCode=I, formOfPaymentAmounts=[], conjunctions=[], taxMiscellaneousFees=[], issueReason=Reason for Issuance, rejectionReason=null, airlineRemark=null, attachedFiles=[org.iata.bsplink.refund.model.entity.BsplinkFile@472d3e78], comments=null, history=null, agentRegistrationNumber=null, airlineRegistrationNumber=null)
2018-08-09 13:37:10.351  INFO 26020 --- [    Test worker] o.i.b.r.v.RefundUpdateValidator          : Validating refund to update: Refund(id=53, ticketDocumentNumber=null, status=PENDING, isoCountryCode=AA, agentCode=78200022, airlineCode=220, dateOfIssue=2018-07-19, billingPeriod=null, currency=RefundCurrency(code=ABC, decimals=0), passenger=JUAN, amounts=RefundAmounts(grossFare=0, lessGrossFareUsed=0, commissionAmount=0, commissionRate=0, spam=0, cancellationPenalty=0, miscellaneousFee=0, taxOnCancellationPenalty=0, taxOnMiscellaneousFee=0, commissionOnCpAndMfAmount=0, commissionOnCpAndMfRate=0, tax=0, refundToPassenger=0), partialRefund=false, netReporting=false, waiverCode=null, tourCode=tourCode, dateOfIssueRelatedDocument=2000-03-04, dateOfAirlineAction=null, exchange=false, agentContact=Contact(id=null, contactName=contact, phoneFaxNumber=654321654, email=email@email.com), airlineContact=null, settlementAuthorisationCode=null, customerFileReference=null, agentVatNumber=null, airlineVatNumber=null, originalIssue=null, airlineCodeRelatedDocument=220, relatedDocument=RelatedDocument(relatedTicketDocumentNumber=1111111111, relatedTicketCoupon1=true, relatedTicketCoupon2=true, relatedTicketCoupon3=false, relatedTicketCoupon4=false), statisticalCode=I, formOfPaymentAmounts=[], conjunctions=[], taxMiscellaneousFees=[], issueReason=Reason for Issuance, rejectionReason=null, airlineRemark=null, attachedFiles=[org.iata.bsplink.refund.model.entity.BsplinkFile@472d3e78], comments=null, history=null, agentRegistrationNumber=null, airlineRegistrationNumber=null)
2018-08-09 13:37:10.354  INFO 26020 --- [    Test worker] o.i.b.r.v.RefundUpdateValidator          : attachedFiles cannot be modified
26404 [Test worker] INFO  org.iata.bsplink.commons.rest.exception.handler.ApplicationExceptionHandler  – &lt;400 Bad Request,ValidationErrorResponse(validationErrors=[org.iata.bsplink.commons.rest.response.validation.ValidationError@5ac93ed0]),{}&gt;
org.iata.bsplink.commons.rest.exception.ApplicationValidationException: Validation error
	at org.iata.bsplink.refund.validation.RefundUpdateValidator.validate(RefundUpdateValidator.java:62)
	at org.iata.bsplink.refund.validation.RefundUpdateValidator.validate(RefundUpdateValidator.java:81)
	at org.iata.bsplink.refund.controller.RefundController.updateRefund(RefundController.java:310)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:209)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:136)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:102)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:870)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:776)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:991)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:925)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:978)
	at org.springframework.web.servlet.FrameworkServlet.doPut(FrameworkServlet.java:892)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:664)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:855)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:66)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:742)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:166)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:99)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.HttpPutFormContentFilter.doFilterInternal(HttpPutFormContentFilter.java:109)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:81)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:200)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:166)
	at org.iata.bsplink.refund.controller.RefundControllerTest.testUpdateRefundModifyFiles(RefundControllerTest.java:340)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.springframework.test.context.junit4.statements.RunBeforeTestExecutionCallbacks.evaluate(RunBeforeTestExecutionCallbacks.java:73)
	at org.springframework.test.context.junit4.statements.RunAfterTestExecutionCallbacks.evaluate(RunAfterTestExecutionCallbacks.java:83)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75)
	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86)
	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:251)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)
	at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecutor.runTestClass(JUnitTestClassExecutor.java:116)
	at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecutor.execute(JUnitTestClassExecutor.java:59)
	at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecutor.execute(JUnitTestClassExecutor.java:39)
	at org.gradle.api.internal.tasks.testing.junit.AbstractJUnitTestClassProcessor.processTestClass(AbstractJUnitTestClassProcessor.java:66)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.processTestClass(SuiteTestClassProcessor.java:51)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:35)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:32)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:93)
	at com.sun.proxy.$Proxy1.processTestClass(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.processTestClass(TestWorker.java:109)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:35)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.remote.internal.hub.MessageHubBackedObjectConnection$DispatchWrapper.dispatch(MessageHubBackedObjectConnection.java:146)
	at org.gradle.internal.remote.internal.hub.MessageHubBackedObjectConnection$DispatchWrapper.dispatch(MessageHubBackedObjectConnection.java:128)
	at org.gradle.internal.remote.internal.hub.MessageHub$Handler.run(MessageHub.java:404)
	at org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:63)
	at org.gradle.internal.concurrent.ManagedExecutorImpl$1.run(ManagedExecutorImpl.java:46)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at org.gradle.internal.concurrent.ThreadFactoryImpl$ManagedThreadRunnable.run(ThreadFactoryImpl.java:55)
	at java.lang.Thread.run(Thread.java:748)
26412 [Test worker] INFO  org.springframework.test.context.transaction.TransactionContext  – Rolled back transaction for test context [DefaultTestContext@32e1cd1c testClass = RefundControllerTest, testInstance = org.iata.bsplink.refund.controller.RefundControllerTest@9e4a1e5, testMethod = testUpdateRefundModifyFiles@RefundControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@1f5d4e4b testClass = RefundControllerTest, locations = '{}', classes = '{class org.iata.bsplink.refund.Application}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{app.host.local.protocol=local, app.host.sftp.protocol=sftp, org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@e7e8512, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@4ece6cea, [ImportsContextCustomizer@7e32a44a key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@7c81a5a0, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@2dc9c285, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@d444633b, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@794b4b8d], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -&gt; true]].
26416 [Test worker] INFO  org.springframework.test.context.transaction.TransactionContext  – Began transaction (1) for test context [DefaultTestContext@32e1cd1c testClass = RefundControllerTest, testInstance = org.iata.bsplink.refund.controller.RefundControllerTest@261b3cc5, testMethod = testDeleteIndirectRefundNotFound@RefundControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@1f5d4e4b testClass = RefundControllerTest, locations = '{}', classes = '{class org.iata.bsplink.refund.Application}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{app.host.local.protocol=local, app.host.sftp.protocol=sftp, org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@e7e8512, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@4ece6cea, [ImportsContextCustomizer@7e32a44a key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@7c81a5a0, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@2dc9c285, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@d444633b, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@794b4b8d], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -&gt; true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@494e061e]; rollback [true]
26425 [Test worker] INFO  org.springframework.test.context.transaction.TransactionContext  – Rolled back transaction for test context [DefaultTestContext@32e1cd1c testClass = RefundControllerTest, testInstance = org.iata.bsplink.refund.controller.RefundControllerTest@261b3cc5, testMethod = testDeleteIndirectRefundNotFound@RefundControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@1f5d4e4b testClass = RefundControllerTest, locations = '{}', classes = '{class org.iata.bsplink.refund.Application}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{app.host.local.protocol=local, app.host.sftp.protocol=sftp, org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@e7e8512, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@4ece6cea, [ImportsContextCustomizer@7e32a44a key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@7c81a5a0, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@2dc9c285, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@d444633b, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@794b4b8d], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -&gt; true]].
26430 [Test worker] INFO  org.springframework.test.context.transaction.TransactionContext  – Began transaction (1) for test context [DefaultTestContext@32e1cd1c testClass = RefundControllerTest, testInstance = org.iata.bsplink.refund.controller.RefundControllerTest@76f210a8, testMethod = testGetRefundByIsoCountryCodeAirlineCodeTicketDocumentNumberNotFound@RefundControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@1f5d4e4b testClass = RefundControllerTest, locations = '{}', classes = '{class org.iata.bsplink.refund.Application}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{app.host.local.protocol=local, app.host.sftp.protocol=sftp, org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@e7e8512, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@4ece6cea, [ImportsContextCustomizer@7e32a44a key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@7c81a5a0, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@2dc9c285, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@d444633b, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@794b4b8d], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -&gt; true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@494e061e]; rollback [true]
26439 [Test worker] INFO  org.springframework.test.context.transaction.TransactionContext  – Rolled back transaction for test context [DefaultTestContext@32e1cd1c testClass = RefundControllerTest, testInstance = org.iata.bsplink.refund.controller.RefundControllerTest@76f210a8, testMethod = testGetRefundByIsoCountryCodeAirlineCodeTicketDocumentNumberNotFound@RefundControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@1f5d4e4b testClass = RefundControllerTest, locations = '{}', classes = '{class org.iata.bsplink.refund.Application}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{app.host.local.protocol=local, app.host.sftp.protocol=sftp, org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@e7e8512, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@4ece6cea, [ImportsContextCustomizer@7e32a44a key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@7c81a5a0, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@2dc9c285, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@d444633b, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@794b4b8d], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -&gt; true]].
26441 [Test worker] INFO  org.springframework.test.context.transaction.TransactionContext  – Began transaction (1) for test context [DefaultTestContext@32e1cd1c testClass = RefundControllerTest, testInstance = org.iata.bsplink.refund.controller.RefundControllerTest@1d834f04, testMethod = testGetAllCommentsForRefund@RefundControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@1f5d4e4b testClass = RefundControllerTest, locations = '{}', classes = '{class org.iata.bsplink.refund.Application}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{app.host.local.protocol=local, app.host.sftp.protocol=sftp, org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@e7e8512, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@4ece6cea, [ImportsContextCustomizer@7e32a44a key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@7c81a5a0, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@2dc9c285, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@d444633b, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@794b4b8d], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -&gt; true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@494e061e]; rollback [true]
2018-08-09 13:37:10.400  INFO 26020 --- [    Test worker] o.i.b.r.controller.RefundController      : received request for getting comments with refund: Refund(id=55, ticketDocumentNumber=1234567890, status=PENDING, isoCountryCode=AA, agentCode=78200011, airlineCode=220, dateOfIssue=2018-06-19, billingPeriod=null, currency=RefundCurrency(code=ABC, decimals=0), passenger=PEPE, amounts=RefundAmounts(grossFare=0, lessGrossFareUsed=0, commissionAmount=0, commissionRate=0, spam=0, cancellationPenalty=0, miscellaneousFee=0, taxOnCancellationPenalty=0, taxOnMiscellaneousFee=0, commissionOnCpAndMfAmount=0, commissionOnCpAndMfRate=0, tax=0, refundToPassenger=0), partialRefund=false, netReporting=false, waiverCode=null, tourCode=null, dateOfIssueRelatedDocument=2000-01-02, dateOfAirlineAction=null, exchange=false, agentContact=null, airlineContact=null, settlementAuthorisationCode=null, customerFileReference=null, agentVatNumber=null, airlineVatNumber=null, originalIssue=null, airlineCodeRelatedDocument=220, relatedDocument=RelatedDocument(relatedTicketDocumentNumber=1234567890, relatedTicketCoupon1=true, relatedTicketCoupon2=false, relatedTicketCoupon3=false, relatedTicketCoupon4=false), statisticalCode=I, formOfPaymentAmounts=[], conjunctions=[], taxMiscellaneousFees=[], issueReason=Reason for Issuance, rejectionReason=null, airlineRemark=null, attachedFiles=null, comments=null, history=null, agentRegistrationNumber=null, airlineRegistrationNumber=null)
2018-08-09 13:37:10.401  INFO 26020 --- [    Test worker] o.i.b.refund.service.CommentService      : Getting comment list by refund id: 55
2018-08-09 13:37:10.413  INFO 26020 --- [    Test worker] o.i.b.r.controller.RefundController      : responding with response: [Comment(id=56, text=Comment one, insertDateTime=2018-08-09T11:37:10.394Z, refundId=55), Comment(id=57, text=Comment two, insertDateTime=2018-08-09T11:37:10.398Z, refundId=55)]
26471 [Test worker] INFO  org.springframework.test.context.transaction.TransactionContext  – Rolled back transaction for test context [DefaultTestContext@32e1cd1c testClass = RefundControllerTest, testInstance = org.iata.bsplink.refund.controller.RefundControllerTest@1d834f04, testMethod = testGetAllCommentsForRefund@RefundControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@1f5d4e4b testClass = RefundControllerTest, locations = '{}', classes = '{class org.iata.bsplink.refund.Application}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{app.host.local.protocol=local, app.host.sftp.protocol=sftp, org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@e7e8512, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@4ece6cea, [ImportsContextCustomizer@7e32a44a key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@7c81a5a0, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@2dc9c285, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@d444633b, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@794b4b8d], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -&gt; true]].
26473 [Test worker] INFO  org.springframework.test.context.transaction.TransactionContext  – Began transaction (1) for test context [DefaultTestContext@32e1cd1c testClass = RefundControllerTest, testInstance = org.iata.bsplink.refund.controller.RefundControllerTest@6b4530bd, testMethod = testValidatesConjunctionsOnRefundCreation@RefundControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@1f5d4e4b testClass = RefundControllerTest, locations = '{}', classes = '{class org.iata.bsplink.refund.Application}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{app.host.local.protocol=local, app.host.sftp.protocol=sftp, org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@e7e8512, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@4ece6cea, [ImportsContextCustomizer@7e32a44a key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@7c81a5a0, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@2dc9c285, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@d444633b, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@794b4b8d], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -&gt; true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@494e061e]; rollback [true]
26488 [Test worker] INFO  org.iata.bsplink.commons.rest.exception.handler.ApplicationExceptionHandler  – &lt;400 Bad Request,ValidationErrorResponse(validationErrors=[org.iata.bsplink.commons.rest.response.validation.ValidationError@c41c53b1]),{}&gt;
org.iata.bsplink.commons.rest.exception.ApplicationValidationException: Validation error
	at org.iata.bsplink.refund.controller.RefundController.saveRefund(RefundController.java:288)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:209)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:136)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:102)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:870)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:776)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:991)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:925)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:978)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:881)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:661)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:855)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:66)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:742)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:166)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:99)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.HttpPutFormContentFilter.doFilterInternal(HttpPutFormContentFilter.java:109)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:81)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:200)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:166)
	at org.iata.bsplink.refund.controller.RefundControllerTest.testValidatesConjunctionsOnRefundCreation(RefundControllerTest.java:1084)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.springframework.test.context.junit4.statements.RunBeforeTestExecutionCallbacks.evaluate(RunBeforeTestExecutionCallbacks.java:73)
	at org.springframework.test.context.junit4.statements.RunAfterTestExecutionCallbacks.evaluate(RunAfterTestExecutionCallbacks.java:83)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75)
	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86)
	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:251)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)
	at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecutor.runTestClass(JUnitTestClassExecutor.java:116)
	at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecutor.execute(JUnitTestClassExecutor.java:59)
	at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecutor.execute(JUnitTestClassExecutor.java:39)
	at org.gradle.api.internal.tasks.testing.junit.AbstractJUnitTestClassProcessor.processTestClass(AbstractJUnitTestClassProcessor.java:66)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.processTestClass(SuiteTestClassProcessor.java:51)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:35)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:32)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:93)
	at com.sun.proxy.$Proxy1.processTestClass(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.processTestClass(TestWorker.java:109)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:35)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.remote.internal.hub.MessageHubBackedObjectConnection$DispatchWrapper.dispatch(MessageHubBackedObjectConnection.java:146)
	at org.gradle.internal.remote.internal.hub.MessageHubBackedObjectConnection$DispatchWrapper.dispatch(MessageHubBackedObjectConnection.java:128)
	at org.gradle.internal.remote.internal.hub.MessageHub$Handler.run(MessageHub.java:404)
	at org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:63)
	at org.gradle.internal.concurrent.ManagedExecutorImpl$1.run(ManagedExecutorImpl.java:46)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at org.gradle.internal.concurrent.ThreadFactoryImpl$ManagedThreadRunnable.run(ThreadFactoryImpl.java:55)
	at java.lang.Thread.run(Thread.java:748)
26493 [Test worker] INFO  org.springframework.test.context.transaction.TransactionContext  – Rolled back transaction for test context [DefaultTestContext@32e1cd1c testClass = RefundControllerTest, testInstance = org.iata.bsplink.refund.controller.RefundControllerTest@6b4530bd, testMethod = testValidatesConjunctionsOnRefundCreation@RefundControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@1f5d4e4b testClass = RefundControllerTest, locations = '{}', classes = '{class org.iata.bsplink.refund.Application}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{app.host.local.protocol=local, app.host.sftp.protocol=sftp, org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@e7e8512, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@4ece6cea, [ImportsContextCustomizer@7e32a44a key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@7c81a5a0, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@2dc9c285, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@d444633b, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@794b4b8d], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -&gt; true]].
26495 [Test worker] INFO  org.springframework.test.context.transaction.TransactionContext  – Began transaction (1) for test context [DefaultTestContext@32e1cd1c testClass = RefundControllerTest, testInstance = org.iata.bsplink.refund.controller.RefundControllerTest@53363270, testMethod = testOnUpdateRefundUpdateValidatorIsNotCalledIfThereArePreviousErrors@RefundControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@1f5d4e4b testClass = RefundControllerTest, locations = '{}', classes = '{class org.iata.bsplink.refund.Application}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{app.host.local.protocol=local, app.host.sftp.protocol=sftp, org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@e7e8512, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@4ece6cea, [ImportsContextCustomizer@7e32a44a key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@7c81a5a0, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@2dc9c285, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@d444633b, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@794b4b8d], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -&gt; true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@494e061e]; rollback [true]
2018-08-09 13:37:10.458  INFO 26020 --- [    Test worker] o.i.b.r.controller.RefundController      : received request to update indirect refund: Refund(id=58, ticketDocumentNumber=null, status=PENDING, isoCountryCode=AA, agentCode=78200011, airlineCode=220, dateOfIssue=2018-06-19, billingPeriod=null, currency=RefundCurrency(code=ABC, decimals=0), passenger=PEPE, amounts=RefundAmounts(grossFare=0, lessGrossFareUsed=0, commissionAmount=0, commissionRate=0, spam=0, cancellationPenalty=0, miscellaneousFee=0, taxOnCancellationPenalty=0, taxOnMiscellaneousFee=0, commissionOnCpAndMfAmount=0, commissionOnCpAndMfRate=0, tax=0, refundToPassenger=0), partialRefund=false, netReporting=false, waiverCode=null, tourCode=null, dateOfIssueRelatedDocument=2000-01-02, dateOfAirlineAction=null, exchange=false, agentContact=null, airlineContact=null, settlementAuthorisationCode=null, customerFileReference=null, agentVatNumber=null, airlineVatNumber=null, originalIssue=null, airlineCodeRelatedDocument=220, relatedDocument=RelatedDocument(relatedTicketDocumentNumber=1234567890, relatedTicketCoupon1=true, relatedTicketCoupon2=false, relatedTicketCoupon3=false, relatedTicketCoupon4=false), statisticalCode=I, formOfPaymentAmounts=[], conjunctions=null, taxMiscellaneousFees=[], issueReason=Reason for Issuance, rejectionReason=null, airlineRemark=null, attachedFiles=null, comments=null, history=null, agentRegistrationNumber=null, airlineRegistrationNumber=null)
26507 [Test worker] INFO  org.iata.bsplink.commons.rest.exception.handler.ApplicationExceptionHandler  – &lt;400 Bad Request,ValidationErrorResponse(validationErrors=[org.iata.bsplink.commons.rest.response.validation.ValidationError@c41c53b1]),{}&gt;
org.iata.bsplink.commons.rest.exception.ApplicationValidationException: Validation error
	at org.iata.bsplink.refund.controller.RefundController.updateRefund(RefundController.java:314)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:209)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:136)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:102)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:870)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:776)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:991)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:925)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:978)
	at org.springframework.web.servlet.FrameworkServlet.doPut(FrameworkServlet.java:892)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:664)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:855)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:66)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:742)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:166)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:99)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.HttpPutFormContentFilter.doFilterInternal(HttpPutFormContentFilter.java:109)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:81)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:200)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:166)
	at org.iata.bsplink.refund.controller.RefundControllerTest.testOnUpdateRefundUpdateValidatorIsNotCalledIfThereArePreviousErrors(RefundControllerTest.java:1098)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.springframework.test.context.junit4.statements.RunBeforeTestExecutionCallbacks.evaluate(RunBeforeTestExecutionCallbacks.java:73)
	at org.springframework.test.context.junit4.statements.RunAfterTestExecutionCallbacks.evaluate(RunAfterTestExecutionCallbacks.java:83)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75)
	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86)
	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:251)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)
	at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecutor.runTestClass(JUnitTestClassExecutor.java:116)
	at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecutor.execute(JUnitTestClassExecutor.java:59)
	at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecutor.execute(JUnitTestClassExecutor.java:39)
	at org.gradle.api.internal.tasks.testing.junit.AbstractJUnitTestClassProcessor.processTestClass(AbstractJUnitTestClassProcessor.java:66)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.processTestClass(SuiteTestClassProcessor.java:51)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:35)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:32)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:93)
	at com.sun.proxy.$Proxy1.processTestClass(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.processTestClass(TestWorker.java:109)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:35)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.remote.internal.hub.MessageHubBackedObjectConnection$DispatchWrapper.dispatch(MessageHubBackedObjectConnection.java:146)
	at org.gradle.internal.remote.internal.hub.MessageHubBackedObjectConnection$DispatchWrapper.dispatch(MessageHubBackedObjectConnection.java:128)
	at org.gradle.internal.remote.internal.hub.MessageHub$Handler.run(MessageHub.java:404)
	at org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:63)
	at org.gradle.internal.concurrent.ManagedExecutorImpl$1.run(ManagedExecutorImpl.java:46)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at org.gradle.internal.concurrent.ThreadFactoryImpl$ManagedThreadRunnable.run(ThreadFactoryImpl.java:55)
	at java.lang.Thread.run(Thread.java:748)
26516 [Test worker] INFO  org.springframework.test.context.transaction.TransactionContext  – Rolled back transaction for test context [DefaultTestContext@32e1cd1c testClass = RefundControllerTest, testInstance = org.iata.bsplink.refund.controller.RefundControllerTest@53363270, testMethod = testOnUpdateRefundUpdateValidatorIsNotCalledIfThereArePreviousErrors@RefundControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@1f5d4e4b testClass = RefundControllerTest, locations = '{}', classes = '{class org.iata.bsplink.refund.Application}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{app.host.local.protocol=local, app.host.sftp.protocol=sftp, org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@e7e8512, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@4ece6cea, [ImportsContextCustomizer@7e32a44a key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@7c81a5a0, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@2dc9c285, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@d444633b, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@794b4b8d], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -&gt; true]].
26518 [Test worker] INFO  org.springframework.test.context.transaction.TransactionContext  – Began transaction (1) for test context [DefaultTestContext@32e1cd1c testClass = RefundControllerTest, testInstance = org.iata.bsplink.refund.controller.RefundControllerTest@16266f14, testMethod = getAllFilesForRefundBadRequest@RefundControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@1f5d4e4b testClass = RefundControllerTest, locations = '{}', classes = '{class org.iata.bsplink.refund.Application}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{app.host.local.protocol=local, app.host.sftp.protocol=sftp, org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@e7e8512, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@4ece6cea, [ImportsContextCustomizer@7e32a44a key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@7c81a5a0, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@2dc9c285, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@d444633b, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@794b4b8d], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -&gt; true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@494e061e]; rollback [true]
2018-08-09 13:37:10.473  INFO 26020 --- [    Test worker] o.i.b.r.controller.RefundController      : received request for getting files with refund: null
26525 [Test worker] INFO  org.springframework.test.context.transaction.TransactionContext  – Rolled back transaction for test context [DefaultTestContext@32e1cd1c testClass = RefundControllerTest, testInstance = org.iata.bsplink.refund.controller.RefundControllerTest@16266f14, testMethod = getAllFilesForRefundBadRequest@RefundControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@1f5d4e4b testClass = RefundControllerTest, locations = '{}', classes = '{class org.iata.bsplink.refund.Application}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{app.host.local.protocol=local, app.host.sftp.protocol=sftp, org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@e7e8512, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@4ece6cea, [ImportsContextCustomizer@7e32a44a key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@7c81a5a0, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@2dc9c285, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@d444633b, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@794b4b8d], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -&gt; true]].
26527 [Test worker] INFO  org.springframework.test.context.transaction.TransactionContext  – Began transaction (1) for test context [DefaultTestContext@32e1cd1c testClass = RefundControllerTest, testInstance = org.iata.bsplink.refund.controller.RefundControllerTest@666a7d81, testMethod = testSaveIndirectRefund@RefundControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@1f5d4e4b testClass = RefundControllerTest, locations = '{}', classes = '{class org.iata.bsplink.refund.Application}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{app.host.local.protocol=local, app.host.sftp.protocol=sftp, org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@e7e8512, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@4ece6cea, [ImportsContextCustomizer@7e32a44a key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@7c81a5a0, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@2dc9c285, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@d444633b, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@794b4b8d], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -&gt; true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@494e061e]; rollback [true]
2018-08-09 13:37:10.487  INFO 26020 --- [    Test worker] o.i.b.refund.service.RefundService       : Saving refund : Refund(id=null, ticketDocumentNumber=null, status=PENDING, isoCountryCode=AA, agentCode=78200011, airlineCode=220, dateOfIssue=2018-06-19, billingPeriod=null, currency=RefundCurrency(code=ABC, decimals=0), passenger=PEPE, amounts=RefundAmounts(grossFare=0, lessGrossFareUsed=0, commissionAmount=0, commissionRate=0, spam=0, cancellationPenalty=0, miscellaneousFee=0, taxOnCancellationPenalty=0, taxOnMiscellaneousFee=0, commissionOnCpAndMfAmount=0, commissionOnCpAndMfRate=0, tax=0, refundToPassenger=0), partialRefund=false, netReporting=false, waiverCode=null, tourCode=null, dateOfIssueRelatedDocument=2000-01-02, dateOfAirlineAction=null, exchange=false, agentContact=null, airlineContact=null, settlementAuthorisationCode=null, customerFileReference=null, agentVatNumber=null, airlineVatNumber=null, originalIssue=null, airlineCodeRelatedDocument=220, relatedDocument=RelatedDocument(relatedTicketDocumentNumber=1234567890, relatedTicketCoupon1=true, relatedTicketCoupon2=false, relatedTicketCoupon3=false, relatedTicketCoupon4=false), statisticalCode=I, formOfPaymentAmounts=[], conjunctions=[], taxMiscellaneousFees=[], issueReason=Reason for Issuance, rejectionReason=null, airlineRemark=null, attachedFiles=null, comments=null, history=null, agentRegistrationNumber=null, airlineRegistrationNumber=null)
2018-08-09 13:37:10.488  INFO 26020 --- [    Test worker] o.i.b.refund.service.RefundService       : Saving refund history for: Refund(id=59, ticketDocumentNumber=null, status=PENDING, isoCountryCode=AA, agentCode=78200011, airlineCode=220, dateOfIssue=2018-06-19, billingPeriod=null, currency=RefundCurrency(code=ABC, decimals=0), passenger=PEPE, amounts=RefundAmounts(grossFare=0, lessGrossFareUsed=0, commissionAmount=0, commissionRate=0, spam=0, cancellationPenalty=0, miscellaneousFee=0, taxOnCancellationPenalty=0, taxOnMiscellaneousFee=0, commissionOnCpAndMfAmount=0, commissionOnCpAndMfRate=0, tax=0, refundToPassenger=0), partialRefund=false, netReporting=false, waiverCode=null, tourCode=null, dateOfIssueRelatedDocument=2000-01-02, dateOfAirlineAction=null, exchange=false, agentContact=null, airlineContact=null, settlementAuthorisationCode=null, customerFileReference=null, agentVatNumber=null, airlineVatNumber=null, originalIssue=null, airlineCodeRelatedDocument=220, relatedDocument=RelatedDocument(relatedTicketDocumentNumber=1234567890, relatedTicketCoupon1=true, relatedTicketCoupon2=false, relatedTicketCoupon3=false, relatedTicketCoupon4=false), statisticalCode=I, formOfPaymentAmounts=[], conjunctions=[], taxMiscellaneousFees=[], issueReason=Reason for Issuance, rejectionReason=null, airlineRemark=null, attachedFiles=null, comments=null, history=null, agentRegistrationNumber=null, airlineRegistrationNumber=null) Action: REFUND_ISSUE
2018-08-09 13:37:10.488  INFO 26020 --- [    Test worker] o.i.b.r.service.RefundHistoryService     : Saving refund history: RefundHistory(id=null, action=REFUND_ISSUE, insertDateTime=2018-08-09T11:37:10.488Z, refundId=59, fileName=null)
2018-08-09 13:37:10.489  INFO 26020 --- [    Test worker] o.i.b.refund.service.RefundService       : Refund history saved: RefundHistory(id=60, action=REFUND_ISSUE, insertDateTime=2018-08-09T11:37:10.488Z, refundId=59, fileName=null)
2018-08-09 13:37:10.489  INFO 26020 --- [    Test worker] o.i.b.r.service.RefundHistoryService     : Getting refund history by id: 59
26551 [Test worker] INFO  org.springframework.test.context.transaction.TransactionContext  – Rolled back transaction for test context [DefaultTestContext@32e1cd1c testClass = RefundControllerTest, testInstance = org.iata.bsplink.refund.controller.RefundControllerTest@666a7d81, testMethod = testSaveIndirectRefund@RefundControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@1f5d4e4b testClass = RefundControllerTest, locations = '{}', classes = '{class org.iata.bsplink.refund.Application}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{app.host.local.protocol=local, app.host.sftp.protocol=sftp, org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@e7e8512, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@4ece6cea, [ImportsContextCustomizer@7e32a44a key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@7c81a5a0, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@2dc9c285, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@d444633b, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@794b4b8d], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -&gt; true]].
26556 [Test worker] INFO  org.springframework.test.context.transaction.TransactionContext  – Began transaction (1) for test context [DefaultTestContext@32e1cd1c testClass = RefundControllerTest, testInstance = org.iata.bsplink.refund.controller.RefundControllerTest@67688c96, testMethod = testOnUpdateRefundViaMassloadValidatorIsNotCalledIfThereArePreviousErrors@RefundControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@1f5d4e4b testClass = RefundControllerTest, locations = '{}', classes = '{class org.iata.bsplink.refund.Application}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{app.host.local.protocol=local, app.host.sftp.protocol=sftp, org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@e7e8512, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@4ece6cea, [ImportsContextCustomizer@7e32a44a key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@7c81a5a0, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@2dc9c285, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@d444633b, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@794b4b8d], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -&gt; true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@494e061e]; rollback [true]
26568 [Test worker] INFO  org.iata.bsplink.commons.rest.exception.handler.ApplicationExceptionHandler  – &lt;400 Bad Request,ValidationErrorResponse(validationErrors=[org.iata.bsplink.commons.rest.response.validation.ValidationError@c41c53b1]),{}&gt;
org.iata.bsplink.commons.rest.exception.ApplicationValidationException: Validation error
	at org.iata.bsplink.refund.controller.RefundController.updateRefundViaMassload(RefundController.java:458)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:209)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:136)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:102)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:870)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:776)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:991)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:925)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:978)
	at org.springframework.web.servlet.FrameworkServlet.doPut(FrameworkServlet.java:892)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:664)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:855)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:66)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:742)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:166)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:99)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.HttpPutFormContentFilter.doFilterInternal(HttpPutFormContentFilter.java:109)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:81)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:200)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:166)
	at org.iata.bsplink.refund.controller.RefundControllerTest.testOnUpdateRefundViaMassloadValidatorIsNotCalledIfThereArePreviousErrors(RefundControllerTest.java:1112)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.springframework.test.context.junit4.statements.RunBeforeTestExecutionCallbacks.evaluate(RunBeforeTestExecutionCallbacks.java:73)
	at org.springframework.test.context.junit4.statements.RunAfterTestExecutionCallbacks.evaluate(RunAfterTestExecutionCallbacks.java:83)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75)
	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86)
	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:251)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)
	at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecutor.runTestClass(JUnitTestClassExecutor.java:116)
	at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecutor.execute(JUnitTestClassExecutor.java:59)
	at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecutor.execute(JUnitTestClassExecutor.java:39)
	at org.gradle.api.internal.tasks.testing.junit.AbstractJUnitTestClassProcessor.processTestClass(AbstractJUnitTestClassProcessor.java:66)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.processTestClass(SuiteTestClassProcessor.java:51)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:35)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:32)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:93)
	at com.sun.proxy.$Proxy1.processTestClass(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.processTestClass(TestWorker.java:109)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:35)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.remote.internal.hub.MessageHubBackedObjectConnection$DispatchWrapper.dispatch(MessageHubBackedObjectConnection.java:146)
	at org.gradle.internal.remote.internal.hub.MessageHubBackedObjectConnection$DispatchWrapper.dispatch(MessageHubBackedObjectConnection.java:128)
	at org.gradle.internal.remote.internal.hub.MessageHub$Handler.run(MessageHub.java:404)
	at org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:63)
	at org.gradle.internal.concurrent.ManagedExecutorImpl$1.run(ManagedExecutorImpl.java:46)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at org.gradle.internal.concurrent.ThreadFactoryImpl$ManagedThreadRunnable.run(ThreadFactoryImpl.java:55)
	at java.lang.Thread.run(Thread.java:748)
26572 [Test worker] INFO  org.springframework.test.context.transaction.TransactionContext  – Rolled back transaction for test context [DefaultTestContext@32e1cd1c testClass = RefundControllerTest, testInstance = org.iata.bsplink.refund.controller.RefundControllerTest@67688c96, testMethod = testOnUpdateRefundViaMassloadValidatorIsNotCalledIfThereArePreviousErrors@RefundControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@1f5d4e4b testClass = RefundControllerTest, locations = '{}', classes = '{class org.iata.bsplink.refund.Application}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{app.host.local.protocol=local, app.host.sftp.protocol=sftp, org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@e7e8512, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@4ece6cea, [ImportsContextCustomizer@7e32a44a key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@7c81a5a0, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@2dc9c285, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@d444633b, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@794b4b8d], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -&gt; true]].
26574 [Test worker] INFO  org.springframework.test.context.transaction.TransactionContext  – Began transaction (1) for test context [DefaultTestContext@32e1cd1c testClass = RefundControllerTest, testInstance = org.iata.bsplink.refund.controller.RefundControllerTest@603416e5, testMethod = testSaveCommentsNoRefundFound@RefundControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@1f5d4e4b testClass = RefundControllerTest, locations = '{}', classes = '{class org.iata.bsplink.refund.Application}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{app.host.local.protocol=local, app.host.sftp.protocol=sftp, org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@e7e8512, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@4ece6cea, [ImportsContextCustomizer@7e32a44a key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@7c81a5a0, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@2dc9c285, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@d444633b, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@794b4b8d], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -&gt; true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@494e061e]; rollback [true]
2018-08-09 13:37:10.529  INFO 26020 --- [    Test worker] o.i.b.r.controller.RefundController      : received request for creating comment: CommentRequest(text=Text one)
26582 [Test worker] INFO  org.springframework.test.context.transaction.TransactionContext  – Rolled back transaction for test context [DefaultTestContext@32e1cd1c testClass = RefundControllerTest, testInstance = org.iata.bsplink.refund.controller.RefundControllerTest@603416e5, testMethod = testSaveCommentsNoRefundFound@RefundControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@1f5d4e4b testClass = RefundControllerTest, locations = '{}', classes = '{class org.iata.bsplink.refund.Application}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{app.host.local.protocol=local, app.host.sftp.protocol=sftp, org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@e7e8512, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@4ece6cea, [ImportsContextCustomizer@7e32a44a key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@7c81a5a0, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@2dc9c285, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@d444633b, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@794b4b8d], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -&gt; true]].
26591 [Test worker] INFO  org.springframework.test.context.transaction.TransactionContext  – Began transaction (1) for test context [DefaultTestContext@32e1cd1c testClass = RefundControllerTest, testInstance = org.iata.bsplink.refund.controller.RefundControllerTest@5f38e4c4, testMethod = testRespondsWithBadRequestIfStatusIsNotAllowedForDeletion@RefundControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@1f5d4e4b testClass = RefundControllerTest, locations = '{}', classes = '{class org.iata.bsplink.refund.Application}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{app.host.local.protocol=local, app.host.sftp.protocol=sftp, org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@e7e8512, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@4ece6cea, [ImportsContextCustomizer@7e32a44a key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@7c81a5a0, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@2dc9c285, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@d444633b, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@794b4b8d], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -&gt; true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@494e061e]; rollback [true]
26600 [Test worker] INFO  org.springframework.test.context.transaction.TransactionContext  – Rolled back transaction for test context [DefaultTestContext@32e1cd1c testClass = RefundControllerTest, testInstance = org.iata.bsplink.refund.controller.RefundControllerTest@5f38e4c4, testMethod = testRespondsWithBadRequestIfStatusIsNotAllowedForDeletion@RefundControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@1f5d4e4b testClass = RefundControllerTest, locations = '{}', classes = '{class org.iata.bsplink.refund.Application}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{app.host.local.protocol=local, app.host.sftp.protocol=sftp, org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@e7e8512, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@4ece6cea, [ImportsContextCustomizer@7e32a44a key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@7c81a5a0, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@2dc9c285, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@d444633b, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@794b4b8d], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -&gt; true]].
26602 [Test worker] INFO  org.springframework.test.context.transaction.TransactionContext  – Began transaction (1) for test context [DefaultTestContext@32e1cd1c testClass = RefundControllerTest, testInstance = org.iata.bsplink.refund.controller.RefundControllerTest@6c916c91, testMethod = testUpdateRefundAmountToPassengerLessThanOne@RefundControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@1f5d4e4b testClass = RefundControllerTest, locations = '{}', classes = '{class org.iata.bsplink.refund.Application}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{app.host.local.protocol=local, app.host.sftp.protocol=sftp, org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@e7e8512, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@4ece6cea, [ImportsContextCustomizer@7e32a44a key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@7c81a5a0, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@2dc9c285, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@d444633b, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@794b4b8d], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -&gt; true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@494e061e]; rollback [true]
2018-08-09 13:37:10.554  INFO 26020 --- [    Test worker] o.i.b.refund.service.RefundService       : Saving refund : Refund(id=null, ticketDocumentNumber=1234567890, status=PENDING, isoCountryCode=AA, agentCode=78200011, airlineCode=220, dateOfIssue=2018-06-19, billingPeriod=null, currency=RefundCurrency(code=ABC, decimals=0), passenger=PEPE, amounts=RefundAmounts(grossFare=0, lessGrossFareUsed=0, commissionAmount=0, commissionRate=0, spam=0, cancellationPenalty=0, miscellaneousFee=0, taxOnCancellationPenalty=0, taxOnMiscellaneousFee=0, commissionOnCpAndMfAmount=0, commissionOnCpAndMfRate=0, tax=0, refundToPassenger=0), partialRefund=false, netReporting=false, waiverCode=null, tourCode=null, dateOfIssueRelatedDocument=2000-01-02, dateOfAirlineAction=null, exchange=false, agentContact=null, airlineContact=null, settlementAuthorisationCode=null, customerFileReference=null, agentVatNumber=null, airlineVatNumber=null, originalIssue=null, airlineCodeRelatedDocument=220, relatedDocument=RelatedDocument(relatedTicketDocumentNumber=1234567890, relatedTicketCoupon1=true, relatedTicketCoupon2=false, relatedTicketCoupon3=false, relatedTicketCoupon4=false), statisticalCode=I, formOfPaymentAmounts=[], conjunctions=[], taxMiscellaneousFees=[], issueReason=Reason for Issuance, rejectionReason=null, airlineRemark=null, attachedFiles=null, comments=null, history=null, agentRegistrationNumber=null, airlineRegistrationNumber=null)
2018-08-09 13:37:10.555  INFO 26020 --- [    Test worker] o.i.b.refund.service.RefundService       : Saving refund history for: Refund(id=63, ticketDocumentNumber=1234567890, status=PENDING, isoCountryCode=AA, agentCode=78200011, airlineCode=220, dateOfIssue=2018-06-19, billingPeriod=null, currency=RefundCurrency(code=ABC, decimals=0), passenger=PEPE, amounts=RefundAmounts(grossFare=0, lessGrossFareUsed=0, commissionAmount=0, commissionRate=0, spam=0, cancellationPenalty=0, miscellaneousFee=0, taxOnCancellationPenalty=0, taxOnMiscellaneousFee=0, commissionOnCpAndMfAmount=0, commissionOnCpAndMfRate=0, tax=0, refundToPassenger=0), partialRefund=false, netReporting=false, waiverCode=null, tourCode=null, dateOfIssueRelatedDocument=2000-01-02, dateOfAirlineAction=null, exchange=false, agentContact=null, airlineContact=null, settlementAuthorisationCode=null, customerFileReference=null, agentVatNumber=null, airlineVatNumber=null, originalIssue=null, airlineCodeRelatedDocument=220, relatedDocument=RelatedDocument(relatedTicketDocumentNumber=1234567890, relatedTicketCoupon1=true, relatedTicketCoupon2=false, relatedTicketCoupon3=false, relatedTicketCoupon4=false), statisticalCode=I, formOfPaymentAmounts=[], conjunctions=[], taxMiscellaneousFees=[], issueReason=Reason for Issuance, rejectionReason=null, airlineRemark=null, attachedFiles=null, comments=null, history=null, agentRegistrationNumber=null, airlineRegistrationNumber=null) Action: REFUND_ISSUE
2018-08-09 13:37:10.555  INFO 26020 --- [    Test worker] o.i.b.r.service.RefundHistoryService     : Saving refund history: RefundHistory(id=null, action=REFUND_ISSUE, insertDateTime=2018-08-09T11:37:10.555Z, refundId=63, fileName=null)
2018-08-09 13:37:10.558  INFO 26020 --- [    Test worker] o.i.b.refund.service.RefundService       : Refund history saved: RefundHistory(id=64, action=REFUND_ISSUE, insertDateTime=2018-08-09T11:37:10.555Z, refundId=63, fileName=null)
2018-08-09 13:37:10.558  INFO 26020 --- [    Test worker] o.i.b.r.service.RefundHistoryService     : Getting refund history by id: 63
2018-08-09 13:37:10.565  INFO 26020 --- [    Test worker] o.i.b.r.controller.RefundController      : received request to change refund's status: Refund(id=63, ticketDocumentNumber=1234567890, status=PENDING, isoCountryCode=AA, agentCode=78200011, airlineCode=220, dateOfIssue=2018-06-19, billingPeriod=null, currency=RefundCurrency(code=ABC, decimals=0), passenger=PEPE, amounts=RefundAmounts(grossFare=0, lessGrossFareUsed=0, commissionAmount=0, commissionRate=0, spam=0, cancellationPenalty=0, miscellaneousFee=0, taxOnCancellationPenalty=0, taxOnMiscellaneousFee=0, commissionOnCpAndMfAmount=0, commissionOnCpAndMfRate=0, tax=0, refundToPassenger=0), partialRefund=false, netReporting=false, waiverCode=null, tourCode=null, dateOfIssueRelatedDocument=2000-01-02, dateOfAirlineAction=null, exchange=false, agentContact=null, airlineContact=null, settlementAuthorisationCode=null, customerFileReference=null, agentVatNumber=null, airlineVatNumber=null, originalIssue=null, airlineCodeRelatedDocument=220, relatedDocument=RelatedDocument(relatedTicketDocumentNumber=1234567890, relatedTicketCoupon1=true, relatedTicketCoupon2=false, relatedTicketCoupon3=false, relatedTicketCoupon4=false), statisticalCode=I, formOfPaymentAmounts=[], conjunctions=[], taxMiscellaneousFees=[], issueReason=Reason for Issuance, rejectionReason=null, airlineRemark=null, attachedFiles=null, comments=null, history=[RefundHistory(id=64, action=REFUND_ISSUE, insertDateTime=2018-08-09T11:37:10.555Z, refundId=63, fileName=null)], agentRegistrationNumber=null, airlineRegistrationNumber=null)
2018-08-09 13:37:10.565  INFO 26020 --- [    Test worker] o.i.b.r.v.RefundStatusValidator          : Validating status from PENDING to AUTHORIZED
2018-08-09 13:37:10.565  INFO 26020 --- [    Test worker] o.i.b.r.v.RefundStatusValidator          : Refund to passenger must be greater than cero
26615 [Test worker] INFO  org.iata.bsplink.commons.rest.exception.handler.ApplicationExceptionHandler  – &lt;400 Bad Request,ValidationErrorResponse(validationErrors=[org.iata.bsplink.commons.rest.response.validation.ValidationError@81f8c9eb]),{}&gt;
org.iata.bsplink.commons.rest.exception.ApplicationValidationException: Validation error
	at org.iata.bsplink.refund.validation.RefundStatusValidator.validateAirlineStatusChange(RefundStatusValidator.java:83)
	at org.iata.bsplink.refund.validation.RefundStatusValidator.validate(RefundStatusValidator.java:66)
	at org.iata.bsplink.refund.controller.RefundController.changeRefundStatus(RefundController.java:404)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:209)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:136)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:102)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:870)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:776)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:991)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:925)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:978)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:881)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:661)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:855)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:66)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:742)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:166)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:99)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.HttpPutFormContentFilter.doFilterInternal(HttpPutFormContentFilter.java:109)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:81)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:200)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:166)
	at org.iata.bsplink.refund.controller.RefundControllerTest.testUpdateRefundAmountToPassengerLessThanOne(RefundControllerTest.java:782)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.springframework.test.context.junit4.statements.RunBeforeTestExecutionCallbacks.evaluate(RunBeforeTestExecutionCallbacks.java:73)
	at org.springframework.test.context.junit4.statements.RunAfterTestExecutionCallbacks.evaluate(RunAfterTestExecutionCallbacks.java:83)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75)
	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86)
	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:251)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)
	at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecutor.runTestClass(JUnitTestClassExecutor.java:116)
	at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecutor.execute(JUnitTestClassExecutor.java:59)
	at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecutor.execute(JUnitTestClassExecutor.java:39)
	at org.gradle.api.internal.tasks.testing.junit.AbstractJUnitTestClassProcessor.processTestClass(AbstractJUnitTestClassProcessor.java:66)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.processTestClass(SuiteTestClassProcessor.java:51)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:35)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:32)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:93)
	at com.sun.proxy.$Proxy1.processTestClass(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.processTestClass(TestWorker.java:109)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:35)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.remote.internal.hub.MessageHubBackedObjectConnection$DispatchWrapper.dispatch(MessageHubBackedObjectConnection.java:146)
	at org.gradle.internal.remote.internal.hub.MessageHubBackedObjectConnection$DispatchWrapper.dispatch(MessageHubBackedObjectConnection.java:128)
	at org.gradle.internal.remote.internal.hub.MessageHub$Handler.run(MessageHub.java:404)
	at org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:63)
	at org.gradle.internal.concurrent.ManagedExecutorImpl$1.run(ManagedExecutorImpl.java:46)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at org.gradle.internal.concurrent.ThreadFactoryImpl$ManagedThreadRunnable.run(ThreadFactoryImpl.java:55)
	at java.lang.Thread.run(Thread.java:748)
26626 [Test worker] INFO  org.springframework.test.context.transaction.TransactionContext  – Rolled back transaction for test context [DefaultTestContext@32e1cd1c testClass = RefundControllerTest, testInstance = org.iata.bsplink.refund.controller.RefundControllerTest@6c916c91, testMethod = testUpdateRefundAmountToPassengerLessThanOne@RefundControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@1f5d4e4b testClass = RefundControllerTest, locations = '{}', classes = '{class org.iata.bsplink.refund.Application}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{app.host.local.protocol=local, app.host.sftp.protocol=sftp, org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@e7e8512, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@4ece6cea, [ImportsContextCustomizer@7e32a44a key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@7c81a5a0, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@2dc9c285, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@d444633b, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@794b4b8d], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -&gt; true]].
26628 [Test worker] INFO  org.springframework.test.context.transaction.TransactionContext  – Began transaction (1) for test context [DefaultTestContext@32e1cd1c testClass = RefundControllerTest, testInstance = org.iata.bsplink.refund.controller.RefundControllerTest@30ef9fa2, testMethod = testUpdateRefundModifyComments@RefundControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@1f5d4e4b testClass = RefundControllerTest, locations = '{}', classes = '{class org.iata.bsplink.refund.Application}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{app.host.local.protocol=local, app.host.sftp.protocol=sftp, org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@e7e8512, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@4ece6cea, [ImportsContextCustomizer@7e32a44a key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@7c81a5a0, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@2dc9c285, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@d444633b, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@794b4b8d], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -&gt; true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@494e061e]; rollback [true]
2018-08-09 13:37:10.598  INFO 26020 --- [    Test worker] o.i.b.r.controller.RefundController      : received request to update indirect refund: Refund(id=65, ticketDocumentNumber=null, status=PENDING, isoCountryCode=AA, agentCode=78200011, airlineCode=220, dateOfIssue=2018-06-19, billingPeriod=null, currency=RefundCurrency(code=ABC, decimals=0), passenger=PEPE, amounts=RefundAmounts(grossFare=0, lessGrossFareUsed=0, commissionAmount=0, commissionRate=0, spam=0, cancellationPenalty=0, miscellaneousFee=0, taxOnCancellationPenalty=0, taxOnMiscellaneousFee=0, commissionOnCpAndMfAmount=0, commissionOnCpAndMfRate=0, tax=0, refundToPassenger=0), partialRefund=false, netReporting=false, waiverCode=null, tourCode=null, dateOfIssueRelatedDocument=2000-01-02, dateOfAirlineAction=null, exchange=false, agentContact=null, airlineContact=null, settlementAuthorisationCode=null, customerFileReference=null, agentVatNumber=null, airlineVatNumber=null, originalIssue=null, airlineCodeRelatedDocument=220, relatedDocument=RelatedDocument(relatedTicketDocumentNumber=1234567890, relatedTicketCoupon1=true, relatedTicketCoupon2=false, relatedTicketCoupon3=false, relatedTicketCoupon4=false), statisticalCode=I, formOfPaymentAmounts=[], conjunctions=[], taxMiscellaneousFees=[], issueReason=Reason for Issuance, rejectionReason=null, airlineRemark=null, attachedFiles=null, comments=[Comment(id=null, text=Comment, insertDateTime=2018-08-09T11:37:10.585Z, refundId=null)], history=null, agentRegistrationNumber=null, airlineRegistrationNumber=null)
2018-08-09 13:37:10.599  INFO 26020 --- [    Test worker] o.i.b.r.v.RefundUpdateValidator          : Validating refund to update: Refund(id=65, ticketDocumentNumber=null, status=PENDING, isoCountryCode=AA, agentCode=78200011, airlineCode=220, dateOfIssue=2018-06-19, billingPeriod=null, currency=RefundCurrency(code=ABC, decimals=0), passenger=PEPE, amounts=RefundAmounts(grossFare=0, lessGrossFareUsed=0, commissionAmount=0, commissionRate=0, spam=0, cancellationPenalty=0, miscellaneousFee=0, taxOnCancellationPenalty=0, taxOnMiscellaneousFee=0, commissionOnCpAndMfAmount=0, commissionOnCpAndMfRate=0, tax=0, refundToPassenger=0), partialRefund=false, netReporting=false, waiverCode=null, tourCode=null, dateOfIssueRelatedDocument=2000-01-02, dateOfAirlineAction=null, exchange=false, agentContact=null, airlineContact=null, settlementAuthorisationCode=null, customerFileReference=null, agentVatNumber=null, airlineVatNumber=null, originalIssue=null, airlineCodeRelatedDocument=220, relatedDocument=RelatedDocument(relatedTicketDocumentNumber=1234567890, relatedTicketCoupon1=true, relatedTicketCoupon2=false, relatedTicketCoupon3=false, relatedTicketCoupon4=false), statisticalCode=I, formOfPaymentAmounts=[], conjunctions=[], taxMiscellaneousFees=[], issueReason=Reason for Issuance, rejectionReason=null, airlineRemark=null, attachedFiles=null, comments=[Comment(id=null, text=Comment, insertDateTime=2018-08-09T11:37:10.585Z, refundId=null)], history=null, agentRegistrationNumber=null, airlineRegistrationNumber=null)
2018-08-09 13:37:10.600  INFO 26020 --- [    Test worker] o.i.b.r.v.RefundUpdateValidator          : comments cannot be modified
26650 [Test worker] INFO  org.iata.bsplink.commons.rest.exception.handler.ApplicationExceptionHandler  – &lt;400 Bad Request,ValidationErrorResponse(validationErrors=[org.iata.bsplink.commons.rest.response.validation.ValidationError@ac844cea]),{}&gt;
org.iata.bsplink.commons.rest.exception.ApplicationValidationException: Validation error
	at org.iata.bsplink.refund.validation.RefundUpdateValidator.validate(RefundUpdateValidator.java:62)
	at org.iata.bsplink.refund.validation.RefundUpdateValidator.validate(RefundUpdateValidator.java:81)
	at org.iata.bsplink.refund.controller.RefundController.updateRefund(RefundController.java:310)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:209)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:136)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:102)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:870)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:776)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:991)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:925)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:978)
	at org.springframework.web.servlet.FrameworkServlet.doPut(FrameworkServlet.java:892)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:664)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:855)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:66)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:742)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:166)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:99)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.HttpPutFormContentFilter.doFilterInternal(HttpPutFormContentFilter.java:109)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:81)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:200)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:166)
	at org.iata.bsplink.refund.controller.RefundControllerTest.testUpdateRefundModifyComments(RefundControllerTest.java:365)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.springframework.test.context.junit4.statements.RunBeforeTestExecutionCallbacks.evaluate(RunBeforeTestExecutionCallbacks.java:73)
	at org.springframework.test.context.junit4.statements.RunAfterTestExecutionCallbacks.evaluate(RunAfterTestExecutionCallbacks.java:83)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75)
	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86)
	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:251)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)
	at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecutor.runTestClass(JUnitTestClassExecutor.java:116)
	at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecutor.execute(JUnitTestClassExecutor.java:59)
	at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecutor.execute(JUnitTestClassExecutor.java:39)
	at org.gradle.api.internal.tasks.testing.junit.AbstractJUnitTestClassProcessor.processTestClass(AbstractJUnitTestClassProcessor.java:66)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.processTestClass(SuiteTestClassProcessor.java:51)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:35)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:32)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:93)
	at com.sun.proxy.$Proxy1.processTestClass(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.processTestClass(TestWorker.java:109)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:35)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.remote.internal.hub.MessageHubBackedObjectConnection$DispatchWrapper.dispatch(MessageHubBackedObjectConnection.java:146)
	at org.gradle.internal.remote.internal.hub.MessageHubBackedObjectConnection$DispatchWrapper.dispatch(MessageHubBackedObjectConnection.java:128)
	at org.gradle.internal.remote.internal.hub.MessageHub$Handler.run(MessageHub.java:404)
	at org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:63)
	at org.gradle.internal.concurrent.ManagedExecutorImpl$1.run(ManagedExecutorImpl.java:46)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at org.gradle.internal.concurrent.ThreadFactoryImpl$ManagedThreadRunnable.run(ThreadFactoryImpl.java:55)
	at java.lang.Thread.run(Thread.java:748)
26659 [Test worker] INFO  org.springframework.test.context.transaction.TransactionContext  – Rolled back transaction for test context [DefaultTestContext@32e1cd1c testClass = RefundControllerTest, testInstance = org.iata.bsplink.refund.controller.RefundControllerTest@30ef9fa2, testMethod = testUpdateRefundModifyComments@RefundControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@1f5d4e4b testClass = RefundControllerTest, locations = '{}', classes = '{class org.iata.bsplink.refund.Application}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{app.host.local.protocol=local, app.host.sftp.protocol=sftp, org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@e7e8512, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@4ece6cea, [ImportsContextCustomizer@7e32a44a key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@7c81a5a0, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@2dc9c285, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@d444633b, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@794b4b8d], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -&gt; true]].
26662 [Test worker] INFO  org.springframework.test.context.transaction.TransactionContext  – Began transaction (1) for test context [DefaultTestContext@32e1cd1c testClass = RefundControllerTest, testInstance = org.iata.bsplink.refund.controller.RefundControllerTest@50203678, testMethod = testUpdateRefundChangeAirlineCode@RefundControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@1f5d4e4b testClass = RefundControllerTest, locations = '{}', classes = '{class org.iata.bsplink.refund.Application}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{app.host.local.protocol=local, app.host.sftp.protocol=sftp, org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@e7e8512, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@4ece6cea, [ImportsContextCustomizer@7e32a44a key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@7c81a5a0, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@2dc9c285, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@d444633b, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@794b4b8d], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -&gt; true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@494e061e]; rollback [true]
2018-08-09 13:37:10.626  INFO 26020 --- [    Test worker] o.i.b.r.controller.RefundController      : received request to update indirect refund: Refund(id=66, ticketDocumentNumber=null, status=PENDING, isoCountryCode=AA, agentCode=78200011, airlineCode=999, dateOfIssue=2018-06-19, billingPeriod=null, currency=RefundCurrency(code=ABC, decimals=0), passenger=PEPE, amounts=RefundAmounts(grossFare=0, lessGrossFareUsed=0, commissionAmount=0, commissionRate=0, spam=0, cancellationPenalty=0, miscellaneousFee=0, taxOnCancellationPenalty=0, taxOnMiscellaneousFee=0, commissionOnCpAndMfAmount=0, commissionOnCpAndMfRate=0, tax=0, refundToPassenger=0), partialRefund=false, netReporting=false, waiverCode=null, tourCode=null, dateOfIssueRelatedDocument=2000-01-02, dateOfAirlineAction=null, exchange=false, agentContact=null, airlineContact=null, settlementAuthorisationCode=null, customerFileReference=null, agentVatNumber=null, airlineVatNumber=null, originalIssue=null, airlineCodeRelatedDocument=220, relatedDocument=RelatedDocument(relatedTicketDocumentNumber=1234567890, relatedTicketCoupon1=true, relatedTicketCoupon2=false, relatedTicketCoupon3=false, relatedTicketCoupon4=false), statisticalCode=I, formOfPaymentAmounts=[], conjunctions=[], taxMiscellaneousFees=[], issueReason=Reason for Issuance, rejectionReason=null, airlineRemark=null, attachedFiles=null, comments=null, history=null, agentRegistrationNumber=null, airlineRegistrationNumber=null)
2018-08-09 13:37:10.626  INFO 26020 --- [    Test worker] o.i.b.r.v.RefundUpdateValidator          : Validating refund to update: Refund(id=66, ticketDocumentNumber=null, status=PENDING, isoCountryCode=AA, agentCode=78200011, airlineCode=999, dateOfIssue=2018-06-19, billingPeriod=null, currency=RefundCurrency(code=ABC, decimals=0), passenger=PEPE, amounts=RefundAmounts(grossFare=0, lessGrossFareUsed=0, commissionAmount=0, commissionRate=0, spam=0, cancellationPenalty=0, miscellaneousFee=0, taxOnCancellationPenalty=0, taxOnMiscellaneousFee=0, commissionOnCpAndMfAmount=0, commissionOnCpAndMfRate=0, tax=0, refundToPassenger=0), partialRefund=false, netReporting=false, waiverCode=null, tourCode=null, dateOfIssueRelatedDocument=2000-01-02, dateOfAirlineAction=null, exchange=false, agentContact=null, airlineContact=null, settlementAuthorisationCode=null, customerFileReference=null, agentVatNumber=null, airlineVatNumber=null, originalIssue=null, airlineCodeRelatedDocument=220, relatedDocument=RelatedDocument(relatedTicketDocumentNumber=1234567890, relatedTicketCoupon1=true, relatedTicketCoupon2=false, relatedTicketCoupon3=false, relatedTicketCoupon4=false), statisticalCode=I, formOfPaymentAmounts=[], conjunctions=[], taxMiscellaneousFees=[], issueReason=Reason for Issuance, rejectionReason=null, airlineRemark=null, attachedFiles=null, comments=null, history=null, agentRegistrationNumber=null, airlineRegistrationNumber=null)
2018-08-09 13:37:10.626  INFO 26020 --- [    Test worker] o.i.b.r.v.RefundUpdateValidator          : airlineCode can only be modified in status: DRAFT
26677 [Test worker] INFO  org.iata.bsplink.commons.rest.exception.handler.ApplicationExceptionHandler  – &lt;400 Bad Request,ValidationErrorResponse(validationErrors=[org.iata.bsplink.commons.rest.response.validation.ValidationError@739cab79]),{}&gt;
org.iata.bsplink.commons.rest.exception.ApplicationValidationException: Validation error
	at org.iata.bsplink.refund.validation.RefundUpdateValidator.validate(RefundUpdateValidator.java:62)
	at org.iata.bsplink.refund.validation.RefundUpdateValidator.validate(RefundUpdateValidator.java:81)
	at org.iata.bsplink.refund.controller.RefundController.updateRefund(RefundController.java:310)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:209)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:136)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:102)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:870)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:776)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:991)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:925)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:978)
	at org.springframework.web.servlet.FrameworkServlet.doPut(FrameworkServlet.java:892)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:664)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:855)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:66)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:742)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:166)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:99)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.HttpPutFormContentFilter.doFilterInternal(HttpPutFormContentFilter.java:109)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:81)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:200)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:166)
	at org.iata.bsplink.refund.controller.RefundControllerTest.testUpdateRefundChangeAirlineCode(RefundControllerTest.java:236)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.springframework.test.context.junit4.statements.RunBeforeTestExecutionCallbacks.evaluate(RunBeforeTestExecutionCallbacks.java:73)
	at org.springframework.test.context.junit4.statements.RunAfterTestExecutionCallbacks.evaluate(RunAfterTestExecutionCallbacks.java:83)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75)
	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86)
	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:251)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)
	at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecutor.runTestClass(JUnitTestClassExecutor.java:116)
	at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecutor.execute(JUnitTestClassExecutor.java:59)
	at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecutor.execute(JUnitTestClassExecutor.java:39)
	at org.gradle.api.internal.tasks.testing.junit.AbstractJUnitTestClassProcessor.processTestClass(AbstractJUnitTestClassProcessor.java:66)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.processTestClass(SuiteTestClassProcessor.java:51)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:35)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:32)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:93)
	at com.sun.proxy.$Proxy1.processTestClass(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.processTestClass(TestWorker.java:109)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:35)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.remote.internal.hub.MessageHubBackedObjectConnection$DispatchWrapper.dispatch(MessageHubBackedObjectConnection.java:146)
	at org.gradle.internal.remote.internal.hub.MessageHubBackedObjectConnection$DispatchWrapper.dispatch(MessageHubBackedObjectConnection.java:128)
	at org.gradle.internal.remote.internal.hub.MessageHub$Handler.run(MessageHub.java:404)
	at org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:63)
	at org.gradle.internal.concurrent.ManagedExecutorImpl$1.run(ManagedExecutorImpl.java:46)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at org.gradle.internal.concurrent.ThreadFactoryImpl$ManagedThreadRunnable.run(ThreadFactoryImpl.java:55)
	at java.lang.Thread.run(Thread.java:748)
26687 [Test worker] INFO  org.springframework.test.context.transaction.TransactionContext  – Rolled back transaction for test context [DefaultTestContext@32e1cd1c testClass = RefundControllerTest, testInstance = org.iata.bsplink.refund.controller.RefundControllerTest@50203678, testMethod = testUpdateRefundChangeAirlineCode@RefundControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@1f5d4e4b testClass = RefundControllerTest, locations = '{}', classes = '{class org.iata.bsplink.refund.Application}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{app.host.local.protocol=local, app.host.sftp.protocol=sftp, org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@e7e8512, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@4ece6cea, [ImportsContextCustomizer@7e32a44a key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@7c81a5a0, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@2dc9c285, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@d444633b, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@794b4b8d], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -&gt; true]].
26690 [Test worker] INFO  org.springframework.test.context.transaction.TransactionContext  – Began transaction (1) for test context [DefaultTestContext@32e1cd1c testClass = RefundControllerTest, testInstance = org.iata.bsplink.refund.controller.RefundControllerTest@26656004, testMethod = testGetRefundByIsoCountryCodeAirlineCodeTicketDocumentNumber@RefundControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@1f5d4e4b testClass = RefundControllerTest, locations = '{}', classes = '{class org.iata.bsplink.refund.Application}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{app.host.local.protocol=local, app.host.sftp.protocol=sftp, org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@e7e8512, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@4ece6cea, [ImportsContextCustomizer@7e32a44a key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@7c81a5a0, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@2dc9c285, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@d444633b, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@794b4b8d], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -&gt; true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@494e061e]; rollback [true]
26701 [Test worker] INFO  org.springframework.test.context.transaction.TransactionContext  – Rolled back transaction for test context [DefaultTestContext@32e1cd1c testClass = RefundControllerTest, testInstance = org.iata.bsplink.refund.controller.RefundControllerTest@26656004, testMethod = testGetRefundByIsoCountryCodeAirlineCodeTicketDocumentNumber@RefundControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@1f5d4e4b testClass = RefundControllerTest, locations = '{}', classes = '{class org.iata.bsplink.refund.Application}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{app.host.local.protocol=local, app.host.sftp.protocol=sftp, org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@e7e8512, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@4ece6cea, [ImportsContextCustomizer@7e32a44a key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@7c81a5a0, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@2dc9c285, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@d444633b, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@794b4b8d], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -&gt; true]].
26703 [Test worker] INFO  org.springframework.test.context.transaction.TransactionContext  – Began transaction (1) for test context [DefaultTestContext@32e1cd1c testClass = RefundControllerTest, testInstance = org.iata.bsplink.refund.controller.RefundControllerTest@9d59132, testMethod = testSaveIndirectRefundWithoutPermission@RefundControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@1f5d4e4b testClass = RefundControllerTest, locations = '{}', classes = '{class org.iata.bsplink.refund.Application}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{app.host.local.protocol=local, app.host.sftp.protocol=sftp, org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@e7e8512, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@4ece6cea, [ImportsContextCustomizer@7e32a44a key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@7c81a5a0, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@2dc9c285, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@d444633b, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@794b4b8d], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -&gt; true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@494e061e]; rollback [true]
26715 [Test worker] INFO  org.iata.bsplink.commons.rest.exception.handler.ApplicationExceptionHandler  – &lt;400 Bad Request,ValidationErrorResponse(validationErrors=[org.iata.bsplink.commons.rest.response.validation.ValidationError@a354c357]),{}&gt;
org.iata.bsplink.commons.rest.exception.ApplicationValidationException: Validation error
	at org.iata.bsplink.refund.controller.RefundController.saveRefund(RefundController.java:288)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:209)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:136)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:102)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:870)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:776)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:991)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:925)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:978)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:881)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:661)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:855)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:66)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:742)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:166)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:99)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.HttpPutFormContentFilter.doFilterInternal(HttpPutFormContentFilter.java:109)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:81)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:200)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:166)
	at org.iata.bsplink.refund.controller.RefundControllerTest.testSaveIndirectRefundWithoutPermission(RefundControllerTest.java:446)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.springframework.test.context.junit4.statements.RunBeforeTestExecutionCallbacks.evaluate(RunBeforeTestExecutionCallbacks.java:73)
	at org.springframework.test.context.junit4.statements.RunAfterTestExecutionCallbacks.evaluate(RunAfterTestExecutionCallbacks.java:83)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75)
	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86)
	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:251)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)
	at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecutor.runTestClass(JUnitTestClassExecutor.java:116)
	at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecutor.execute(JUnitTestClassExecutor.java:59)
	at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecutor.execute(JUnitTestClassExecutor.java:39)
	at org.gradle.api.internal.tasks.testing.junit.AbstractJUnitTestClassProcessor.processTestClass(AbstractJUnitTestClassProcessor.java:66)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.processTestClass(SuiteTestClassProcessor.java:51)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:35)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:32)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:93)
	at com.sun.proxy.$Proxy1.processTestClass(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.processTestClass(TestWorker.java:109)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:35)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.remote.internal.hub.MessageHubBackedObjectConnection$DispatchWrapper.dispatch(MessageHubBackedObjectConnection.java:146)
	at org.gradle.internal.remote.internal.hub.MessageHubBackedObjectConnection$DispatchWrapper.dispatch(MessageHubBackedObjectConnection.java:128)
	at org.gradle.internal.remote.internal.hub.MessageHub$Handler.run(MessageHub.java:404)
	at org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:63)
	at org.gradle.internal.concurrent.ManagedExecutorImpl$1.run(ManagedExecutorImpl.java:46)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at org.gradle.internal.concurrent.ThreadFactoryImpl$ManagedThreadRunnable.run(ThreadFactoryImpl.java:55)
	at java.lang.Thread.run(Thread.java:748)
26720 [Test worker] INFO  org.springframework.test.context.transaction.TransactionContext  – Rolled back transaction for test context [DefaultTestContext@32e1cd1c testClass = RefundControllerTest, testInstance = org.iata.bsplink.refund.controller.RefundControllerTest@9d59132, testMethod = testSaveIndirectRefundWithoutPermission@RefundControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@1f5d4e4b testClass = RefundControllerTest, locations = '{}', classes = '{class org.iata.bsplink.refund.Application}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{app.host.local.protocol=local, app.host.sftp.protocol=sftp, org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@e7e8512, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@4ece6cea, [ImportsContextCustomizer@7e32a44a key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@7c81a5a0, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@2dc9c285, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@d444633b, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@794b4b8d], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -&gt; true]].
26723 [Test worker] INFO  org.springframework.test.context.transaction.TransactionContext  – Began transaction (1) for test context [DefaultTestContext@32e1cd1c testClass = RefundControllerTest, testInstance = org.iata.bsplink.refund.controller.RefundControllerTest@cefa584, testMethod = testUpdateRefundStatusNull@RefundControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@1f5d4e4b testClass = RefundControllerTest, locations = '{}', classes = '{class org.iata.bsplink.refund.Application}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{app.host.local.protocol=local, app.host.sftp.protocol=sftp, org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@e7e8512, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@4ece6cea, [ImportsContextCustomizer@7e32a44a key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@7c81a5a0, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@2dc9c285, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@d444633b, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@794b4b8d], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -&gt; true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@494e061e]; rollback [true]
2018-08-09 13:37:10.699  INFO 26020 --- [    Test worker] o.i.b.r.controller.RefundController      : received request to update indirect refund: Refund(id=68, ticketDocumentNumber=null, status=null, isoCountryCode=AA, agentCode=78200011, airlineCode=220, dateOfIssue=2018-06-19, billingPeriod=null, currency=RefundCurrency(code=ABC, decimals=0), passenger=PEPE, amounts=RefundAmounts(grossFare=0, lessGrossFareUsed=0, commissionAmount=0, commissionRate=0, spam=0, cancellationPenalty=0, miscellaneousFee=0, taxOnCancellationPenalty=0, taxOnMiscellaneousFee=0, commissionOnCpAndMfAmount=0, commissionOnCpAndMfRate=0, tax=0, refundToPassenger=0), partialRefund=false, netReporting=false, waiverCode=null, tourCode=null, dateOfIssueRelatedDocument=2000-01-02, dateOfAirlineAction=null, exchange=false, agentContact=null, airlineContact=null, settlementAuthorisationCode=null, customerFileReference=null, agentVatNumber=null, airlineVatNumber=null, originalIssue=null, airlineCodeRelatedDocument=220, relatedDocument=RelatedDocument(relatedTicketDocumentNumber=1234567890, relatedTicketCoupon1=true, relatedTicketCoupon2=false, relatedTicketCoupon3=false, relatedTicketCoupon4=false), statisticalCode=I, formOfPaymentAmounts=[], conjunctions=[], taxMiscellaneousFees=[], issueReason=Reason for Issuance, rejectionReason=null, airlineRemark=null, attachedFiles=null, comments=null, history=null, agentRegistrationNumber=null, airlineRegistrationNumber=null)
26748 [Test worker] INFO  org.iata.bsplink.commons.rest.exception.handler.ApplicationExceptionHandler  – &lt;400 Bad Request,ValidationErrorResponse(validationErrors=[org.iata.bsplink.commons.rest.response.validation.ValidationError@28214f08]),{}&gt;
org.iata.bsplink.commons.rest.exception.ApplicationValidationException: Validation error
	at org.iata.bsplink.refund.controller.RefundController.updateRefund(RefundController.java:314)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:209)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:136)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:102)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:870)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:776)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:991)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:925)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:978)
	at org.springframework.web.servlet.FrameworkServlet.doPut(FrameworkServlet.java:892)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:664)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:855)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:66)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:742)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:166)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:99)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.HttpPutFormContentFilter.doFilterInternal(HttpPutFormContentFilter.java:109)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:81)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:200)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:166)
	at org.iata.bsplink.refund.controller.RefundControllerTest.testUpdateRefundStatusNull(RefundControllerTest.java:273)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.springframework.test.context.junit4.statements.RunBeforeTestExecutionCallbacks.evaluate(RunBeforeTestExecutionCallbacks.java:73)
	at org.springframework.test.context.junit4.statements.RunAfterTestExecutionCallbacks.evaluate(RunAfterTestExecutionCallbacks.java:83)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75)
	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86)
	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:251)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)
	at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecutor.runTestClass(JUnitTestClassExecutor.java:116)
	at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecutor.execute(JUnitTestClassExecutor.java:59)
	at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecutor.execute(JUnitTestClassExecutor.java:39)
	at org.gradle.api.internal.tasks.testing.junit.AbstractJUnitTestClassProcessor.processTestClass(AbstractJUnitTestClassProcessor.java:66)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.processTestClass(SuiteTestClassProcessor.java:51)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:35)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:32)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:93)
	at com.sun.proxy.$Proxy1.processTestClass(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.processTestClass(TestWorker.java:109)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:35)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.remote.internal.hub.MessageHubBackedObjectConnection$DispatchWrapper.dispatch(MessageHubBackedObjectConnection.java:146)
	at org.gradle.internal.remote.internal.hub.MessageHubBackedObjectConnection$DispatchWrapper.dispatch(MessageHubBackedObjectConnection.java:128)
	at org.gradle.internal.remote.internal.hub.MessageHub$Handler.run(MessageHub.java:404)
	at org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:63)
	at org.gradle.internal.concurrent.ManagedExecutorImpl$1.run(ManagedExecutorImpl.java:46)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at org.gradle.internal.concurrent.ThreadFactoryImpl$ManagedThreadRunnable.run(ThreadFactoryImpl.java:55)
	at java.lang.Thread.run(Thread.java:748)
26752 [Test worker] INFO  org.springframework.test.context.transaction.TransactionContext  – Rolled back transaction for test context [DefaultTestContext@32e1cd1c testClass = RefundControllerTest, testInstance = org.iata.bsplink.refund.controller.RefundControllerTest@cefa584, testMethod = testUpdateRefundStatusNull@RefundControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@1f5d4e4b testClass = RefundControllerTest, locations = '{}', classes = '{class org.iata.bsplink.refund.Application}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{app.host.local.protocol=local, app.host.sftp.protocol=sftp, org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@e7e8512, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@4ece6cea, [ImportsContextCustomizer@7e32a44a key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@7c81a5a0, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@2dc9c285, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@d444633b, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@794b4b8d], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -&gt; true]].
26761 [Test worker] INFO  org.springframework.test.context.transaction.TransactionContext  – Began transaction (1) for test context [DefaultTestContext@32e1cd1c testClass = RefundControllerTest, testInstance = org.iata.bsplink.refund.controller.RefundControllerTest@578f47bc, testMethod = testUpdateRefundRejectionReasonFilled@RefundControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@1f5d4e4b testClass = RefundControllerTest, locations = '{}', classes = '{class org.iata.bsplink.refund.Application}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{app.host.local.protocol=local, app.host.sftp.protocol=sftp, org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@e7e8512, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@4ece6cea, [ImportsContextCustomizer@7e32a44a key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@7c81a5a0, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@2dc9c285, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@d444633b, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@794b4b8d], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -&gt; true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@494e061e]; rollback [true]
2018-08-09 13:37:10.713  INFO 26020 --- [    Test worker] o.i.b.refund.service.RefundService       : Saving refund : Refund(id=null, ticketDocumentNumber=1234567890, status=PENDING, isoCountryCode=AA, agentCode=78200011, airlineCode=220, dateOfIssue=2018-06-19, billingPeriod=null, currency=RefundCurrency(code=ABC, decimals=0), passenger=PEPE, amounts=RefundAmounts(grossFare=0, lessGrossFareUsed=0, commissionAmount=0, commissionRate=0, spam=0, cancellationPenalty=0, miscellaneousFee=0, taxOnCancellationPenalty=0, taxOnMiscellaneousFee=0, commissionOnCpAndMfAmount=0, commissionOnCpAndMfRate=0, tax=0, refundToPassenger=0), partialRefund=false, netReporting=false, waiverCode=null, tourCode=null, dateOfIssueRelatedDocument=2000-01-02, dateOfAirlineAction=null, exchange=false, agentContact=null, airlineContact=null, settlementAuthorisationCode=null, customerFileReference=null, agentVatNumber=null, airlineVatNumber=null, originalIssue=null, airlineCodeRelatedDocument=220, relatedDocument=RelatedDocument(relatedTicketDocumentNumber=1234567890, relatedTicketCoupon1=true, relatedTicketCoupon2=false, relatedTicketCoupon3=false, relatedTicketCoupon4=false), statisticalCode=I, formOfPaymentAmounts=[], conjunctions=[], taxMiscellaneousFees=[], issueReason=Reason for Issuance, rejectionReason=null, airlineRemark=null, attachedFiles=null, comments=null, history=null, agentRegistrationNumber=null, airlineRegistrationNumber=null)
2018-08-09 13:37:10.714  INFO 26020 --- [    Test worker] o.i.b.refund.service.RefundService       : Saving refund history for: Refund(id=69, ticketDocumentNumber=1234567890, status=PENDING, isoCountryCode=AA, agentCode=78200011, airlineCode=220, dateOfIssue=2018-06-19, billingPeriod=null, currency=RefundCurrency(code=ABC, decimals=0), passenger=PEPE, amounts=RefundAmounts(grossFare=0, lessGrossFareUsed=0, commissionAmount=0, commissionRate=0, spam=0, cancellationPenalty=0, miscellaneousFee=0, taxOnCancellationPenalty=0, taxOnMiscellaneousFee=0, commissionOnCpAndMfAmount=0, commissionOnCpAndMfRate=0, tax=0, refundToPassenger=0), partialRefund=false, netReporting=false, waiverCode=null, tourCode=null, dateOfIssueRelatedDocument=2000-01-02, dateOfAirlineAction=null, exchange=false, agentContact=null, airlineContact=null, settlementAuthorisationCode=null, customerFileReference=null, agentVatNumber=null, airlineVatNumber=null, originalIssue=null, airlineCodeRelatedDocument=220, relatedDocument=RelatedDocument(relatedTicketDocumentNumber=1234567890, relatedTicketCoupon1=true, relatedTicketCoupon2=false, relatedTicketCoupon3=false, relatedTicketCoupon4=false), statisticalCode=I, formOfPaymentAmounts=[], conjunctions=[], taxMiscellaneousFees=[], issueReason=Reason for Issuance, rejectionReason=null, airlineRemark=null, attachedFiles=null, comments=null, history=null, agentRegistrationNumber=null, airlineRegistrationNumber=null) Action: REFUND_ISSUE
2018-08-09 13:37:10.714  INFO 26020 --- [    Test worker] o.i.b.r.service.RefundHistoryService     : Saving refund history: RefundHistory(id=null, action=REFUND_ISSUE, insertDateTime=2018-08-09T11:37:10.714Z, refundId=69, fileName=null)
2018-08-09 13:37:10.715  INFO 26020 --- [    Test worker] o.i.b.refund.service.RefundService       : Refund history saved: RefundHistory(id=70, action=REFUND_ISSUE, insertDateTime=2018-08-09T11:37:10.714Z, refundId=69, fileName=null)
2018-08-09 13:37:10.715  INFO 26020 --- [    Test worker] o.i.b.r.service.RefundHistoryService     : Getting refund history by id: 69
2018-08-09 13:37:10.729  INFO 26020 --- [    Test worker] o.i.b.r.controller.RefundController      : received request to change refund's status: Refund(id=69, ticketDocumentNumber=1234567890, status=PENDING, isoCountryCode=AA, agentCode=78200011, airlineCode=220, dateOfIssue=2018-06-19, billingPeriod=null, currency=RefundCurrency(code=ABC, decimals=0), passenger=PEPE, amounts=RefundAmounts(grossFare=0, lessGrossFareUsed=0, commissionAmount=0, commissionRate=0, spam=0, cancellationPenalty=0, miscellaneousFee=0, taxOnCancellationPenalty=0, taxOnMiscellaneousFee=0, commissionOnCpAndMfAmount=0, commissionOnCpAndMfRate=0, tax=0, refundToPassenger=0), partialRefund=false, netReporting=false, waiverCode=null, tourCode=null, dateOfIssueRelatedDocument=2000-01-02, dateOfAirlineAction=null, exchange=false, agentContact=null, airlineContact=null, settlementAuthorisationCode=null, customerFileReference=null, agentVatNumber=null, airlineVatNumber=null, originalIssue=null, airlineCodeRelatedDocument=220, relatedDocument=RelatedDocument(relatedTicketDocumentNumber=1234567890, relatedTicketCoupon1=true, relatedTicketCoupon2=false, relatedTicketCoupon3=false, relatedTicketCoupon4=false), statisticalCode=I, formOfPaymentAmounts=[], conjunctions=[], taxMiscellaneousFees=[], issueReason=Reason for Issuance, rejectionReason=null, airlineRemark=null, attachedFiles=null, comments=null, history=[RefundHistory(id=70, action=REFUND_ISSUE, insertDateTime=2018-08-09T11:37:10.714Z, refundId=69, fileName=null)], agentRegistrationNumber=null, airlineRegistrationNumber=null)
2018-08-09 13:37:10.730  INFO 26020 --- [    Test worker] o.i.b.r.v.RefundStatusValidator          : Validating status from PENDING to REJECTED
2018-08-09 13:37:10.730  INFO 26020 --- [    Test worker] o.i.b.r.v.RefundStatusValidator          : Setting rejection reason: Rejection reason
2018-08-09 13:37:10.740  INFO 26020 --- [    Test worker] o.i.b.refund.service.RefundService       : Updating refund : Refund(id=69, ticketDocumentNumber=1234567890, status=REJECTED, isoCountryCode=AA, agentCode=78200011, airlineCode=220, dateOfIssue=2018-06-19, billingPeriod=null, currency=RefundCurrency(code=ABC, decimals=0), passenger=PEPE, amounts=RefundAmounts(grossFare=0, lessGrossFareUsed=0, commissionAmount=0, commissionRate=0, spam=0, cancellationPenalty=0, miscellaneousFee=0, taxOnCancellationPenalty=0, taxOnMiscellaneousFee=0, commissionOnCpAndMfAmount=0, commissionOnCpAndMfRate=0, tax=0, refundToPassenger=0), partialRefund=false, netReporting=false, waiverCode=null, tourCode=null, dateOfIssueRelatedDocument=2000-01-02, dateOfAirlineAction=2018-08-09, exchange=false, agentContact=null, airlineContact=null, settlementAuthorisationCode=null, customerFileReference=null, agentVatNumber=null, airlineVatNumber=null, originalIssue=null, airlineCodeRelatedDocument=220, relatedDocument=RelatedDocument(relatedTicketDocumentNumber=1234567890, relatedTicketCoupon1=true, relatedTicketCoupon2=false, relatedTicketCoupon3=false, relatedTicketCoupon4=false), statisticalCode=I, formOfPaymentAmounts=[], conjunctions=[], taxMiscellaneousFees=[], issueReason=Reason for Issuance, rejectionReason=Rejection reason, airlineRemark=airlineRemark, attachedFiles=null, comments=null, history=[RefundHistory(id=70, action=REFUND_ISSUE, insertDateTime=2018-08-09T11:37:10.714Z, refundId=69, fileName=null)], agentRegistrationNumber=null, airlineRegistrationNumber=null)
2018-08-09 13:37:10.741  INFO 26020 --- [    Test worker] o.i.b.refund.service.RefundService       : Prepare refund history for: Refund(id=69, ticketDocumentNumber=1234567890, status=REJECTED, isoCountryCode=AA, agentCode=78200011, airlineCode=220, dateOfIssue=2018-06-19, billingPeriod=null, currency=RefundCurrency(code=ABC, decimals=0), passenger=PEPE, amounts=RefundAmounts(grossFare=0, lessGrossFareUsed=0, commissionAmount=0, commissionRate=0, spam=0, cancellationPenalty=0, miscellaneousFee=0, taxOnCancellationPenalty=0, taxOnMiscellaneousFee=0, commissionOnCpAndMfAmount=0, commissionOnCpAndMfRate=0, tax=0, refundToPassenger=0), partialRefund=false, netReporting=false, waiverCode=null, tourCode=null, dateOfIssueRelatedDocument=2000-01-02, dateOfAirlineAction=2018-08-09, exchange=false, agentContact=null, airlineContact=null, settlementAuthorisationCode=null, customerFileReference=null, agentVatNumber=null, airlineVatNumber=null, originalIssue=null, airlineCodeRelatedDocument=220, relatedDocument=RelatedDocument(relatedTicketDocumentNumber=1234567890, relatedTicketCoupon1=true, relatedTicketCoupon2=false, relatedTicketCoupon3=false, relatedTicketCoupon4=false), statisticalCode=I, formOfPaymentAmounts=[], conjunctions=[], taxMiscellaneousFees=[], issueReason=Reason for Issuance, rejectionReason=Rejection reason, airlineRemark=airlineRemark, attachedFiles=null, comments=null, history=[RefundHistory(id=70, action=REFUND_ISSUE, insertDateTime=2018-08-09T11:37:10.714Z, refundId=69, fileName=null)], agentRegistrationNumber=null, airlineRegistrationNumber=null) Action: MODIFY
2018-08-09 13:37:10.741  INFO 26020 --- [    Test worker] o.i.b.refund.service.RefundService       : Saving refund history for: Refund(id=69, ticketDocumentNumber=1234567890, status=REJECTED, isoCountryCode=AA, agentCode=78200011, airlineCode=220, dateOfIssue=2018-06-19, billingPeriod=null, currency=RefundCurrency(code=ABC, decimals=0), passenger=PEPE, amounts=RefundAmounts(grossFare=0, lessGrossFareUsed=0, commissionAmount=0, commissionRate=0, spam=0, cancellationPenalty=0, miscellaneousFee=0, taxOnCancellationPenalty=0, taxOnMiscellaneousFee=0, commissionOnCpAndMfAmount=0, commissionOnCpAndMfRate=0, tax=0, refundToPassenger=0), partialRefund=false, netReporting=false, waiverCode=null, tourCode=null, dateOfIssueRelatedDocument=2000-01-02, dateOfAirlineAction=2018-08-09, exchange=false, agentContact=null, airlineContact=null, settlementAuthorisationCode=null, customerFileReference=null, agentVatNumber=null, airlineVatNumber=null, originalIssue=null, airlineCodeRelatedDocument=220, relatedDocument=RelatedDocument(relatedTicketDocumentNumber=1234567890, relatedTicketCoupon1=true, relatedTicketCoupon2=false, relatedTicketCoupon3=false, relatedTicketCoupon4=false), statisticalCode=I, formOfPaymentAmounts=[], conjunctions=[], taxMiscellaneousFees=[], issueReason=Reason for Issuance, rejectionReason=Rejection reason, airlineRemark=airlineRemark, attachedFiles=null, comments=null, history=[RefundHistory(id=70, action=REFUND_ISSUE, insertDateTime=2018-08-09T11:37:10.714Z, refundId=69, fileName=null), RefundHistory(id=null, action=MODIFY, insertDateTime=2018-08-09T11:37:10.741Z, refundId=69, fileName=null)], agentRegistrationNumber=null, airlineRegistrationNumber=null) Action: MODIFY
2018-08-09 13:37:10.741  INFO 26020 --- [    Test worker] o.i.b.r.service.RefundHistoryService     : Saving refund history: RefundHistory(id=null, action=MODIFY, insertDateTime=2018-08-09T11:37:10.741Z, refundId=69, fileName=null)
2018-08-09 13:37:10.742  INFO 26020 --- [    Test worker] o.i.b.refund.service.RefundService       : Refund history saved: RefundHistory(id=71, action=MODIFY, insertDateTime=2018-08-09T11:37:10.741Z, refundId=69, fileName=null)
2018-08-09 13:37:10.742  INFO 26020 --- [    Test worker] o.i.b.r.service.RefundHistoryService     : Getting refund history by id: 69
2018-08-09 13:37:10.749  INFO 26020 --- [    Test worker] o.i.b.refund.service.RefundService       : Getting last updated Refund to retrieve
2018-08-09 13:37:10.750  INFO 26020 --- [    Test worker] o.i.b.r.controller.RefundController      : responding with response: Refund(id=69, ticketDocumentNumber=1234567890, status=REJECTED, isoCountryCode=AA, agentCode=78200011, airlineCode=220, dateOfIssue=2018-06-19, billingPeriod=null, currency=RefundCurrency(code=ABC, decimals=0), passenger=PEPE, amounts=RefundAmounts(grossFare=0, lessGrossFareUsed=0, commissionAmount=0, commissionRate=0, spam=0, cancellationPenalty=0, miscellaneousFee=0, taxOnCancellationPenalty=0, taxOnMiscellaneousFee=0, commissionOnCpAndMfAmount=0, commissionOnCpAndMfRate=0, tax=0, refundToPassenger=0), partialRefund=false, netReporting=false, waiverCode=null, tourCode=null, dateOfIssueRelatedDocument=2000-01-02, dateOfAirlineAction=2018-08-09, exchange=false, agentContact=null, airlineContact=null, settlementAuthorisationCode=null, customerFileReference=null, agentVatNumber=null, airlineVatNumber=null, originalIssue=null, airlineCodeRelatedDocument=220, relatedDocument=RelatedDocument(relatedTicketDocumentNumber=1234567890, relatedTicketCoupon1=true, relatedTicketCoupon2=false, relatedTicketCoupon3=false, relatedTicketCoupon4=false), statisticalCode=I, formOfPaymentAmounts=[], conjunctions=[], taxMiscellaneousFees=[], issueReason=Reason for Issuance, rejectionReason=Rejection reason, airlineRemark=airlineRemark, attachedFiles=null, comments=null, history=[RefundHistory(id=70, action=REFUND_ISSUE, insertDateTime=2018-08-09T11:37:10.714Z, refundId=69, fileName=null), RefundHistory(id=72, action=MODIFY, insertDateTime=2018-08-09T11:37:10.741Z, refundId=69, fileName=null)], agentRegistrationNumber=null, airlineRegistrationNumber=null)
26810 [Test worker] INFO  org.springframework.test.context.transaction.TransactionContext  – Rolled back transaction for test context [DefaultTestContext@32e1cd1c testClass = RefundControllerTest, testInstance = org.iata.bsplink.refund.controller.RefundControllerTest@578f47bc, testMethod = testUpdateRefundRejectionReasonFilled@RefundControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@1f5d4e4b testClass = RefundControllerTest, locations = '{}', classes = '{class org.iata.bsplink.refund.Application}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{app.host.local.protocol=local, app.host.sftp.protocol=sftp, org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@e7e8512, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@4ece6cea, [ImportsContextCustomizer@7e32a44a key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@7c81a5a0, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@2dc9c285, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@d444633b, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@794b4b8d], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -&gt; true]].
26813 [Test worker] INFO  org.springframework.test.context.transaction.TransactionContext  – Began transaction (1) for test context [DefaultTestContext@32e1cd1c testClass = RefundControllerTest, testInstance = org.iata.bsplink.refund.controller.RefundControllerTest@6cbb507f, testMethod = testGetRefundHistoryBadRequest@RefundControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@1f5d4e4b testClass = RefundControllerTest, locations = '{}', classes = '{class org.iata.bsplink.refund.Application}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{app.host.local.protocol=local, app.host.sftp.protocol=sftp, org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@e7e8512, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@4ece6cea, [ImportsContextCustomizer@7e32a44a key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@7c81a5a0, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@2dc9c285, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@d444633b, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@794b4b8d], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -&gt; true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@494e061e]; rollback [true]
2018-08-09 13:37:10.767  INFO 26020 --- [    Test worker] o.i.b.r.controller.RefundController      : received to get refund's history: Optional.empty
26822 [Test worker] INFO  org.springframework.test.context.transaction.TransactionContext  – Rolled back transaction for test context [DefaultTestContext@32e1cd1c testClass = RefundControllerTest, testInstance = org.iata.bsplink.refund.controller.RefundControllerTest@6cbb507f, testMethod = testGetRefundHistoryBadRequest@RefundControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@1f5d4e4b testClass = RefundControllerTest, locations = '{}', classes = '{class org.iata.bsplink.refund.Application}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{app.host.local.protocol=local, app.host.sftp.protocol=sftp, org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@e7e8512, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@4ece6cea, [ImportsContextCustomizer@7e32a44a key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@7c81a5a0, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@2dc9c285, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@d444633b, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@794b4b8d], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -&gt; true]].
26824 [Test worker] INFO  org.springframework.test.context.transaction.TransactionContext  – Began transaction (1) for test context [DefaultTestContext@32e1cd1c testClass = RefundControllerTest, testInstance = org.iata.bsplink.refund.controller.RefundControllerTest@5be4c212, testMethod = testUpdateRefund@RefundControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@1f5d4e4b testClass = RefundControllerTest, locations = '{}', classes = '{class org.iata.bsplink.refund.Application}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{app.host.local.protocol=local, app.host.sftp.protocol=sftp, org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@e7e8512, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@4ece6cea, [ImportsContextCustomizer@7e32a44a key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@7c81a5a0, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@2dc9c285, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@d444633b, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@794b4b8d], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -&gt; true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@494e061e]; rollback [true]
2018-08-09 13:37:10.788  INFO 26020 --- [    Test worker] o.i.b.r.controller.RefundController      : received request to update indirect refund: Refund(id=73, ticketDocumentNumber=null, status=PENDING, isoCountryCode=AA, agentCode=78200011, airlineCode=220, dateOfIssue=2018-06-19, billingPeriod=null, currency=RefundCurrency(code=ABC, decimals=0), passenger=PEPE, amounts=RefundAmounts(grossFare=0, lessGrossFareUsed=0, commissionAmount=0, commissionRate=0, spam=0, cancellationPenalty=0, miscellaneousFee=0, taxOnCancellationPenalty=0, taxOnMiscellaneousFee=0, commissionOnCpAndMfAmount=0, commissionOnCpAndMfRate=0, tax=0, refundToPassenger=0), partialRefund=false, netReporting=false, waiverCode=null, tourCode=null, dateOfIssueRelatedDocument=2000-01-02, dateOfAirlineAction=null, exchange=false, agentContact=null, airlineContact=null, settlementAuthorisationCode=null, customerFileReference=null, agentVatNumber=null, airlineVatNumber=null, originalIssue=null, airlineCodeRelatedDocument=220, relatedDocument=RelatedDocument(relatedTicketDocumentNumber=1234567890, relatedTicketCoupon1=true, relatedTicketCoupon2=false, relatedTicketCoupon3=false, relatedTicketCoupon4=false), statisticalCode=I, formOfPaymentAmounts=[], conjunctions=[], taxMiscellaneousFees=[], issueReason=Reason for Issuance, rejectionReason=null, airlineRemark=null, attachedFiles=null, comments=null, history=null, agentRegistrationNumber=null, airlineRegistrationNumber=null)
2018-08-09 13:37:10.789  INFO 26020 --- [    Test worker] o.i.b.r.v.RefundUpdateValidator          : Validating refund to update: Refund(id=73, ticketDocumentNumber=null, status=PENDING, isoCountryCode=AA, agentCode=78200011, airlineCode=220, dateOfIssue=2018-06-19, billingPeriod=null, currency=RefundCurrency(code=ABC, decimals=0), passenger=PEPE, amounts=RefundAmounts(grossFare=0, lessGrossFareUsed=0, commissionAmount=0, commissionRate=0, spam=0, cancellationPenalty=0, miscellaneousFee=0, taxOnCancellationPenalty=0, taxOnMiscellaneousFee=0, commissionOnCpAndMfAmount=0, commissionOnCpAndMfRate=0, tax=0, refundToPassenger=0), partialRefund=false, netReporting=false, waiverCode=null, tourCode=null, dateOfIssueRelatedDocument=2000-01-02, dateOfAirlineAction=null, exchange=false, agentContact=null, airlineContact=null, settlementAuthorisationCode=null, customerFileReference=null, agentVatNumber=null, airlineVatNumber=null, originalIssue=null, airlineCodeRelatedDocument=220, relatedDocument=RelatedDocument(relatedTicketDocumentNumber=1234567890, relatedTicketCoupon1=true, relatedTicketCoupon2=false, relatedTicketCoupon3=false, relatedTicketCoupon4=false), statisticalCode=I, formOfPaymentAmounts=[], conjunctions=[], taxMiscellaneousFees=[], issueReason=Reason for Issuance, rejectionReason=null, airlineRemark=null, attachedFiles=null, comments=null, history=null, agentRegistrationNumber=null, airlineRegistrationNumber=null)
2018-08-09 13:37:10.790  INFO 26020 --- [    Test worker] o.i.b.r.v.RefundUpdateValidator          : Copy new field values. Ignored not allow to modify: [id, history, attachedFiles, comments, agentCode, status, ticketDocumentNumber, dateOfAirlineAction, rejectionReason]
2018-08-09 13:37:10.791  INFO 26020 --- [    Test worker] o.i.b.refund.service.RefundService       : Updating refund : Refund(id=73, ticketDocumentNumber=1234567890, status=PENDING, isoCountryCode=AA, agentCode=78200011, airlineCode=220, dateOfIssue=2018-06-19, billingPeriod=null, currency=RefundCurrency(code=ABC, decimals=0), passenger=PEPE, amounts=RefundAmounts(grossFare=0, lessGrossFareUsed=0, commissionAmount=0, commissionRate=0, spam=0, cancellationPenalty=0, miscellaneousFee=0, taxOnCancellationPenalty=0, taxOnMiscellaneousFee=0, commissionOnCpAndMfAmount=0, commissionOnCpAndMfRate=0, tax=0, refundToPassenger=0), partialRefund=false, netReporting=false, waiverCode=null, tourCode=null, dateOfIssueRelatedDocument=2000-01-02, dateOfAirlineAction=null, exchange=false, agentContact=null, airlineContact=null, settlementAuthorisationCode=null, customerFileReference=null, agentVatNumber=null, airlineVatNumber=null, originalIssue=null, airlineCodeRelatedDocument=220, relatedDocument=RelatedDocument(relatedTicketDocumentNumber=1234567890, relatedTicketCoupon1=true, relatedTicketCoupon2=false, relatedTicketCoupon3=false, relatedTicketCoupon4=false), statisticalCode=I, formOfPaymentAmounts=[], conjunctions=[], taxMiscellaneousFees=[], issueReason=Reason for Issuance, rejectionReason=null, airlineRemark=null, attachedFiles=null, comments=null, history=null, agentRegistrationNumber=null, airlineRegistrationNumber=null)
2018-08-09 13:37:10.791  INFO 26020 --- [    Test worker] o.i.b.refund.service.RefundService       : Prepare refund history for: Refund(id=73, ticketDocumentNumber=1234567890, status=PENDING, isoCountryCode=AA, agentCode=78200011, airlineCode=220, dateOfIssue=2018-06-19, billingPeriod=null, currency=RefundCurrency(code=ABC, decimals=0), passenger=PEPE, amounts=RefundAmounts(grossFare=0, lessGrossFareUsed=0, commissionAmount=0, commissionRate=0, spam=0, cancellationPenalty=0, miscellaneousFee=0, taxOnCancellationPenalty=0, taxOnMiscellaneousFee=0, commissionOnCpAndMfAmount=0, commissionOnCpAndMfRate=0, tax=0, refundToPassenger=0), partialRefund=false, netReporting=false, waiverCode=null, tourCode=null, dateOfIssueRelatedDocument=2000-01-02, dateOfAirlineAction=null, exchange=false, agentContact=null, airlineContact=null, settlementAuthorisationCode=null, customerFileReference=null, agentVatNumber=null, airlineVatNumber=null, originalIssue=null, airlineCodeRelatedDocument=220, relatedDocument=RelatedDocument(relatedTicketDocumentNumber=1234567890, relatedTicketCoupon1=true, relatedTicketCoupon2=false, relatedTicketCoupon3=false, relatedTicketCoupon4=false), statisticalCode=I, formOfPaymentAmounts=[], conjunctions=[], taxMiscellaneousFees=[], issueReason=Reason for Issuance, rejectionReason=null, airlineRemark=null, attachedFiles=null, comments=null, history=null, agentRegistrationNumber=null, airlineRegistrationNumber=null) Action: MODIFY
2018-08-09 13:37:10.791  INFO 26020 --- [    Test worker] o.i.b.refund.service.RefundService       : Saving refund history for: Refund(id=73, ticketDocumentNumber=1234567890, status=PENDING, isoCountryCode=AA, agentCode=78200011, airlineCode=220, dateOfIssue=2018-06-19, billingPeriod=null, currency=RefundCurrency(code=ABC, decimals=0), passenger=PEPE, amounts=RefundAmounts(grossFare=0, lessGrossFareUsed=0, commissionAmount=0, commissionRate=0, spam=0, cancellationPenalty=0, miscellaneousFee=0, taxOnCancellationPenalty=0, taxOnMiscellaneousFee=0, commissionOnCpAndMfAmount=0, commissionOnCpAndMfRate=0, tax=0, refundToPassenger=0), partialRefund=false, netReporting=false, waiverCode=null, tourCode=null, dateOfIssueRelatedDocument=2000-01-02, dateOfAirlineAction=null, exchange=false, agentContact=null, airlineContact=null, settlementAuthorisationCode=null, customerFileReference=null, agentVatNumber=null, airlineVatNumber=null, originalIssue=null, airlineCodeRelatedDocument=220, relatedDocument=RelatedDocument(relatedTicketDocumentNumber=1234567890, relatedTicketCoupon1=true, relatedTicketCoupon2=false, relatedTicketCoupon3=false, relatedTicketCoupon4=false), statisticalCode=I, formOfPaymentAmounts=[], conjunctions=[], taxMiscellaneousFees=[], issueReason=Reason for Issuance, rejectionReason=null, airlineRemark=null, attachedFiles=null, comments=null, history=[RefundHistory(id=null, action=MODIFY, insertDateTime=2018-08-09T11:37:10.791Z, refundId=73, fileName=null)], agentRegistrationNumber=null, airlineRegistrationNumber=null) Action: MODIFY
2018-08-09 13:37:10.791  INFO 26020 --- [    Test worker] o.i.b.r.service.RefundHistoryService     : Saving refund history: RefundHistory(id=null, action=MODIFY, insertDateTime=2018-08-09T11:37:10.791Z, refundId=73, fileName=null)
2018-08-09 13:37:10.792  INFO 26020 --- [    Test worker] o.i.b.refund.service.RefundService       : Refund history saved: RefundHistory(id=74, action=MODIFY, insertDateTime=2018-08-09T11:37:10.791Z, refundId=73, fileName=null)
2018-08-09 13:37:10.792  INFO 26020 --- [    Test worker] o.i.b.r.service.RefundHistoryService     : Getting refund history by id: 73
2018-08-09 13:37:10.797  INFO 26020 --- [    Test worker] o.i.b.refund.service.RefundService       : Getting last updated Refund to retrieve
2018-08-09 13:37:10.803  INFO 26020 --- [    Test worker] o.i.b.r.controller.RefundController      : responding with response: Refund(id=73, ticketDocumentNumber=1234567890, status=PENDING, isoCountryCode=AA, agentCode=78200011, airlineCode=220, dateOfIssue=2018-06-19, billingPeriod=null, currency=RefundCurrency(code=ABC, decimals=0), passenger=PEPE, amounts=RefundAmounts(grossFare=0, lessGrossFareUsed=0, commissionAmount=0, commissionRate=0, spam=0, cancellationPenalty=0, miscellaneousFee=0, taxOnCancellationPenalty=0, taxOnMiscellaneousFee=0, commissionOnCpAndMfAmount=0, commissionOnCpAndMfRate=0, tax=0, refundToPassenger=0), partialRefund=false, netReporting=false, waiverCode=null, tourCode=null, dateOfIssueRelatedDocument=2000-01-02, dateOfAirlineAction=null, exchange=false, agentContact=null, airlineContact=null, settlementAuthorisationCode=null, customerFileReference=null, agentVatNumber=null, airlineVatNumber=null, originalIssue=null, airlineCodeRelatedDocument=220, relatedDocument=RelatedDocument(relatedTicketDocumentNumber=1234567890, relatedTicketCoupon1=true, relatedTicketCoupon2=false, relatedTicketCoupon3=false, relatedTicketCoupon4=false), statisticalCode=I, formOfPaymentAmounts=[], conjunctions=[], taxMiscellaneousFees=[], issueReason=Reason for Issuance, rejectionReason=null, airlineRemark=null, attachedFiles=null, comments=null, history=[RefundHistory(id=75, action=MODIFY, insertDateTime=2018-08-09T11:37:10.791Z, refundId=73, fileName=null)], agentRegistrationNumber=null, airlineRegistrationNumber=null)
26856 [Test worker] INFO  org.springframework.test.context.transaction.TransactionContext  – Rolled back transaction for test context [DefaultTestContext@32e1cd1c testClass = RefundControllerTest, testInstance = org.iata.bsplink.refund.controller.RefundControllerTest@5be4c212, testMethod = testUpdateRefund@RefundControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@1f5d4e4b testClass = RefundControllerTest, locations = '{}', classes = '{class org.iata.bsplink.refund.Application}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{app.host.local.protocol=local, app.host.sftp.protocol=sftp, org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@e7e8512, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@4ece6cea, [ImportsContextCustomizer@7e32a44a key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@7c81a5a0, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@2dc9c285, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@d444633b, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@794b4b8d], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -&gt; true]].
26859 [Test worker] INFO  org.springframework.test.context.transaction.TransactionContext  – Began transaction (1) for test context [DefaultTestContext@32e1cd1c testClass = RefundControllerTest, testInstance = org.iata.bsplink.refund.controller.RefundControllerTest@3bad5cd6, testMethod = testUpdateRefundWithFileNameNotFound@RefundControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@1f5d4e4b testClass = RefundControllerTest, locations = '{}', classes = '{class org.iata.bsplink.refund.Application}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{app.host.local.protocol=local, app.host.sftp.protocol=sftp, org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@e7e8512, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@4ece6cea, [ImportsContextCustomizer@7e32a44a key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@7c81a5a0, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@2dc9c285, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@d444633b, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@794b4b8d], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -&gt; true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@494e061e]; rollback [true]
26880 [Test worker] INFO  org.springframework.test.context.transaction.TransactionContext  – Rolled back transaction for test context [DefaultTestContext@32e1cd1c testClass = RefundControllerTest, testInstance = org.iata.bsplink.refund.controller.RefundControllerTest@3bad5cd6, testMethod = testUpdateRefundWithFileNameNotFound@RefundControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@1f5d4e4b testClass = RefundControllerTest, locations = '{}', classes = '{class org.iata.bsplink.refund.Application}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{app.host.local.protocol=local, app.host.sftp.protocol=sftp, org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@e7e8512, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@4ece6cea, [ImportsContextCustomizer@7e32a44a key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@7c81a5a0, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@2dc9c285, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@d444633b, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@794b4b8d], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -&gt; true]].
26883 [Test worker] INFO  org.springframework.test.context.transaction.TransactionContext  – Began transaction (1) for test context [DefaultTestContext@32e1cd1c testClass = RefundControllerTest, testInstance = org.iata.bsplink.refund.controller.RefundControllerTest@4f2a97a2, testMethod = testUpdateRefundUnderInvestigationStatus@RefundControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@1f5d4e4b testClass = RefundControllerTest, locations = '{}', classes = '{class org.iata.bsplink.refund.Application}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{app.host.local.protocol=local, app.host.sftp.protocol=sftp, org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@e7e8512, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@4ece6cea, [ImportsContextCustomizer@7e32a44a key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@7c81a5a0, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@2dc9c285, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@d444633b, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@794b4b8d], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -&gt; true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@494e061e]; rollback [true]
2018-08-09 13:37:10.871  INFO 26020 --- [    Test worker] o.i.b.r.controller.RefundController      : received request to update indirect refund: Refund(id=77, ticketDocumentNumber=null, status=UNDER_INVESTIGATION, isoCountryCode=AA, agentCode=78200011, airlineCode=220, dateOfIssue=2018-06-19, billingPeriod=null, currency=RefundCurrency(code=ABC, decimals=0), passenger=newPassenger, amounts=RefundAmounts(grossFare=0, lessGrossFareUsed=0, commissionAmount=0, commissionRate=0, spam=0, cancellationPenalty=0, miscellaneousFee=0, taxOnCancellationPenalty=0, taxOnMiscellaneousFee=0, commissionOnCpAndMfAmount=0, commissionOnCpAndMfRate=0, tax=0, refundToPassenger=0), partialRefund=false, netReporting=false, waiverCode=null, tourCode=null, dateOfIssueRelatedDocument=2000-01-02, dateOfAirlineAction=null, exchange=false, agentContact=null, airlineContact=null, settlementAuthorisationCode=null, customerFileReference=null, agentVatNumber=null, airlineVatNumber=null, originalIssue=null, airlineCodeRelatedDocument=220, relatedDocument=RelatedDocument(relatedTicketDocumentNumber=1234567890, relatedTicketCoupon1=true, relatedTicketCoupon2=false, relatedTicketCoupon3=false, relatedTicketCoupon4=false), statisticalCode=I, formOfPaymentAmounts=[], conjunctions=[], taxMiscellaneousFees=[], issueReason=Reason for Issuance, rejectionReason=null, airlineRemark=null, attachedFiles=null, comments=null, history=null, agentRegistrationNumber=null, airlineRegistrationNumber=null)
2018-08-09 13:37:10.871  INFO 26020 --- [    Test worker] o.i.b.r.v.RefundUpdateValidator          : Validating refund to update: Refund(id=77, ticketDocumentNumber=null, status=UNDER_INVESTIGATION, isoCountryCode=AA, agentCode=78200011, airlineCode=220, dateOfIssue=2018-06-19, billingPeriod=null, currency=RefundCurrency(code=ABC, decimals=0), passenger=newPassenger, amounts=RefundAmounts(grossFare=0, lessGrossFareUsed=0, commissionAmount=0, commissionRate=0, spam=0, cancellationPenalty=0, miscellaneousFee=0, taxOnCancellationPenalty=0, taxOnMiscellaneousFee=0, commissionOnCpAndMfAmount=0, commissionOnCpAndMfRate=0, tax=0, refundToPassenger=0), partialRefund=false, netReporting=false, waiverCode=null, tourCode=null, dateOfIssueRelatedDocument=2000-01-02, dateOfAirlineAction=null, exchange=false, agentContact=null, airlineContact=null, settlementAuthorisationCode=null, customerFileReference=null, agentVatNumber=null, airlineVatNumber=null, originalIssue=null, airlineCodeRelatedDocument=220, relatedDocument=RelatedDocument(relatedTicketDocumentNumber=1234567890, relatedTicketCoupon1=true, relatedTicketCoupon2=false, relatedTicketCoupon3=false, relatedTicketCoupon4=false), statisticalCode=I, formOfPaymentAmounts=[], conjunctions=[], taxMiscellaneousFees=[], issueReason=Reason for Issuance, rejectionReason=null, airlineRemark=null, attachedFiles=null, comments=null, history=null, agentRegistrationNumber=null, airlineRegistrationNumber=null)
2018-08-09 13:37:10.872  INFO 26020 --- [    Test worker] o.i.b.r.v.RefundUpdateValidator          : passenger can only be modified in DRAFT, PENDING and PENDING_SUPERVISION status
26923 [Test worker] INFO  org.iata.bsplink.commons.rest.exception.handler.ApplicationExceptionHandler  – &lt;400 Bad Request,ValidationErrorResponse(validationErrors=[org.iata.bsplink.commons.rest.response.validation.ValidationError@deb312f2]),{}&gt;
org.iata.bsplink.commons.rest.exception.ApplicationValidationException: Validation error
	at org.iata.bsplink.refund.validation.RefundUpdateValidator.validate(RefundUpdateValidator.java:62)
	at org.iata.bsplink.refund.validation.RefundUpdateValidator.validate(RefundUpdateValidator.java:81)
	at org.iata.bsplink.refund.controller.RefundController.updateRefund(RefundController.java:310)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:209)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:136)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:102)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:870)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:776)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:991)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:925)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:978)
	at org.springframework.web.servlet.FrameworkServlet.doPut(FrameworkServlet.java:892)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:664)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:855)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:66)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:742)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:166)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:99)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.HttpPutFormContentFilter.doFilterInternal(HttpPutFormContentFilter.java:109)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:81)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:200)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:166)
	at org.iata.bsplink.refund.controller.RefundControllerTest.testUpdateRefundUnderInvestigationStatus(RefundControllerTest.java:283)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.springframework.test.context.junit4.statements.RunBeforeTestExecutionCallbacks.evaluate(RunBeforeTestExecutionCallbacks.java:73)
	at org.springframework.test.context.junit4.statements.RunAfterTestExecutionCallbacks.evaluate(RunAfterTestExecutionCallbacks.java:83)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75)
	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86)
	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:251)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)
	at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecutor.runTestClass(JUnitTestClassExecutor.java:116)
	at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecutor.execute(JUnitTestClassExecutor.java:59)
	at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecutor.execute(JUnitTestClassExecutor.java:39)
	at org.gradle.api.internal.tasks.testing.junit.AbstractJUnitTestClassProcessor.processTestClass(AbstractJUnitTestClassProcessor.java:66)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.processTestClass(SuiteTestClassProcessor.java:51)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:35)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:32)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:93)
	at com.sun.proxy.$Proxy1.processTestClass(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.processTestClass(TestWorker.java:109)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:35)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.remote.internal.hub.MessageHubBackedObjectConnection$DispatchWrapper.dispatch(MessageHubBackedObjectConnection.java:146)
	at org.gradle.internal.remote.internal.hub.MessageHubBackedObjectConnection$DispatchWrapper.dispatch(MessageHubBackedObjectConnection.java:128)
	at org.gradle.internal.remote.internal.hub.MessageHub$Handler.run(MessageHub.java:404)
	at org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:63)
	at org.gradle.internal.concurrent.ManagedExecutorImpl$1.run(ManagedExecutorImpl.java:46)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at org.gradle.internal.concurrent.ThreadFactoryImpl$ManagedThreadRunnable.run(ThreadFactoryImpl.java:55)
	at java.lang.Thread.run(Thread.java:748)
26927 [Test worker] INFO  org.springframework.test.context.transaction.TransactionContext  – Rolled back transaction for test context [DefaultTestContext@32e1cd1c testClass = RefundControllerTest, testInstance = org.iata.bsplink.refund.controller.RefundControllerTest@4f2a97a2, testMethod = testUpdateRefundUnderInvestigationStatus@RefundControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@1f5d4e4b testClass = RefundControllerTest, locations = '{}', classes = '{class org.iata.bsplink.refund.Application}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{app.host.local.protocol=local, app.host.sftp.protocol=sftp, org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@e7e8512, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@4ece6cea, [ImportsContextCustomizer@7e32a44a key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@7c81a5a0, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@2dc9c285, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@d444633b, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@794b4b8d], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -&gt; true]].
26937 [Test worker] INFO  org.springframework.test.context.transaction.TransactionContext  – Began transaction (1) for test context [DefaultTestContext@32e1cd1c testClass = RefundControllerTest, testInstance = org.iata.bsplink.refund.controller.RefundControllerTest@484ded75, testMethod = testCountryValidatorIsInvokedOnRefundCreation@RefundControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@1f5d4e4b testClass = RefundControllerTest, locations = '{}', classes = '{class org.iata.bsplink.refund.Application}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{app.host.local.protocol=local, app.host.sftp.protocol=sftp, org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@e7e8512, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@4ece6cea, [ImportsContextCustomizer@7e32a44a key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@7c81a5a0, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@2dc9c285, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@d444633b, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@794b4b8d], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -&gt; true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@494e061e]; rollback [true]
2018-08-09 13:37:10.897  INFO 26020 --- [    Test worker] o.i.b.refund.service.RefundService       : Saving refund : Refund(id=null, ticketDocumentNumber=null, status=PENDING, isoCountryCode=AA, agentCode=78200011, airlineCode=220, dateOfIssue=2018-06-19, billingPeriod=null, currency=RefundCurrency(code=ABC, decimals=0), passenger=PEPE, amounts=RefundAmounts(grossFare=0, lessGrossFareUsed=0, commissionAmount=0, commissionRate=0, spam=0, cancellationPenalty=0, miscellaneousFee=0, taxOnCancellationPenalty=0, taxOnMiscellaneousFee=0, commissionOnCpAndMfAmount=0, commissionOnCpAndMfRate=0, tax=0, refundToPassenger=0), partialRefund=false, netReporting=false, waiverCode=null, tourCode=null, dateOfIssueRelatedDocument=2000-01-02, dateOfAirlineAction=null, exchange=false, agentContact=null, airlineContact=null, settlementAuthorisationCode=null, customerFileReference=null, agentVatNumber=null, airlineVatNumber=null, originalIssue=null, airlineCodeRelatedDocument=220, relatedDocument=RelatedDocument(relatedTicketDocumentNumber=1234567890, relatedTicketCoupon1=true, relatedTicketCoupon2=false, relatedTicketCoupon3=false, relatedTicketCoupon4=false), statisticalCode=I, formOfPaymentAmounts=[], conjunctions=[], taxMiscellaneousFees=[], issueReason=Reason for Issuance, rejectionReason=null, airlineRemark=null, attachedFiles=null, comments=null, history=null, agentRegistrationNumber=null, airlineRegistrationNumber=null)
2018-08-09 13:37:10.897  INFO 26020 --- [    Test worker] o.i.b.refund.service.RefundService       : Saving refund history for: Refund(id=78, ticketDocumentNumber=null, status=PENDING, isoCountryCode=AA, agentCode=78200011, airlineCode=220, dateOfIssue=2018-06-19, billingPeriod=null, currency=RefundCurrency(code=ABC, decimals=0), passenger=PEPE, amounts=RefundAmounts(grossFare=0, lessGrossFareUsed=0, commissionAmount=0, commissionRate=0, spam=0, cancellationPenalty=0, miscellaneousFee=0, taxOnCancellationPenalty=0, taxOnMiscellaneousFee=0, commissionOnCpAndMfAmount=0, commissionOnCpAndMfRate=0, tax=0, refundToPassenger=0), partialRefund=false, netReporting=false, waiverCode=null, tourCode=null, dateOfIssueRelatedDocument=2000-01-02, dateOfAirlineAction=null, exchange=false, agentContact=null, airlineContact=null, settlementAuthorisationCode=null, customerFileReference=null, agentVatNumber=null, airlineVatNumber=null, originalIssue=null, airlineCodeRelatedDocument=220, relatedDocument=RelatedDocument(relatedTicketDocumentNumber=1234567890, relatedTicketCoupon1=true, relatedTicketCoupon2=false, relatedTicketCoupon3=false, relatedTicketCoupon4=false), statisticalCode=I, formOfPaymentAmounts=[], conjunctions=[], taxMiscellaneousFees=[], issueReason=Reason for Issuance, rejectionReason=null, airlineRemark=null, attachedFiles=null, comments=null, history=null, agentRegistrationNumber=null, airlineRegistrationNumber=null) Action: REFUND_ISSUE
2018-08-09 13:37:10.898  INFO 26020 --- [    Test worker] o.i.b.r.service.RefundHistoryService     : Saving refund history: RefundHistory(id=null, action=REFUND_ISSUE, insertDateTime=2018-08-09T11:37:10.898Z, refundId=78, fileName=null)
2018-08-09 13:37:10.898  INFO 26020 --- [    Test worker] o.i.b.refund.service.RefundService       : Refund history saved: RefundHistory(id=79, action=REFUND_ISSUE, insertDateTime=2018-08-09T11:37:10.898Z, refundId=78, fileName=null)
2018-08-09 13:37:10.898  INFO 26020 --- [    Test worker] o.i.b.r.service.RefundHistoryService     : Getting refund history by id: 78
26968 [Test worker] INFO  org.springframework.test.context.transaction.TransactionContext  – Rolled back transaction for test context [DefaultTestContext@32e1cd1c testClass = RefundControllerTest, testInstance = org.iata.bsplink.refund.controller.RefundControllerTest@484ded75, testMethod = testCountryValidatorIsInvokedOnRefundCreation@RefundControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@1f5d4e4b testClass = RefundControllerTest, locations = '{}', classes = '{class org.iata.bsplink.refund.Application}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{app.host.local.protocol=local, app.host.sftp.protocol=sftp, org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@e7e8512, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@4ece6cea, [ImportsContextCustomizer@7e32a44a key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@7c81a5a0, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@2dc9c285, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@d444633b, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@794b4b8d], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -&gt; true]].
26971 [Test worker] INFO  org.springframework.test.context.transaction.TransactionContext  – Began transaction (1) for test context [DefaultTestContext@32e1cd1c testClass = RefundControllerTest, testInstance = org.iata.bsplink.refund.controller.RefundControllerTest@6e4f5579, testMethod = testUpdateRefundWithIncorrectCountryInFileName@RefundControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@1f5d4e4b testClass = RefundControllerTest, locations = '{}', classes = '{class org.iata.bsplink.refund.Application}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{app.host.local.protocol=local, app.host.sftp.protocol=sftp, org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@e7e8512, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@4ece6cea, [ImportsContextCustomizer@7e32a44a key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@7c81a5a0, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@2dc9c285, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@d444633b, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@794b4b8d], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -&gt; true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@494e061e]; rollback [true]
2018-08-09 13:37:10.934  INFO 26020 --- [    Test worker] o.i.b.r.v.RefundUpdateValidator          : Validating refund to update: Refund(id=80, ticketDocumentNumber=null, status=PENDING, isoCountryCode=AA, agentCode=78200011, airlineCode=220, dateOfIssue=2018-06-19, billingPeriod=null, currency=RefundCurrency(code=ABC, decimals=0), passenger=PEPE, amounts=RefundAmounts(grossFare=0, lessGrossFareUsed=0, commissionAmount=0, commissionRate=0, spam=0, cancellationPenalty=0, miscellaneousFee=0, taxOnCancellationPenalty=0, taxOnMiscellaneousFee=0, commissionOnCpAndMfAmount=0, commissionOnCpAndMfRate=0, tax=0, refundToPassenger=0), partialRefund=false, netReporting=false, waiverCode=null, tourCode=null, dateOfIssueRelatedDocument=2000-01-02, dateOfAirlineAction=null, exchange=false, agentContact=null, airlineContact=null, settlementAuthorisationCode=null, customerFileReference=null, agentVatNumber=null, airlineVatNumber=null, originalIssue=null, airlineCodeRelatedDocument=220, relatedDocument=RelatedDocument(relatedTicketDocumentNumber=1234567890, relatedTicketCoupon1=true, relatedTicketCoupon2=false, relatedTicketCoupon3=false, relatedTicketCoupon4=false), statisticalCode=I, formOfPaymentAmounts=[], conjunctions=[], taxMiscellaneousFees=[], issueReason=Reason for Issuance, rejectionReason=null, airlineRemark=null, attachedFiles=null, comments=null, history=null, agentRegistrationNumber=null, airlineRegistrationNumber=null)
26985 [Test worker] INFO  org.iata.bsplink.commons.rest.exception.handler.ApplicationExceptionHandler  – &lt;400 Bad Request,ValidationErrorResponse(validationErrors=[org.iata.bsplink.commons.rest.response.validation.ValidationError@9af71348]),{}&gt;
org.iata.bsplink.commons.rest.exception.ApplicationValidationException: Validation error
	at org.iata.bsplink.refund.validation.RefundUpdateValidator.validate(RefundUpdateValidator.java:62)
	at org.iata.bsplink.refund.validation.MassloadValidator.validate(MassloadValidator.java:34)
	at org.iata.bsplink.refund.controller.RefundController.updateRefundViaMassload(RefundController.java:454)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:209)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:136)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:102)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:870)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:776)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:991)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:925)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:978)
	at org.springframework.web.servlet.FrameworkServlet.doPut(FrameworkServlet.java:892)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:664)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:855)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:66)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:742)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:166)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:99)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.HttpPutFormContentFilter.doFilterInternal(HttpPutFormContentFilter.java:109)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:81)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:200)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:166)
	at org.iata.bsplink.refund.controller.RefundControllerTest.testUpdateRefundWithIncorrectCountryInFileName(RefundControllerTest.java:941)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.springframework.test.context.junit4.statements.RunBeforeTestExecutionCallbacks.evaluate(RunBeforeTestExecutionCallbacks.java:73)
	at org.springframework.test.context.junit4.statements.RunAfterTestExecutionCallbacks.evaluate(RunAfterTestExecutionCallbacks.java:83)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75)
	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86)
	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:251)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)
	at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecutor.runTestClass(JUnitTestClassExecutor.java:116)
	at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecutor.execute(JUnitTestClassExecutor.java:59)
	at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecutor.execute(JUnitTestClassExecutor.java:39)
	at org.gradle.api.internal.tasks.testing.junit.AbstractJUnitTestClassProcessor.processTestClass(AbstractJUnitTestClassProcessor.java:66)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.processTestClass(SuiteTestClassProcessor.java:51)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:35)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:32)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:93)
	at com.sun.proxy.$Proxy1.processTestClass(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.processTestClass(TestWorker.java:109)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:35)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.remote.internal.hub.MessageHubBackedObjectConnection$DispatchWrapper.dispatch(MessageHubBackedObjectConnection.java:146)
	at org.gradle.internal.remote.internal.hub.MessageHubBackedObjectConnection$DispatchWrapper.dispatch(MessageHubBackedObjectConnection.java:128)
	at org.gradle.internal.remote.internal.hub.MessageHub$Handler.run(MessageHub.java:404)
	at org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:63)
	at org.gradle.internal.concurrent.ManagedExecutorImpl$1.run(ManagedExecutorImpl.java:46)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at org.gradle.internal.concurrent.ThreadFactoryImpl$ManagedThreadRunnable.run(ThreadFactoryImpl.java:55)
	at java.lang.Thread.run(Thread.java:748)
26989 [Test worker] INFO  org.springframework.test.context.transaction.TransactionContext  – Rolled back transaction for test context [DefaultTestContext@32e1cd1c testClass = RefundControllerTest, testInstance = org.iata.bsplink.refund.controller.RefundControllerTest@6e4f5579, testMethod = testUpdateRefundWithIncorrectCountryInFileName@RefundControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@1f5d4e4b testClass = RefundControllerTest, locations = '{}', classes = '{class org.iata.bsplink.refund.Application}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{app.host.local.protocol=local, app.host.sftp.protocol=sftp, org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@e7e8512, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@4ece6cea, [ImportsContextCustomizer@7e32a44a key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@7c81a5a0, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@2dc9c285, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@d444633b, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@794b4b8d], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -&gt; true]].
26993 [Test worker] INFO  org.springframework.test.context.transaction.TransactionContext  – Began transaction (1) for test context [DefaultTestContext@32e1cd1c testClass = RefundControllerTest, testInstance = org.iata.bsplink.refund.controller.RefundControllerTest@3e93cfa7, testMethod = testUpdateRefundWithFileNameCorrectHistoryEntry@RefundControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@1f5d4e4b testClass = RefundControllerTest, locations = '{}', classes = '{class org.iata.bsplink.refund.Application}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{app.host.local.protocol=local, app.host.sftp.protocol=sftp, org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@e7e8512, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@4ece6cea, [ImportsContextCustomizer@7e32a44a key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@7c81a5a0, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@2dc9c285, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@d444633b, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@794b4b8d], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -&gt; true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@494e061e]; rollback [true]
2018-08-09 13:37:10.957  INFO 26020 --- [    Test worker] o.i.b.r.v.RefundUpdateValidator          : Validating refund to update: Refund(id=81, ticketDocumentNumber=null, status=UNDER_INVESTIGATION, isoCountryCode=AA, agentCode=78200011, airlineCode=220, dateOfIssue=2018-06-19, billingPeriod=null, currency=RefundCurrency(code=ABC, decimals=0), passenger=PEPE, amounts=RefundAmounts(grossFare=0, lessGrossFareUsed=0, commissionAmount=0, commissionRate=0, spam=0, cancellationPenalty=0, miscellaneousFee=0, taxOnCancellationPenalty=0, taxOnMiscellaneousFee=0, commissionOnCpAndMfAmount=0, commissionOnCpAndMfRate=0, tax=0, refundToPassenger=0), partialRefund=false, netReporting=false, waiverCode=null, tourCode=null, dateOfIssueRelatedDocument=2000-01-02, dateOfAirlineAction=null, exchange=false, agentContact=null, airlineContact=null, settlementAuthorisationCode=null, customerFileReference=null, agentVatNumber=null, airlineVatNumber=null, originalIssue=null, airlineCodeRelatedDocument=220, relatedDocument=RelatedDocument(relatedTicketDocumentNumber=1234567890, relatedTicketCoupon1=true, relatedTicketCoupon2=false, relatedTicketCoupon3=false, relatedTicketCoupon4=false), statisticalCode=I, formOfPaymentAmounts=[], conjunctions=[], taxMiscellaneousFees=[], issueReason=Reason for Issuance, rejectionReason=null, airlineRemark=null, attachedFiles=null, comments=null, history=null, agentRegistrationNumber=null, airlineRegistrationNumber=null)
2018-08-09 13:37:10.959  INFO 26020 --- [    Test worker] o.i.b.r.v.RefundUpdateValidator          : Copy new field values. Ignored not allow to modify: [id, history, attachedFiles, comments, agentCode, status, ticketDocumentNumber, dateOfAirlineAction, rejectionReason]
2018-08-09 13:37:10.959  INFO 26020 --- [    Test worker] o.i.b.r.v.RefundStatusValidator          : Validating status from UNDER_INVESTIGATION to UNDER_INVESTIGATION
2018-08-09 13:37:10.959  INFO 26020 --- [    Test worker] o.i.b.r.v.RefundStatusValidator          : Setting billing period and rejection reason to null
2018-08-09 13:37:10.959  INFO 26020 --- [    Test worker] o.i.b.refund.service.RefundService       : Updating refund : Refund(id=81, ticketDocumentNumber=1234567890, status=UNDER_INVESTIGATION, isoCountryCode=AA, agentCode=78200011, airlineCode=220, dateOfIssue=2018-06-19, billingPeriod=null, currency=RefundCurrency(code=ABC, decimals=0), passenger=PEPE, amounts=RefundAmounts(grossFare=0, lessGrossFareUsed=0, commissionAmount=0, commissionRate=0, spam=0, cancellationPenalty=0, miscellaneousFee=0, taxOnCancellationPenalty=0, taxOnMiscellaneousFee=0, commissionOnCpAndMfAmount=0, commissionOnCpAndMfRate=0, tax=0, refundToPassenger=0), partialRefund=false, netReporting=false, waiverCode=null, tourCode=null, dateOfIssueRelatedDocument=2000-01-02, dateOfAirlineAction=2018-08-09, exchange=false, agentContact=null, airlineContact=null, settlementAuthorisationCode=null, customerFileReference=null, agentVatNumber=null, airlineVatNumber=null, originalIssue=null, airlineCodeRelatedDocument=220, relatedDocument=RelatedDocument(relatedTicketDocumentNumber=1234567890, relatedTicketCoupon1=true, relatedTicketCoupon2=false, relatedTicketCoupon3=false, relatedTicketCoupon4=false), statisticalCode=I, formOfPaymentAmounts=[], conjunctions=[], taxMiscellaneousFees=[], issueReason=Reason for Issuance, rejectionReason=null, airlineRemark=null, attachedFiles=null, comments=null, history=null, agentRegistrationNumber=null, airlineRegistrationNumber=null)
2018-08-09 13:37:10.959  INFO 26020 --- [    Test worker] o.i.b.refund.service.RefundService       : Prepare refund history for: Refund(id=81, ticketDocumentNumber=1234567890, status=UNDER_INVESTIGATION, isoCountryCode=AA, agentCode=78200011, airlineCode=220, dateOfIssue=2018-06-19, billingPeriod=null, currency=RefundCurrency(code=ABC, decimals=0), passenger=PEPE, amounts=RefundAmounts(grossFare=0, lessGrossFareUsed=0, commissionAmount=0, commissionRate=0, spam=0, cancellationPenalty=0, miscellaneousFee=0, taxOnCancellationPenalty=0, taxOnMiscellaneousFee=0, commissionOnCpAndMfAmount=0, commissionOnCpAndMfRate=0, tax=0, refundToPassenger=0), partialRefund=false, netReporting=false, waiverCode=null, tourCode=null, dateOfIssueRelatedDocument=2000-01-02, dateOfAirlineAction=2018-08-09, exchange=false, agentContact=null, airlineContact=null, settlementAuthorisationCode=null, customerFileReference=null, agentVatNumber=null, airlineVatNumber=null, originalIssue=null, airlineCodeRelatedDocument=220, relatedDocument=RelatedDocument(relatedTicketDocumentNumber=1234567890, relatedTicketCoupon1=true, relatedTicketCoupon2=false, relatedTicketCoupon3=false, relatedTicketCoupon4=false), statisticalCode=I, formOfPaymentAmounts=[], conjunctions=[], taxMiscellaneousFees=[], issueReason=Reason for Issuance, rejectionReason=null, airlineRemark=null, attachedFiles=null, comments=null, history=null, agentRegistrationNumber=null, airlineRegistrationNumber=null) Action: MODIFY
2018-08-09 13:37:10.960  INFO 26020 --- [    Test worker] o.i.b.refund.service.RefundService       : Saving refund history for: Refund(id=81, ticketDocumentNumber=1234567890, status=UNDER_INVESTIGATION, isoCountryCode=AA, agentCode=78200011, airlineCode=220, dateOfIssue=2018-06-19, billingPeriod=null, currency=RefundCurrency(code=ABC, decimals=0), passenger=PEPE, amounts=RefundAmounts(grossFare=0, lessGrossFareUsed=0, commissionAmount=0, commissionRate=0, spam=0, cancellationPenalty=0, miscellaneousFee=0, taxOnCancellationPenalty=0, taxOnMiscellaneousFee=0, commissionOnCpAndMfAmount=0, commissionOnCpAndMfRate=0, tax=0, refundToPassenger=0), partialRefund=false, netReporting=false, waiverCode=null, tourCode=null, dateOfIssueRelatedDocument=2000-01-02, dateOfAirlineAction=2018-08-09, exchange=false, agentContact=null, airlineContact=null, settlementAuthorisationCode=null, customerFileReference=null, agentVatNumber=null, airlineVatNumber=null, originalIssue=null, airlineCodeRelatedDocument=220, relatedDocument=RelatedDocument(relatedTicketDocumentNumber=1234567890, relatedTicketCoupon1=true, relatedTicketCoupon2=false, relatedTicketCoupon3=false, relatedTicketCoupon4=false), statisticalCode=I, formOfPaymentAmounts=[], conjunctions=[], taxMiscellaneousFees=[], issueReason=Reason for Issuance, rejectionReason=null, airlineRemark=null, attachedFiles=null, comments=null, history=[RefundHistory(id=null, action=MODIFY, insertDateTime=2018-08-09T11:37:10.960Z, refundId=81, fileName=null)], agentRegistrationNumber=null, airlineRegistrationNumber=null) Action: MASSLOAD_UPDATE
2018-08-09 13:37:10.960  INFO 26020 --- [    Test worker] o.i.b.r.service.RefundHistoryService     : Saving refund history: RefundHistory(id=null, action=MASSLOAD_UPDATE, insertDateTime=2018-08-09T11:37:10.960Z, refundId=81, fileName=AAe9EARS_20001224_2209_123)
2018-08-09 13:37:10.960  INFO 26020 --- [    Test worker] o.i.b.refund.service.RefundService       : Refund history saved: RefundHistory(id=82, action=MASSLOAD_UPDATE, insertDateTime=2018-08-09T11:37:10.960Z, refundId=81, fileName=AAe9EARS_20001224_2209_123)
2018-08-09 13:37:10.960  INFO 26020 --- [    Test worker] o.i.b.r.service.RefundHistoryService     : Getting refund history by id: 81
2018-08-09 13:37:10.967  INFO 26020 --- [    Test worker] o.i.b.refund.service.RefundService       : Getting last updated Refund to retrieve
2018-08-09 13:37:10.976  INFO 26020 --- [    Test worker] o.i.b.r.service.RefundHistoryService     : Getting refund history by id: 81
27032 [Test worker] INFO  org.springframework.test.context.transaction.TransactionContext  – Rolled back transaction for test context [DefaultTestContext@32e1cd1c testClass = RefundControllerTest, testInstance = org.iata.bsplink.refund.controller.RefundControllerTest@3e93cfa7, testMethod = testUpdateRefundWithFileNameCorrectHistoryEntry@RefundControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@1f5d4e4b testClass = RefundControllerTest, locations = '{}', classes = '{class org.iata.bsplink.refund.Application}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{app.host.local.protocol=local, app.host.sftp.protocol=sftp, org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@e7e8512, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@4ece6cea, [ImportsContextCustomizer@7e32a44a key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@7c81a5a0, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@2dc9c285, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@d444633b, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@794b4b8d], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -&gt; true]].
27035 [Test worker] INFO  org.springframework.test.context.transaction.TransactionContext  – Began transaction (1) for test context [DefaultTestContext@32e1cd1c testClass = RefundControllerTest, testInstance = org.iata.bsplink.refund.controller.RefundControllerTest@57ecf25e, testMethod = testAirlineValidatorIsInvokedOnRefundCreation@RefundControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@1f5d4e4b testClass = RefundControllerTest, locations = '{}', classes = '{class org.iata.bsplink.refund.Application}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{app.host.local.protocol=local, app.host.sftp.protocol=sftp, org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@e7e8512, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@4ece6cea, [ImportsContextCustomizer@7e32a44a key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@7c81a5a0, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@2dc9c285, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@d444633b, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@794b4b8d], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -&gt; true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@494e061e]; rollback [true]
2018-08-09 13:37:10.996  INFO 26020 --- [    Test worker] o.i.b.refund.service.RefundService       : Saving refund : Refund(id=null, ticketDocumentNumber=null, status=PENDING, isoCountryCode=AA, agentCode=78200011, airlineCode=220, dateOfIssue=2018-06-19, billingPeriod=null, currency=RefundCurrency(code=ABC, decimals=0), passenger=PEPE, amounts=RefundAmounts(grossFare=0, lessGrossFareUsed=0, commissionAmount=0, commissionRate=0, spam=0, cancellationPenalty=0, miscellaneousFee=0, taxOnCancellationPenalty=0, taxOnMiscellaneousFee=0, commissionOnCpAndMfAmount=0, commissionOnCpAndMfRate=0, tax=0, refundToPassenger=0), partialRefund=false, netReporting=false, waiverCode=null, tourCode=null, dateOfIssueRelatedDocument=2000-01-02, dateOfAirlineAction=null, exchange=false, agentContact=null, airlineContact=null, settlementAuthorisationCode=null, customerFileReference=null, agentVatNumber=null, airlineVatNumber=null, originalIssue=null, airlineCodeRelatedDocument=220, relatedDocument=RelatedDocument(relatedTicketDocumentNumber=1234567890, relatedTicketCoupon1=true, relatedTicketCoupon2=false, relatedTicketCoupon3=false, relatedTicketCoupon4=false), statisticalCode=I, formOfPaymentAmounts=[], conjunctions=[], taxMiscellaneousFees=[], issueReason=Reason for Issuance, rejectionReason=null, airlineRemark=null, attachedFiles=null, comments=null, history=null, agentRegistrationNumber=null, airlineRegistrationNumber=null)
2018-08-09 13:37:10.997  INFO 26020 --- [    Test worker] o.i.b.refund.service.RefundService       : Saving refund history for: Refund(id=84, ticketDocumentNumber=null, status=PENDING, isoCountryCode=AA, agentCode=78200011, airlineCode=220, dateOfIssue=2018-06-19, billingPeriod=null, currency=RefundCurrency(code=ABC, decimals=0), passenger=PEPE, amounts=RefundAmounts(grossFare=0, lessGrossFareUsed=0, commissionAmount=0, commissionRate=0, spam=0, cancellationPenalty=0, miscellaneousFee=0, taxOnCancellationPenalty=0, taxOnMiscellaneousFee=0, commissionOnCpAndMfAmount=0, commissionOnCpAndMfRate=0, tax=0, refundToPassenger=0), partialRefund=false, netReporting=false, waiverCode=null, tourCode=null, dateOfIssueRelatedDocument=2000-01-02, dateOfAirlineAction=null, exchange=false, agentContact=null, airlineContact=null, settlementAuthorisationCode=null, customerFileReference=null, agentVatNumber=null, airlineVatNumber=null, originalIssue=null, airlineCodeRelatedDocument=220, relatedDocument=RelatedDocument(relatedTicketDocumentNumber=1234567890, relatedTicketCoupon1=true, relatedTicketCoupon2=false, relatedTicketCoupon3=false, relatedTicketCoupon4=false), statisticalCode=I, formOfPaymentAmounts=[], conjunctions=[], taxMiscellaneousFees=[], issueReason=Reason for Issuance, rejectionReason=null, airlineRemark=null, attachedFiles=null, comments=null, history=null, agentRegistrationNumber=null, airlineRegistrationNumber=null) Action: REFUND_ISSUE
2018-08-09 13:37:10.997  INFO 26020 --- [    Test worker] o.i.b.r.service.RefundHistoryService     : Saving refund history: RefundHistory(id=null, action=REFUND_ISSUE, insertDateTime=2018-08-09T11:37:10.997Z, refundId=84, fileName=null)
2018-08-09 13:37:10.998  INFO 26020 --- [    Test worker] o.i.b.refund.service.RefundService       : Refund history saved: RefundHistory(id=85, action=REFUND_ISSUE, insertDateTime=2018-08-09T11:37:10.997Z, refundId=84, fileName=null)
2018-08-09 13:37:10.998  INFO 26020 --- [    Test worker] o.i.b.r.service.RefundHistoryService     : Getting refund history by id: 84
27056 [Test worker] INFO  org.springframework.test.context.transaction.TransactionContext  – Rolled back transaction for test context [DefaultTestContext@32e1cd1c testClass = RefundControllerTest, testInstance = org.iata.bsplink.refund.controller.RefundControllerTest@57ecf25e, testMethod = testAirlineValidatorIsInvokedOnRefundCreation@RefundControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@1f5d4e4b testClass = RefundControllerTest, locations = '{}', classes = '{class org.iata.bsplink.refund.Application}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{app.host.local.protocol=local, app.host.sftp.protocol=sftp, org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@e7e8512, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@4ece6cea, [ImportsContextCustomizer@7e32a44a key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@7c81a5a0, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@2dc9c285, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@d444633b, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@794b4b8d], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -&gt; true]].
27059 [Test worker] INFO  org.springframework.test.context.transaction.TransactionContext  – Began transaction (1) for test context [DefaultTestContext@32e1cd1c testClass = RefundControllerTest, testInstance = org.iata.bsplink.refund.controller.RefundControllerTest@34505de9, testMethod = testRefundValidatorIsInvokedOnRefundCreation@RefundControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@1f5d4e4b testClass = RefundControllerTest, locations = '{}', classes = '{class org.iata.bsplink.refund.Application}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{app.host.local.protocol=local, app.host.sftp.protocol=sftp, org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@e7e8512, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@4ece6cea, [ImportsContextCustomizer@7e32a44a key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@7c81a5a0, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@2dc9c285, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@d444633b, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@794b4b8d], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -&gt; true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@494e061e]; rollback [true]
2018-08-09 13:37:11.024  INFO 26020 --- [    Test worker] o.i.b.refund.service.RefundService       : Saving refund : Refund(id=null, ticketDocumentNumber=null, status=PENDING, isoCountryCode=AA, agentCode=78200011, airlineCode=220, dateOfIssue=2018-06-19, billingPeriod=null, currency=RefundCurrency(code=ABC, decimals=0), passenger=PEPE, amounts=RefundAmounts(grossFare=0, lessGrossFareUsed=0, commissionAmount=0, commissionRate=0, spam=0, cancellationPenalty=0, miscellaneousFee=0, taxOnCancellationPenalty=0, taxOnMiscellaneousFee=0, commissionOnCpAndMfAmount=0, commissionOnCpAndMfRate=0, tax=0, refundToPassenger=0), partialRefund=false, netReporting=false, waiverCode=null, tourCode=null, dateOfIssueRelatedDocument=2000-01-02, dateOfAirlineAction=null, exchange=false, agentContact=null, airlineContact=null, settlementAuthorisationCode=null, customerFileReference=null, agentVatNumber=null, airlineVatNumber=null, originalIssue=null, airlineCodeRelatedDocument=220, relatedDocument=RelatedDocument(relatedTicketDocumentNumber=1234567890, relatedTicketCoupon1=true, relatedTicketCoupon2=false, relatedTicketCoupon3=false, relatedTicketCoupon4=false), statisticalCode=I, formOfPaymentAmounts=[], conjunctions=[], taxMiscellaneousFees=[], issueReason=Reason for Issuance, rejectionReason=null, airlineRemark=null, attachedFiles=null, comments=null, history=null, agentRegistrationNumber=null, airlineRegistrationNumber=null)
2018-08-09 13:37:11.025  INFO 26020 --- [    Test worker] o.i.b.refund.service.RefundService       : Saving refund history for: Refund(id=86, ticketDocumentNumber=null, status=PENDING, isoCountryCode=AA, agentCode=78200011, airlineCode=220, dateOfIssue=2018-06-19, billingPeriod=null, currency=RefundCurrency(code=ABC, decimals=0), passenger=PEPE, amounts=RefundAmounts(grossFare=0, lessGrossFareUsed=0, commissionAmount=0, commissionRate=0, spam=0, cancellationPenalty=0, miscellaneousFee=0, taxOnCancellationPenalty=0, taxOnMiscellaneousFee=0, commissionOnCpAndMfAmount=0, commissionOnCpAndMfRate=0, tax=0, refundToPassenger=0), partialRefund=false, netReporting=false, waiverCode=null, tourCode=null, dateOfIssueRelatedDocument=2000-01-02, dateOfAirlineAction=null, exchange=false, agentContact=null, airlineContact=null, settlementAuthorisationCode=null, customerFileReference=null, agentVatNumber=null, airlineVatNumber=null, originalIssue=null, airlineCodeRelatedDocument=220, relatedDocument=RelatedDocument(relatedTicketDocumentNumber=1234567890, relatedTicketCoupon1=true, relatedTicketCoupon2=false, relatedTicketCoupon3=false, relatedTicketCoupon4=false), statisticalCode=I, formOfPaymentAmounts=[], conjunctions=[], taxMiscellaneousFees=[], issueReason=Reason for Issuance, rejectionReason=null, airlineRemark=null, attachedFiles=null, comments=null, history=null, agentRegistrationNumber=null, airlineRegistrationNumber=null) Action: REFUND_ISSUE
2018-08-09 13:37:11.026  INFO 26020 --- [    Test worker] o.i.b.r.service.RefundHistoryService     : Saving refund history: RefundHistory(id=null, action=REFUND_ISSUE, insertDateTime=2018-08-09T11:37:11.025Z, refundId=86, fileName=null)
2018-08-09 13:37:11.026  INFO 26020 --- [    Test worker] o.i.b.refund.service.RefundService       : Refund history saved: RefundHistory(id=87, action=REFUND_ISSUE, insertDateTime=2018-08-09T11:37:11.025Z, refundId=86, fileName=null)
2018-08-09 13:37:11.026  INFO 26020 --- [    Test worker] o.i.b.r.service.RefundHistoryService     : Getting refund history by id: 86
27089 [Test worker] INFO  org.springframework.test.context.transaction.TransactionContext  – Rolled back transaction for test context [DefaultTestContext@32e1cd1c testClass = RefundControllerTest, testInstance = org.iata.bsplink.refund.controller.RefundControllerTest@34505de9, testMethod = testRefundValidatorIsInvokedOnRefundCreation@RefundControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@1f5d4e4b testClass = RefundControllerTest, locations = '{}', classes = '{class org.iata.bsplink.refund.Application}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{app.host.local.protocol=local, app.host.sftp.protocol=sftp, org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@e7e8512, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@4ece6cea, [ImportsContextCustomizer@7e32a44a key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@7c81a5a0, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@2dc9c285, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@d444633b, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@794b4b8d], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -&gt; true]].
27092 [Test worker] INFO  org.springframework.test.context.transaction.TransactionContext  – Began transaction (1) for test context [DefaultTestContext@32e1cd1c testClass = RefundControllerTest, testInstance = org.iata.bsplink.refund.controller.RefundControllerTest@43cf661c, testMethod = testUpdateRefundStatusToPending@RefundControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@1f5d4e4b testClass = RefundControllerTest, locations = '{}', classes = '{class org.iata.bsplink.refund.Application}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{app.host.local.protocol=local, app.host.sftp.protocol=sftp, org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@e7e8512, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@4ece6cea, [ImportsContextCustomizer@7e32a44a key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@7c81a5a0, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@2dc9c285, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@d444633b, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@794b4b8d], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -&gt; true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@494e061e]; rollback [true]
2018-08-09 13:37:11.045  INFO 26020 --- [    Test worker] o.i.b.refund.service.RefundService       : Saving refund : Refund(id=null, ticketDocumentNumber=1234567890, status=DRAFT, isoCountryCode=AA, agentCode=78200011, airlineCode=220, dateOfIssue=2018-06-19, billingPeriod=null, currency=RefundCurrency(code=ABC, decimals=0), passenger=PEPE, amounts=RefundAmounts(grossFare=0, lessGrossFareUsed=0, commissionAmount=0, commissionRate=0, spam=0, cancellationPenalty=0, miscellaneousFee=0, taxOnCancellationPenalty=0, taxOnMiscellaneousFee=0, commissionOnCpAndMfAmount=0, commissionOnCpAndMfRate=0, tax=0, refundToPassenger=0), partialRefund=false, netReporting=false, waiverCode=null, tourCode=null, dateOfIssueRelatedDocument=2000-01-02, dateOfAirlineAction=null, exchange=false, agentContact=null, airlineContact=null, settlementAuthorisationCode=null, customerFileReference=null, agentVatNumber=null, airlineVatNumber=null, originalIssue=null, airlineCodeRelatedDocument=220, relatedDocument=RelatedDocument(relatedTicketDocumentNumber=1234567890, relatedTicketCoupon1=true, relatedTicketCoupon2=false, relatedTicketCoupon3=false, relatedTicketCoupon4=false), statisticalCode=I, formOfPaymentAmounts=[], conjunctions=[], taxMiscellaneousFees=[], issueReason=Reason for Issuance, rejectionReason=null, airlineRemark=null, attachedFiles=null, comments=null, history=null, agentRegistrationNumber=null, airlineRegistrationNumber=null)
2018-08-09 13:37:11.048  INFO 26020 --- [    Test worker] o.i.b.refund.service.RefundService       : Saving refund history for: Refund(id=88, ticketDocumentNumber=1234567890, status=DRAFT, isoCountryCode=AA, agentCode=78200011, airlineCode=220, dateOfIssue=2018-06-19, billingPeriod=null, currency=RefundCurrency(code=ABC, decimals=0), passenger=PEPE, amounts=RefundAmounts(grossFare=0, lessGrossFareUsed=0, commissionAmount=0, commissionRate=0, spam=0, cancellationPenalty=0, miscellaneousFee=0, taxOnCancellationPenalty=0, taxOnMiscellaneousFee=0, commissionOnCpAndMfAmount=0, commissionOnCpAndMfRate=0, tax=0, refundToPassenger=0), partialRefund=false, netReporting=false, waiverCode=null, tourCode=null, dateOfIssueRelatedDocument=2000-01-02, dateOfAirlineAction=null, exchange=false, agentContact=null, airlineContact=null, settlementAuthorisationCode=null, customerFileReference=null, agentVatNumber=null, airlineVatNumber=null, originalIssue=null, airlineCodeRelatedDocument=220, relatedDocument=RelatedDocument(relatedTicketDocumentNumber=1234567890, relatedTicketCoupon1=true, relatedTicketCoupon2=false, relatedTicketCoupon3=false, relatedTicketCoupon4=false), statisticalCode=I, formOfPaymentAmounts=[], conjunctions=[], taxMiscellaneousFees=[], issueReason=Reason for Issuance, rejectionReason=null, airlineRemark=null, attachedFiles=null, comments=null, history=null, agentRegistrationNumber=null, airlineRegistrationNumber=null) Action: REFUND_ISSUE
2018-08-09 13:37:11.048  INFO 26020 --- [    Test worker] o.i.b.r.service.RefundHistoryService     : Saving refund history: RefundHistory(id=null, action=REFUND_ISSUE, insertDateTime=2018-08-09T11:37:11.048Z, refundId=88, fileName=null)
2018-08-09 13:37:11.048  INFO 26020 --- [    Test worker] o.i.b.refund.service.RefundService       : Refund history saved: RefundHistory(id=89, action=REFUND_ISSUE, insertDateTime=2018-08-09T11:37:11.048Z, refundId=88, fileName=null)
2018-08-09 13:37:11.048  INFO 26020 --- [    Test worker] o.i.b.r.service.RefundHistoryService     : Getting refund history by id: 88
2018-08-09 13:37:11.055  INFO 26020 --- [    Test worker] o.i.b.r.controller.RefundController      : received request to change refund's status: Refund(id=88, ticketDocumentNumber=1234567890, status=DRAFT, isoCountryCode=AA, agentCode=78200011, airlineCode=220, dateOfIssue=2018-06-19, billingPeriod=null, currency=RefundCurrency(code=ABC, decimals=0), passenger=PEPE, amounts=RefundAmounts(grossFare=0, lessGrossFareUsed=0, commissionAmount=0, commissionRate=0, spam=0, cancellationPenalty=0, miscellaneousFee=0, taxOnCancellationPenalty=0, taxOnMiscellaneousFee=0, commissionOnCpAndMfAmount=0, commissionOnCpAndMfRate=0, tax=0, refundToPassenger=0), partialRefund=false, netReporting=false, waiverCode=null, tourCode=null, dateOfIssueRelatedDocument=2000-01-02, dateOfAirlineAction=null, exchange=false, agentContact=null, airlineContact=null, settlementAuthorisationCode=null, customerFileReference=null, agentVatNumber=null, airlineVatNumber=null, originalIssue=null, airlineCodeRelatedDocument=220, relatedDocument=RelatedDocument(relatedTicketDocumentNumber=1234567890, relatedTicketCoupon1=true, relatedTicketCoupon2=false, relatedTicketCoupon3=false, relatedTicketCoupon4=false), statisticalCode=I, formOfPaymentAmounts=[], conjunctions=[], taxMiscellaneousFees=[], issueReason=Reason for Issuance, rejectionReason=null, airlineRemark=null, attachedFiles=null, comments=null, history=[RefundHistory(id=89, action=REFUND_ISSUE, insertDateTime=2018-08-09T11:37:11.048Z, refundId=88, fileName=null)], agentRegistrationNumber=null, airlineRegistrationNumber=null)
2018-08-09 13:37:11.055  INFO 26020 --- [    Test worker] o.i.b.r.v.RefundStatusValidator          : Validating status from DRAFT to PENDING
2018-08-09 13:37:11.055  INFO 26020 --- [    Test worker] o.i.b.refund.service.RefundService       : Updating refund : Refund(id=88, ticketDocumentNumber=1234567890, status=PENDING, isoCountryCode=AA, agentCode=78200011, airlineCode=220, dateOfIssue=2018-06-19, billingPeriod=null, currency=RefundCurrency(code=ABC, decimals=0), passenger=PEPE, amounts=RefundAmounts(grossFare=0, lessGrossFareUsed=0, commissionAmount=0, commissionRate=0, spam=0, cancellationPenalty=0, miscellaneousFee=0, taxOnCancellationPenalty=0, taxOnMiscellaneousFee=0, commissionOnCpAndMfAmount=0, commissionOnCpAndMfRate=0, tax=0, refundToPassenger=0), partialRefund=false, netReporting=false, waiverCode=null, tourCode=null, dateOfIssueRelatedDocument=2000-01-02, dateOfAirlineAction=null, exchange=false, agentContact=null, airlineContact=null, settlementAuthorisationCode=null, customerFileReference=null, agentVatNumber=null, airlineVatNumber=null, originalIssue=null, airlineCodeRelatedDocument=220, relatedDocument=RelatedDocument(relatedTicketDocumentNumber=1234567890, relatedTicketCoupon1=true, relatedTicketCoupon2=false, relatedTicketCoupon3=false, relatedTicketCoupon4=false), statisticalCode=I, formOfPaymentAmounts=[], conjunctions=[], taxMiscellaneousFees=[], issueReason=Reason for Issuance, rejectionReason=null, airlineRemark=null, attachedFiles=null, comments=null, history=[RefundHistory(id=89, action=REFUND_ISSUE, insertDateTime=2018-08-09T11:37:11.048Z, refundId=88, fileName=null)], agentRegistrationNumber=null, airlineRegistrationNumber=null)
2018-08-09 13:37:11.055  INFO 26020 --- [    Test worker] o.i.b.refund.service.RefundService       : Prepare refund history for: Refund(id=88, ticketDocumentNumber=1234567890, status=PENDING, isoCountryCode=AA, agentCode=78200011, airlineCode=220, dateOfIssue=2018-06-19, billingPeriod=null, currency=RefundCurrency(code=ABC, decimals=0), passenger=PEPE, amounts=RefundAmounts(grossFare=0, lessGrossFareUsed=0, commissionAmount=0, commissionRate=0, spam=0, cancellationPenalty=0, miscellaneousFee=0, taxOnCancellationPenalty=0, taxOnMiscellaneousFee=0, commissionOnCpAndMfAmount=0, commissionOnCpAndMfRate=0, tax=0, refundToPassenger=0), partialRefund=false, netReporting=false, waiverCode=null, tourCode=null, dateOfIssueRelatedDocument=2000-01-02, dateOfAirlineAction=null, exchange=false, agentContact=null, airlineContact=null, settlementAuthorisationCode=null, customerFileReference=null, agentVatNumber=null, airlineVatNumber=null, originalIssue=null, airlineCodeRelatedDocument=220, relatedDocument=RelatedDocument(relatedTicketDocumentNumber=1234567890, relatedTicketCoupon1=true, relatedTicketCoupon2=false, relatedTicketCoupon3=false, relatedTicketCoupon4=false), statisticalCode=I, formOfPaymentAmounts=[], conjunctions=[], taxMiscellaneousFees=[], issueReason=Reason for Issuance, rejectionReason=null, airlineRemark=null, attachedFiles=null, comments=null, history=[RefundHistory(id=89, action=REFUND_ISSUE, insertDateTime=2018-08-09T11:37:11.048Z, refundId=88, fileName=null)], agentRegistrationNumber=null, airlineRegistrationNumber=null) Action: MODIFY
2018-08-09 13:37:11.056  INFO 26020 --- [    Test worker] o.i.b.refund.service.RefundService       : Saving refund history for: Refund(id=88, ticketDocumentNumber=1234567890, status=PENDING, isoCountryCode=AA, agentCode=78200011, airlineCode=220, dateOfIssue=2018-06-19, billingPeriod=null, currency=RefundCurrency(code=ABC, decimals=0), passenger=PEPE, amounts=RefundAmounts(grossFare=0, lessGrossFareUsed=0, commissionAmount=0, commissionRate=0, spam=0, cancellationPenalty=0, miscellaneousFee=0, taxOnCancellationPenalty=0, taxOnMiscellaneousFee=0, commissionOnCpAndMfAmount=0, commissionOnCpAndMfRate=0, tax=0, refundToPassenger=0), partialRefund=false, netReporting=false, waiverCode=null, tourCode=null, dateOfIssueRelatedDocument=2000-01-02, dateOfAirlineAction=null, exchange=false, agentContact=null, airlineContact=null, settlementAuthorisationCode=null, customerFileReference=null, agentVatNumber=null, airlineVatNumber=null, originalIssue=null, airlineCodeRelatedDocument=220, relatedDocument=RelatedDocument(relatedTicketDocumentNumber=1234567890, relatedTicketCoupon1=true, relatedTicketCoupon2=false, relatedTicketCoupon3=false, relatedTicketCoupon4=false), statisticalCode=I, formOfPaymentAmounts=[], conjunctions=[], taxMiscellaneousFees=[], issueReason=Reason for Issuance, rejectionReason=null, airlineRemark=null, attachedFiles=null, comments=null, history=[RefundHistory(id=89, action=REFUND_ISSUE, insertDateTime=2018-08-09T11:37:11.048Z, refundId=88, fileName=null), RefundHistory(id=null, action=MODIFY, insertDateTime=2018-08-09T11:37:11.055Z, refundId=88, fileName=null)], agentRegistrationNumber=null, airlineRegistrationNumber=null) Action: MODIFY
2018-08-09 13:37:11.056  INFO 26020 --- [    Test worker] o.i.b.r.service.RefundHistoryService     : Saving refund history: RefundHistory(id=null, action=MODIFY, insertDateTime=2018-08-09T11:37:11.056Z, refundId=88, fileName=null)
2018-08-09 13:37:11.056  INFO 26020 --- [    Test worker] o.i.b.refund.service.RefundService       : Refund history saved: RefundHistory(id=90, action=MODIFY, insertDateTime=2018-08-09T11:37:11.056Z, refundId=88, fileName=null)
2018-08-09 13:37:11.056  INFO 26020 --- [    Test worker] o.i.b.r.service.RefundHistoryService     : Getting refund history by id: 88
2018-08-09 13:37:11.061  INFO 26020 --- [    Test worker] o.i.b.refund.service.RefundService       : Getting last updated Refund to retrieve
2018-08-09 13:37:11.062  INFO 26020 --- [    Test worker] o.i.b.r.controller.RefundController      : responding with response: Refund(id=88, ticketDocumentNumber=1234567890, status=PENDING, isoCountryCode=AA, agentCode=78200011, airlineCode=220, dateOfIssue=2018-06-19, billingPeriod=null, currency=RefundCurrency(code=ABC, decimals=0), passenger=PEPE, amounts=RefundAmounts(grossFare=0, lessGrossFareUsed=0, commissionAmount=0, commissionRate=0, spam=0, cancellationPenalty=0, miscellaneousFee=0, taxOnCancellationPenalty=0, taxOnMiscellaneousFee=0, commissionOnCpAndMfAmount=0, commissionOnCpAndMfRate=0, tax=0, refundToPassenger=0), partialRefund=false, netReporting=false, waiverCode=null, tourCode=null, dateOfIssueRelatedDocument=2000-01-02, dateOfAirlineAction=null, exchange=false, agentContact=null, airlineContact=null, settlementAuthorisationCode=null, customerFileReference=null, agentVatNumber=null, airlineVatNumber=null, originalIssue=null, airlineCodeRelatedDocument=220, relatedDocument=RelatedDocument(relatedTicketDocumentNumber=1234567890, relatedTicketCoupon1=true, relatedTicketCoupon2=false, relatedTicketCoupon3=false, relatedTicketCoupon4=false), statisticalCode=I, formOfPaymentAmounts=[], conjunctions=[], taxMiscellaneousFees=[], issueReason=Reason for Issuance, rejectionReason=null, airlineRemark=null, attachedFiles=null, comments=null, history=[RefundHistory(id=89, action=REFUND_ISSUE, insertDateTime=2018-08-09T11:37:11.048Z, refundId=88, fileName=null), RefundHistory(id=91, action=MODIFY, insertDateTime=2018-08-09T11:37:11.055Z, refundId=88, fileName=null)], agentRegistrationNumber=null, airlineRegistrationNumber=null)
27116 [Test worker] INFO  org.springframework.test.context.transaction.TransactionContext  – Rolled back transaction for test context [DefaultTestContext@32e1cd1c testClass = RefundControllerTest, testInstance = org.iata.bsplink.refund.controller.RefundControllerTest@43cf661c, testMethod = testUpdateRefundStatusToPending@RefundControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@1f5d4e4b testClass = RefundControllerTest, locations = '{}', classes = '{class org.iata.bsplink.refund.Application}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{app.host.local.protocol=local, app.host.sftp.protocol=sftp, org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@e7e8512, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@4ece6cea, [ImportsContextCustomizer@7e32a44a key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@7c81a5a0, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@2dc9c285, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@d444633b, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@794b4b8d], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -&gt; true]].
27118 [Test worker] INFO  org.springframework.test.context.transaction.TransactionContext  – Began transaction (1) for test context [DefaultTestContext@32e1cd1c testClass = RefundControllerTest, testInstance = org.iata.bsplink.refund.controller.RefundControllerTest@5d0dbcf4, testMethod = getAllFilesForRefundOk@RefundControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@1f5d4e4b testClass = RefundControllerTest, locations = '{}', classes = '{class org.iata.bsplink.refund.Application}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{app.host.local.protocol=local, app.host.sftp.protocol=sftp, org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@e7e8512, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@4ece6cea, [ImportsContextCustomizer@7e32a44a key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@7c81a5a0, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@2dc9c285, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@d444633b, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@794b4b8d], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -&gt; true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@494e061e]; rollback [true]
2018-08-09 13:37:11.075  INFO 26020 --- [    Test worker] o.i.b.r.controller.RefundController      : received request for getting files with refund: Refund(id=92, ticketDocumentNumber=1234567890, status=PENDING, isoCountryCode=AA, agentCode=78200011, airlineCode=220, dateOfIssue=2018-06-19, billingPeriod=null, currency=RefundCurrency(code=ABC, decimals=0), passenger=PEPE, amounts=RefundAmounts(grossFare=0, lessGrossFareUsed=0, commissionAmount=0, commissionRate=0, spam=0, cancellationPenalty=0, miscellaneousFee=0, taxOnCancellationPenalty=0, taxOnMiscellaneousFee=0, commissionOnCpAndMfAmount=0, commissionOnCpAndMfRate=0, tax=0, refundToPassenger=0), partialRefund=false, netReporting=false, waiverCode=null, tourCode=null, dateOfIssueRelatedDocument=2000-01-02, dateOfAirlineAction=null, exchange=false, agentContact=null, airlineContact=null, settlementAuthorisationCode=null, customerFileReference=null, agentVatNumber=null, airlineVatNumber=null, originalIssue=null, airlineCodeRelatedDocument=220, relatedDocument=RelatedDocument(relatedTicketDocumentNumber=1234567890, relatedTicketCoupon1=true, relatedTicketCoupon2=false, relatedTicketCoupon3=false, relatedTicketCoupon4=false), statisticalCode=I, formOfPaymentAmounts=[], conjunctions=[], taxMiscellaneousFees=[], issueReason=Reason for Issuance, rejectionReason=null, airlineRemark=null, attachedFiles=null, comments=null, history=null, agentRegistrationNumber=null, airlineRegistrationNumber=null)
2018-08-09 13:37:11.082  INFO 26020 --- [    Test worker] o.i.b.r.controller.RefundController      : responding with response: [org.iata.bsplink.refund.model.entity.BsplinkFile@777a51bc, org.iata.bsplink.refund.model.entity.BsplinkFile@62aee8c0]
27135 [Test worker] INFO  org.springframework.test.context.transaction.TransactionContext  – Rolled back transaction for test context [DefaultTestContext@32e1cd1c testClass = RefundControllerTest, testInstance = org.iata.bsplink.refund.controller.RefundControllerTest@5d0dbcf4, testMethod = getAllFilesForRefundOk@RefundControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@1f5d4e4b testClass = RefundControllerTest, locations = '{}', classes = '{class org.iata.bsplink.refund.Application}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{app.host.local.protocol=local, app.host.sftp.protocol=sftp, org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@e7e8512, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@4ece6cea, [ImportsContextCustomizer@7e32a44a key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@7c81a5a0, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@2dc9c285, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@d444633b, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@794b4b8d], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -&gt; true]].
27137 [Test worker] INFO  org.springframework.test.context.transaction.TransactionContext  – Began transaction (1) for test context [DefaultTestContext@32e1cd1c testClass = RefundControllerTest, testInstance = org.iata.bsplink.refund.controller.RefundControllerTest@4d0f74e, testMethod = testChangeRefundStatusViaMassloadFileName@RefundControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@1f5d4e4b testClass = RefundControllerTest, locations = '{}', classes = '{class org.iata.bsplink.refund.Application}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{app.host.local.protocol=local, app.host.sftp.protocol=sftp, org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@e7e8512, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@4ece6cea, [ImportsContextCustomizer@7e32a44a key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@7c81a5a0, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@2dc9c285, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@d444633b, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@794b4b8d], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -&gt; true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@494e061e]; rollback [true]
2018-08-09 13:37:11.093  INFO 26020 --- [    Test worker] o.i.b.r.controller.RefundController      : received request to change refund's status via massload file: Refund(id=95, ticketDocumentNumber=1234567890, status=PENDING, isoCountryCode=AA, agentCode=78200011, airlineCode=220, dateOfIssue=2018-06-19, billingPeriod=null, currency=RefundCurrency(code=ABC, decimals=0), passenger=PEPE, amounts=RefundAmounts(grossFare=0, lessGrossFareUsed=0, commissionAmount=0, commissionRate=0, spam=0, cancellationPenalty=0, miscellaneousFee=0, taxOnCancellationPenalty=0, taxOnMiscellaneousFee=0, commissionOnCpAndMfAmount=0, commissionOnCpAndMfRate=0, tax=0, refundToPassenger=0), partialRefund=false, netReporting=false, waiverCode=null, tourCode=null, dateOfIssueRelatedDocument=2000-01-02, dateOfAirlineAction=null, exchange=false, agentContact=null, airlineContact=null, settlementAuthorisationCode=null, customerFileReference=null, agentVatNumber=null, airlineVatNumber=null, originalIssue=null, airlineCodeRelatedDocument=220, relatedDocument=RelatedDocument(relatedTicketDocumentNumber=1234567890, relatedTicketCoupon1=true, relatedTicketCoupon2=false, relatedTicketCoupon3=false, relatedTicketCoupon4=false), statisticalCode=I, formOfPaymentAmounts=[], conjunctions=[], taxMiscellaneousFees=[], issueReason=Reason for Issuance, rejectionReason=null, airlineRemark=null, attachedFiles=null, comments=null, history=null, agentRegistrationNumber=null, airlineRegistrationNumber=null) AAe9EARS_20001224_2209_123
2018-08-09 13:37:11.093  INFO 26020 --- [    Test worker] o.i.b.r.v.RefundStatusValidator          : Validating status from PENDING to UNDER_INVESTIGATION
2018-08-09 13:37:11.093  INFO 26020 --- [    Test worker] o.i.b.r.v.RefundStatusValidator          : Setting billing period and rejection reason to null
2018-08-09 13:37:11.093  INFO 26020 --- [    Test worker] o.i.b.refund.service.RefundService       : Updating refund : Refund(id=95, ticketDocumentNumber=1234567890, status=UNDER_INVESTIGATION, isoCountryCode=AA, agentCode=78200011, airlineCode=220, dateOfIssue=2018-06-19, billingPeriod=null, currency=RefundCurrency(code=ABC, decimals=0), passenger=PEPE, amounts=RefundAmounts(grossFare=0, lessGrossFareUsed=0, commissionAmount=0, commissionRate=0, spam=0, cancellationPenalty=0, miscellaneousFee=0, taxOnCancellationPenalty=0, taxOnMiscellaneousFee=0, commissionOnCpAndMfAmount=0, commissionOnCpAndMfRate=0, tax=0, refundToPassenger=0), partialRefund=false, netReporting=false, waiverCode=null, tourCode=null, dateOfIssueRelatedDocument=2000-01-02, dateOfAirlineAction=2018-08-09, exchange=false, agentContact=null, airlineContact=null, settlementAuthorisationCode=null, customerFileReference=null, agentVatNumber=null, airlineVatNumber=null, originalIssue=null, airlineCodeRelatedDocument=220, relatedDocument=RelatedDocument(relatedTicketDocumentNumber=1234567890, relatedTicketCoupon1=true, relatedTicketCoupon2=false, relatedTicketCoupon3=false, relatedTicketCoupon4=false), statisticalCode=I, formOfPaymentAmounts=[], conjunctions=[], taxMiscellaneousFees=[], issueReason=Reason for Issuance, rejectionReason=null, airlineRemark=airlineRemark, attachedFiles=null, comments=null, history=null, agentRegistrationNumber=null, airlineRegistrationNumber=null)
2018-08-09 13:37:11.093  INFO 26020 --- [    Test worker] o.i.b.refund.service.RefundService       : Prepare refund history for: Refund(id=95, ticketDocumentNumber=1234567890, status=UNDER_INVESTIGATION, isoCountryCode=AA, agentCode=78200011, airlineCode=220, dateOfIssue=2018-06-19, billingPeriod=null, currency=RefundCurrency(code=ABC, decimals=0), passenger=PEPE, amounts=RefundAmounts(grossFare=0, lessGrossFareUsed=0, commissionAmount=0, commissionRate=0, spam=0, cancellationPenalty=0, miscellaneousFee=0, taxOnCancellationPenalty=0, taxOnMiscellaneousFee=0, commissionOnCpAndMfAmount=0, commissionOnCpAndMfRate=0, tax=0, refundToPassenger=0), partialRefund=false, netReporting=false, waiverCode=null, tourCode=null, dateOfIssueRelatedDocument=2000-01-02, dateOfAirlineAction=2018-08-09, exchange=false, agentContact=null, airlineContact=null, settlementAuthorisationCode=null, customerFileReference=null, agentVatNumber=null, airlineVatNumber=null, originalIssue=null, airlineCodeRelatedDocument=220, relatedDocument=RelatedDocument(relatedTicketDocumentNumber=1234567890, relatedTicketCoupon1=true, relatedTicketCoupon2=false, relatedTicketCoupon3=false, relatedTicketCoupon4=false), statisticalCode=I, formOfPaymentAmounts=[], conjunctions=[], taxMiscellaneousFees=[], issueReason=Reason for Issuance, rejectionReason=null, airlineRemark=airlineRemark, attachedFiles=null, comments=null, history=null, agentRegistrationNumber=null, airlineRegistrationNumber=null) Action: MODIFY
2018-08-09 13:37:11.093  INFO 26020 --- [    Test worker] o.i.b.refund.service.RefundService       : Saving refund history for: Refund(id=95, ticketDocumentNumber=1234567890, status=UNDER_INVESTIGATION, isoCountryCode=AA, agentCode=78200011, airlineCode=220, dateOfIssue=2018-06-19, billingPeriod=null, currency=RefundCurrency(code=ABC, decimals=0), passenger=PEPE, amounts=RefundAmounts(grossFare=0, lessGrossFareUsed=0, commissionAmount=0, commissionRate=0, spam=0, cancellationPenalty=0, miscellaneousFee=0, taxOnCancellationPenalty=0, taxOnMiscellaneousFee=0, commissionOnCpAndMfAmount=0, commissionOnCpAndMfRate=0, tax=0, refundToPassenger=0), partialRefund=false, netReporting=false, waiverCode=null, tourCode=null, dateOfIssueRelatedDocument=2000-01-02, dateOfAirlineAction=2018-08-09, exchange=false, agentContact=null, airlineContact=null, settlementAuthorisationCode=null, customerFileReference=null, agentVatNumber=null, airlineVatNumber=null, originalIssue=null, airlineCodeRelatedDocument=220, relatedDocument=RelatedDocument(relatedTicketDocumentNumber=1234567890, relatedTicketCoupon1=true, relatedTicketCoupon2=false, relatedTicketCoupon3=false, relatedTicketCoupon4=false), statisticalCode=I, formOfPaymentAmounts=[], conjunctions=[], taxMiscellaneousFees=[], issueReason=Reason for Issuance, rejectionReason=null, airlineRemark=airlineRemark, attachedFiles=null, comments=null, history=[RefundHistory(id=null, action=MODIFY, insertDateTime=2018-08-09T11:37:11.093Z, refundId=95, fileName=null)], agentRegistrationNumber=null, airlineRegistrationNumber=null) Action: MASSLOAD_UPDATE
2018-08-09 13:37:11.094  INFO 26020 --- [    Test worker] o.i.b.r.service.RefundHistoryService     : Saving refund history: RefundHistory(id=null, action=MASSLOAD_UPDATE, insertDateTime=2018-08-09T11:37:11.094Z, refundId=95, fileName=AAe9EARS_20001224_2209_123)
2018-08-09 13:37:11.095  INFO 26020 --- [    Test worker] o.i.b.refund.service.RefundService       : Refund history saved: RefundHistory(id=96, action=MASSLOAD_UPDATE, insertDateTime=2018-08-09T11:37:11.094Z, refundId=95, fileName=AAe9EARS_20001224_2209_123)
2018-08-09 13:37:11.095  INFO 26020 --- [    Test worker] o.i.b.r.service.RefundHistoryService     : Getting refund history by id: 95
2018-08-09 13:37:11.102  INFO 26020 --- [    Test worker] o.i.b.refund.service.RefundService       : Getting last updated Refund to retrieve
2018-08-09 13:37:11.103  INFO 26020 --- [    Test worker] o.i.b.r.controller.RefundController      : responding with response: Refund(id=95, ticketDocumentNumber=1234567890, status=UNDER_INVESTIGATION, isoCountryCode=AA, agentCode=78200011, airlineCode=220, dateOfIssue=2018-06-19, billingPeriod=null, currency=RefundCurrency(code=ABC, decimals=0), passenger=PEPE, amounts=RefundAmounts(grossFare=0, lessGrossFareUsed=0, commissionAmount=0, commissionRate=0, spam=0, cancellationPenalty=0, miscellaneousFee=0, taxOnCancellationPenalty=0, taxOnMiscellaneousFee=0, commissionOnCpAndMfAmount=0, commissionOnCpAndMfRate=0, tax=0, refundToPassenger=0), partialRefund=false, netReporting=false, waiverCode=null, tourCode=null, dateOfIssueRelatedDocument=2000-01-02, dateOfAirlineAction=2018-08-09, exchange=false, agentContact=null, airlineContact=null, settlementAuthorisationCode=null, customerFileReference=null, agentVatNumber=null, airlineVatNumber=null, originalIssue=null, airlineCodeRelatedDocument=220, relatedDocument=RelatedDocument(relatedTicketDocumentNumber=1234567890, relatedTicketCoupon1=true, relatedTicketCoupon2=false, relatedTicketCoupon3=false, relatedTicketCoupon4=false), statisticalCode=I, formOfPaymentAmounts=[], conjunctions=[], taxMiscellaneousFees=[], issueReason=Reason for Issuance, rejectionReason=null, airlineRemark=airlineRemark, attachedFiles=null, comments=null, history=[RefundHistory(id=97, action=MODIFY, insertDateTime=2018-08-09T11:37:11.093Z, refundId=95, fileName=null)], agentRegistrationNumber=null, airlineRegistrationNumber=null)
2018-08-09 13:37:11.104  INFO 26020 --- [    Test worker] o.i.b.r.service.RefundHistoryService     : Getting refund history by id: 95
27158 [Test worker] INFO  org.springframework.test.context.transaction.TransactionContext  – Rolled back transaction for test context [DefaultTestContext@32e1cd1c testClass = RefundControllerTest, testInstance = org.iata.bsplink.refund.controller.RefundControllerTest@4d0f74e, testMethod = testChangeRefundStatusViaMassloadFileName@RefundControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@1f5d4e4b testClass = RefundControllerTest, locations = '{}', classes = '{class org.iata.bsplink.refund.Application}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{app.host.local.protocol=local, app.host.sftp.protocol=sftp, org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@e7e8512, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@4ece6cea, [ImportsContextCustomizer@7e32a44a key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@7c81a5a0, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@2dc9c285, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@d444633b, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@794b4b8d], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -&gt; true]].
27161 [Test worker] INFO  org.springframework.test.context.transaction.TransactionContext  – Began transaction (1) for test context [DefaultTestContext@32e1cd1c testClass = RefundControllerTest, testInstance = org.iata.bsplink.refund.controller.RefundControllerTest@34affba4, testMethod = testAgentValidatorIsInvokedOnRefundCreation@RefundControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@1f5d4e4b testClass = RefundControllerTest, locations = '{}', classes = '{class org.iata.bsplink.refund.Application}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{app.host.local.protocol=local, app.host.sftp.protocol=sftp, org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@e7e8512, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@4ece6cea, [ImportsContextCustomizer@7e32a44a key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@7c81a5a0, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@2dc9c285, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@d444633b, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@794b4b8d], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -&gt; true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@494e061e]; rollback [true]
2018-08-09 13:37:11.122  INFO 26020 --- [    Test worker] o.i.b.refund.service.RefundService       : Saving refund : Refund(id=null, ticketDocumentNumber=null, status=PENDING, isoCountryCode=AA, agentCode=78200011, airlineCode=220, dateOfIssue=2018-06-19, billingPeriod=null, currency=RefundCurrency(code=ABC, decimals=0), passenger=PEPE, amounts=RefundAmounts(grossFare=0, lessGrossFareUsed=0, commissionAmount=0, commissionRate=0, spam=0, cancellationPenalty=0, miscellaneousFee=0, taxOnCancellationPenalty=0, taxOnMiscellaneousFee=0, commissionOnCpAndMfAmount=0, commissionOnCpAndMfRate=0, tax=0, refundToPassenger=0), partialRefund=false, netReporting=false, waiverCode=null, tourCode=null, dateOfIssueRelatedDocument=2000-01-02, dateOfAirlineAction=null, exchange=false, agentContact=null, airlineContact=null, settlementAuthorisationCode=null, customerFileReference=null, agentVatNumber=null, airlineVatNumber=null, originalIssue=null, airlineCodeRelatedDocument=220, relatedDocument=RelatedDocument(relatedTicketDocumentNumber=1234567890, relatedTicketCoupon1=true, relatedTicketCoupon2=false, relatedTicketCoupon3=false, relatedTicketCoupon4=false), statisticalCode=I, formOfPaymentAmounts=[], conjunctions=[], taxMiscellaneousFees=[], issueReason=Reason for Issuance, rejectionReason=null, airlineRemark=null, attachedFiles=null, comments=null, history=null, agentRegistrationNumber=null, airlineRegistrationNumber=null)
2018-08-09 13:37:11.123  INFO 26020 --- [    Test worker] o.i.b.refund.service.RefundService       : Saving refund history for: Refund(id=98, ticketDocumentNumber=null, status=PENDING, isoCountryCode=AA, agentCode=78200011, airlineCode=220, dateOfIssue=2018-06-19, billingPeriod=null, currency=RefundCurrency(code=ABC, decimals=0), passenger=PEPE, amounts=RefundAmounts(grossFare=0, lessGrossFareUsed=0, commissionAmount=0, commissionRate=0, spam=0, cancellationPenalty=0, miscellaneousFee=0, taxOnCancellationPenalty=0, taxOnMiscellaneousFee=0, commissionOnCpAndMfAmount=0, commissionOnCpAndMfRate=0, tax=0, refundToPassenger=0), partialRefund=false, netReporting=false, waiverCode=null, tourCode=null, dateOfIssueRelatedDocument=2000-01-02, dateOfAirlineAction=null, exchange=false, agentContact=null, airlineContact=null, settlementAuthorisationCode=null, customerFileReference=null, agentVatNumber=null, airlineVatNumber=null, originalIssue=null, airlineCodeRelatedDocument=220, relatedDocument=RelatedDocument(relatedTicketDocumentNumber=1234567890, relatedTicketCoupon1=true, relatedTicketCoupon2=false, relatedTicketCoupon3=false, relatedTicketCoupon4=false), statisticalCode=I, formOfPaymentAmounts=[], conjunctions=[], taxMiscellaneousFees=[], issueReason=Reason for Issuance, rejectionReason=null, airlineRemark=null, attachedFiles=null, comments=null, history=null, agentRegistrationNumber=null, airlineRegistrationNumber=null) Action: REFUND_ISSUE
2018-08-09 13:37:11.123  INFO 26020 --- [    Test worker] o.i.b.r.service.RefundHistoryService     : Saving refund history: RefundHistory(id=null, action=REFUND_ISSUE, insertDateTime=2018-08-09T11:37:11.123Z, refundId=98, fileName=null)
2018-08-09 13:37:11.124  INFO 26020 --- [    Test worker] o.i.b.refund.service.RefundService       : Refund history saved: RefundHistory(id=99, action=REFUND_ISSUE, insertDateTime=2018-08-09T11:37:11.123Z, refundId=98, fileName=null)
2018-08-09 13:37:11.124  INFO 26020 --- [    Test worker] o.i.b.r.service.RefundHistoryService     : Getting refund history by id: 98
27181 [Test worker] INFO  org.springframework.test.context.transaction.TransactionContext  – Rolled back transaction for test context [DefaultTestContext@32e1cd1c testClass = RefundControllerTest, testInstance = org.iata.bsplink.refund.controller.RefundControllerTest@34affba4, testMethod = testAgentValidatorIsInvokedOnRefundCreation@RefundControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@1f5d4e4b testClass = RefundControllerTest, locations = '{}', classes = '{class org.iata.bsplink.refund.Application}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{app.host.local.protocol=local, app.host.sftp.protocol=sftp, org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@e7e8512, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@4ece6cea, [ImportsContextCustomizer@7e32a44a key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@7c81a5a0, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@2dc9c285, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@d444633b, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@794b4b8d], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -&gt; true]].
27183 [Test worker] INFO  org.springframework.test.context.transaction.TransactionContext  – Began transaction (1) for test context [DefaultTestContext@32e1cd1c testClass = RefundControllerTest, testInstance = org.iata.bsplink.refund.controller.RefundControllerTest@56014c51, testMethod = testUpdateRefundStatusToPendingFieldsNotFilled@RefundControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@1f5d4e4b testClass = RefundControllerTest, locations = '{}', classes = '{class org.iata.bsplink.refund.Application}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{app.host.local.protocol=local, app.host.sftp.protocol=sftp, org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@e7e8512, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@4ece6cea, [ImportsContextCustomizer@7e32a44a key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@7c81a5a0, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@2dc9c285, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@d444633b, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@794b4b8d], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -&gt; true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@494e061e]; rollback [true]
2018-08-09 13:37:11.135  INFO 26020 --- [    Test worker] o.i.b.refund.service.RefundService       : Saving refund : Refund(id=null, ticketDocumentNumber=1234567890, status=DRAFT, isoCountryCode=AA, agentCode=78200011, airlineCode=null, dateOfIssue=2018-06-19, billingPeriod=null, currency=RefundCurrency(code=ABC, decimals=0), passenger=, amounts=RefundAmounts(grossFare=0, lessGrossFareUsed=0, commissionAmount=0, commissionRate=0, spam=0, cancellationPenalty=0, miscellaneousFee=0, taxOnCancellationPenalty=0, taxOnMiscellaneousFee=0, commissionOnCpAndMfAmount=0, commissionOnCpAndMfRate=0, tax=0, refundToPassenger=0), partialRefund=false, netReporting=false, waiverCode=null, tourCode=null, dateOfIssueRelatedDocument=null, dateOfAirlineAction=null, exchange=false, agentContact=null, airlineContact=null, settlementAuthorisationCode=null, customerFileReference=null, agentVatNumber=null, airlineVatNumber=null, originalIssue=null, airlineCodeRelatedDocument=null, relatedDocument=RelatedDocument(relatedTicketDocumentNumber=1234567890, relatedTicketCoupon1=true, relatedTicketCoupon2=false, relatedTicketCoupon3=false, relatedTicketCoupon4=false), statisticalCode=I, formOfPaymentAmounts=[], conjunctions=[], taxMiscellaneousFees=[], issueReason=, rejectionReason=null, airlineRemark=null, attachedFiles=null, comments=null, history=null, agentRegistrationNumber=null, airlineRegistrationNumber=null)
2018-08-09 13:37:11.136  INFO 26020 --- [    Test worker] o.i.b.refund.service.RefundService       : Saving refund history for: Refund(id=100, ticketDocumentNumber=1234567890, status=DRAFT, isoCountryCode=AA, agentCode=78200011, airlineCode=null, dateOfIssue=2018-06-19, billingPeriod=null, currency=RefundCurrency(code=ABC, decimals=0), passenger=, amounts=RefundAmounts(grossFare=0, lessGrossFareUsed=0, commissionAmount=0, commissionRate=0, spam=0, cancellationPenalty=0, miscellaneousFee=0, taxOnCancellationPenalty=0, taxOnMiscellaneousFee=0, commissionOnCpAndMfAmount=0, commissionOnCpAndMfRate=0, tax=0, refundToPassenger=0), partialRefund=false, netReporting=false, waiverCode=null, tourCode=null, dateOfIssueRelatedDocument=null, dateOfAirlineAction=null, exchange=false, agentContact=null, airlineContact=null, settlementAuthorisationCode=null, customerFileReference=null, agentVatNumber=null, airlineVatNumber=null, originalIssue=null, airlineCodeRelatedDocument=null, relatedDocument=RelatedDocument(relatedTicketDocumentNumber=1234567890, relatedTicketCoupon1=true, relatedTicketCoupon2=false, relatedTicketCoupon3=false, relatedTicketCoupon4=false), statisticalCode=I, formOfPaymentAmounts=[], conjunctions=[], taxMiscellaneousFees=[], issueReason=, rejectionReason=null, airlineRemark=null, attachedFiles=null, comments=null, history=null, agentRegistrationNumber=null, airlineRegistrationNumber=null) Action: REFUND_ISSUE
2018-08-09 13:37:11.136  INFO 26020 --- [    Test worker] o.i.b.r.service.RefundHistoryService     : Saving refund history: RefundHistory(id=null, action=REFUND_ISSUE, insertDateTime=2018-08-09T11:37:11.136Z, refundId=100, fileName=null)
2018-08-09 13:37:11.136  INFO 26020 --- [    Test worker] o.i.b.refund.service.RefundService       : Refund history saved: RefundHistory(id=101, action=REFUND_ISSUE, insertDateTime=2018-08-09T11:37:11.136Z, refundId=100, fileName=null)
2018-08-09 13:37:11.136  INFO 26020 --- [    Test worker] o.i.b.r.service.RefundHistoryService     : Getting refund history by id: 100
2018-08-09 13:37:11.143  INFO 26020 --- [    Test worker] o.i.b.r.controller.RefundController      : received request to change refund's status: Refund(id=100, ticketDocumentNumber=1234567890, status=DRAFT, isoCountryCode=AA, agentCode=78200011, airlineCode=null, dateOfIssue=2018-06-19, billingPeriod=null, currency=RefundCurrency(code=ABC, decimals=0), passenger=, amounts=RefundAmounts(grossFare=0, lessGrossFareUsed=0, commissionAmount=0, commissionRate=0, spam=0, cancellationPenalty=0, miscellaneousFee=0, taxOnCancellationPenalty=0, taxOnMiscellaneousFee=0, commissionOnCpAndMfAmount=0, commissionOnCpAndMfRate=0, tax=0, refundToPassenger=0), partialRefund=false, netReporting=false, waiverCode=null, tourCode=null, dateOfIssueRelatedDocument=null, dateOfAirlineAction=null, exchange=false, agentContact=null, airlineContact=null, settlementAuthorisationCode=null, customerFileReference=null, agentVatNumber=null, airlineVatNumber=null, originalIssue=null, airlineCodeRelatedDocument=null, relatedDocument=RelatedDocument(relatedTicketDocumentNumber=1234567890, relatedTicketCoupon1=true, relatedTicketCoupon2=false, relatedTicketCoupon3=false, relatedTicketCoupon4=false), statisticalCode=I, formOfPaymentAmounts=[], conjunctions=[], taxMiscellaneousFees=[], issueReason=, rejectionReason=null, airlineRemark=null, attachedFiles=null, comments=null, history=[RefundHistory(id=101, action=REFUND_ISSUE, insertDateTime=2018-08-09T11:37:11.136Z, refundId=100, fileName=null)], agentRegistrationNumber=null, airlineRegistrationNumber=null)
2018-08-09 13:37:11.143  INFO 26020 --- [    Test worker] o.i.b.r.v.RefundStatusValidator          : Validating status from DRAFT to PENDING
27192 [Test worker] INFO  org.iata.bsplink.commons.rest.exception.handler.ApplicationExceptionHandler  – &lt;400 Bad Request,ValidationErrorResponse(validationErrors=[org.iata.bsplink.commons.rest.response.validation.ValidationError@60d1e411, org.iata.bsplink.commons.rest.response.validation.ValidationError@c166936, org.iata.bsplink.commons.rest.response.validation.ValidationError@519e0e49, org.iata.bsplink.commons.rest.response.validation.ValidationError@18abb6b5, org.iata.bsplink.commons.rest.response.validation.ValidationError@b892de03]),{}&gt;
org.iata.bsplink.commons.rest.exception.ApplicationValidationException: Validation error
	at org.iata.bsplink.refund.validation.RefundStatusValidator.validate(RefundStatusValidator.java:59)
	at org.iata.bsplink.refund.controller.RefundController.changeRefundStatus(RefundController.java:404)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:209)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:136)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:102)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:870)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:776)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:991)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:925)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:978)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:881)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:661)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:855)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:66)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:742)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:166)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:99)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.HttpPutFormContentFilter.doFilterInternal(HttpPutFormContentFilter.java:109)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:81)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:200)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:166)
	at org.iata.bsplink.refund.controller.RefundControllerTest.testUpdateRefundStatusToPendingFieldsNotFilled(RefundControllerTest.java:751)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.springframework.test.context.junit4.statements.RunBeforeTestExecutionCallbacks.evaluate(RunBeforeTestExecutionCallbacks.java:73)
	at org.springframework.test.context.junit4.statements.RunAfterTestExecutionCallbacks.evaluate(RunAfterTestExecutionCallbacks.java:83)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75)
	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86)
	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:251)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)
	at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecutor.runTestClass(JUnitTestClassExecutor.java:116)
	at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecutor.execute(JUnitTestClassExecutor.java:59)
	at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecutor.execute(JUnitTestClassExecutor.java:39)
	at org.gradle.api.internal.tasks.testing.junit.AbstractJUnitTestClassProcessor.processTestClass(AbstractJUnitTestClassProcessor.java:66)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.processTestClass(SuiteTestClassProcessor.java:51)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:35)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:32)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:93)
	at com.sun.proxy.$Proxy1.processTestClass(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.processTestClass(TestWorker.java:109)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:35)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.remote.internal.hub.MessageHubBackedObjectConnection$DispatchWrapper.dispatch(MessageHubBackedObjectConnection.java:146)
	at org.gradle.internal.remote.internal.hub.MessageHubBackedObjectConnection$DispatchWrapper.dispatch(MessageHubBackedObjectConnection.java:128)
	at org.gradle.internal.remote.internal.hub.MessageHub$Handler.run(MessageHub.java:404)
	at org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:63)
	at org.gradle.internal.concurrent.ManagedExecutorImpl$1.run(ManagedExecutorImpl.java:46)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at org.gradle.internal.concurrent.ThreadFactoryImpl$ManagedThreadRunnable.run(ThreadFactoryImpl.java:55)
	at java.lang.Thread.run(Thread.java:748)
27215 [Test worker] INFO  org.springframework.test.context.transaction.TransactionContext  – Rolled back transaction for test context [DefaultTestContext@32e1cd1c testClass = RefundControllerTest, testInstance = org.iata.bsplink.refund.controller.RefundControllerTest@56014c51, testMethod = testUpdateRefundStatusToPendingFieldsNotFilled@RefundControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@1f5d4e4b testClass = RefundControllerTest, locations = '{}', classes = '{class org.iata.bsplink.refund.Application}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{app.host.local.protocol=local, app.host.sftp.protocol=sftp, org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@e7e8512, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@4ece6cea, [ImportsContextCustomizer@7e32a44a key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@7c81a5a0, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@2dc9c285, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@d444633b, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@794b4b8d], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -&gt; true]].
27218 [Test worker] INFO  org.springframework.test.context.transaction.TransactionContext  – Began transaction (1) for test context [DefaultTestContext@32e1cd1c testClass = RefundControllerTest, testInstance = org.iata.bsplink.refund.controller.RefundControllerTest@387d983b, testMethod = testSaveIndirectRefundWithAuthorizedStatus@RefundControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@1f5d4e4b testClass = RefundControllerTest, locations = '{}', classes = '{class org.iata.bsplink.refund.Application}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{app.host.local.protocol=local, app.host.sftp.protocol=sftp, org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@e7e8512, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@4ece6cea, [ImportsContextCustomizer@7e32a44a key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@7c81a5a0, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@2dc9c285, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@d444633b, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@794b4b8d], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -&gt; true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@494e061e]; rollback [true]
27234 [Test worker] INFO  org.iata.bsplink.commons.rest.exception.handler.ApplicationExceptionHandler  – &lt;400 Bad Request,ValidationErrorResponse(validationErrors=[org.iata.bsplink.commons.rest.response.validation.ValidationError@9be24e9]),{}&gt;
org.iata.bsplink.commons.rest.exception.ApplicationValidationException: Validation error
	at org.iata.bsplink.refund.controller.RefundController.saveRefund(RefundController.java:288)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:209)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:136)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:102)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:870)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:776)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:991)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:925)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:978)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:881)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:661)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:855)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:66)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:742)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:166)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:99)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.HttpPutFormContentFilter.doFilterInternal(HttpPutFormContentFilter.java:109)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:81)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:200)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:166)
	at org.iata.bsplink.refund.controller.RefundControllerTest.testSaveIndirectRefundWithAuthorizedStatus(RefundControllerTest.java:979)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.springframework.test.context.junit4.statements.RunBeforeTestExecutionCallbacks.evaluate(RunBeforeTestExecutionCallbacks.java:73)
	at org.springframework.test.context.junit4.statements.RunAfterTestExecutionCallbacks.evaluate(RunAfterTestExecutionCallbacks.java:83)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75)
	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86)
	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:251)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)
	at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecutor.runTestClass(JUnitTestClassExecutor.java:116)
	at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecutor.execute(JUnitTestClassExecutor.java:59)
	at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecutor.execute(JUnitTestClassExecutor.java:39)
	at org.gradle.api.internal.tasks.testing.junit.AbstractJUnitTestClassProcessor.processTestClass(AbstractJUnitTestClassProcessor.java:66)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.processTestClass(SuiteTestClassProcessor.java:51)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:35)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:32)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:93)
	at com.sun.proxy.$Proxy1.processTestClass(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.processTestClass(TestWorker.java:109)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:35)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.remote.internal.hub.MessageHubBackedObjectConnection$DispatchWrapper.dispatch(MessageHubBackedObjectConnection.java:146)
	at org.gradle.internal.remote.internal.hub.MessageHubBackedObjectConnection$DispatchWrapper.dispatch(MessageHubBackedObjectConnection.java:128)
	at org.gradle.internal.remote.internal.hub.MessageHub$Handler.run(MessageHub.java:404)
	at org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:63)
	at org.gradle.internal.concurrent.ManagedExecutorImpl$1.run(ManagedExecutorImpl.java:46)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at org.gradle.internal.concurrent.ThreadFactoryImpl$ManagedThreadRunnable.run(ThreadFactoryImpl.java:55)
	at java.lang.Thread.run(Thread.java:748)
27250 [Test worker] INFO  org.springframework.test.context.transaction.TransactionContext  – Rolled back transaction for test context [DefaultTestContext@32e1cd1c testClass = RefundControllerTest, testInstance = org.iata.bsplink.refund.controller.RefundControllerTest@387d983b, testMethod = testSaveIndirectRefundWithAuthorizedStatus@RefundControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@1f5d4e4b testClass = RefundControllerTest, locations = '{}', classes = '{class org.iata.bsplink.refund.Application}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{app.host.local.protocol=local, app.host.sftp.protocol=sftp, org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@e7e8512, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@4ece6cea, [ImportsContextCustomizer@7e32a44a key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@7c81a5a0, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@2dc9c285, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@d444633b, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@794b4b8d], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -&gt; true]].
27252 [Test worker] INFO  org.springframework.test.context.transaction.TransactionContext  – Began transaction (1) for test context [DefaultTestContext@32e1cd1c testClass = RefundControllerTest, testInstance = org.iata.bsplink.refund.controller.RefundControllerTest@146cd462, testMethod = testSaveFiles@RefundControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@1f5d4e4b testClass = RefundControllerTest, locations = '{}', classes = '{class org.iata.bsplink.refund.Application}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{app.host.local.protocol=local, app.host.sftp.protocol=sftp, org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@e7e8512, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@4ece6cea, [ImportsContextCustomizer@7e32a44a key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@7c81a5a0, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@2dc9c285, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@d444633b, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@794b4b8d], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -&gt; true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@494e061e]; rollback [true]
2018-08-09 13:37:11.208  INFO 26020 --- [    Test worker] o.i.b.r.controller.RefundController      : received request for getting comments with refund: Refund(id=102, ticketDocumentNumber=1234567890, status=PENDING, isoCountryCode=AA, agentCode=78200011, airlineCode=220, dateOfIssue=2018-06-19, billingPeriod=null, currency=RefundCurrency(code=ABC, decimals=0), passenger=PEPE, amounts=RefundAmounts(grossFare=0, lessGrossFareUsed=0, commissionAmount=0, commissionRate=0, spam=0, cancellationPenalty=0, miscellaneousFee=0, taxOnCancellationPenalty=0, taxOnMiscellaneousFee=0, commissionOnCpAndMfAmount=0, commissionOnCpAndMfRate=0, tax=0, refundToPassenger=0), partialRefund=false, netReporting=false, waiverCode=null, tourCode=null, dateOfIssueRelatedDocument=2000-01-02, dateOfAirlineAction=null, exchange=false, agentContact=null, airlineContact=null, settlementAuthorisationCode=null, customerFileReference=null, agentVatNumber=null, airlineVatNumber=null, originalIssue=null, airlineCodeRelatedDocument=220, relatedDocument=RelatedDocument(relatedTicketDocumentNumber=1234567890, relatedTicketCoupon1=true, relatedTicketCoupon2=false, relatedTicketCoupon3=false, relatedTicketCoupon4=false), statisticalCode=I, formOfPaymentAmounts=[], conjunctions=[], taxMiscellaneousFees=[], issueReason=Reason for Issuance, rejectionReason=null, airlineRemark=null, attachedFiles=null, comments=null, history=null, agentRegistrationNumber=null, airlineRegistrationNumber=null)
2018-08-09 13:37:11.208  INFO 26020 --- [    Test worker] o.i.bsplink.refund.utils.FilesUtility    : save multipart file from local to remote. File name: file_one.txt. Refund: Refund(id=102, ticketDocumentNumber=1234567890, status=PENDING, isoCountryCode=AA, agentCode=78200011, airlineCode=220, dateOfIssue=2018-06-19, billingPeriod=null, currency=RefundCurrency(code=ABC, decimals=0), passenger=PEPE, amounts=RefundAmounts(grossFare=0, lessGrossFareUsed=0, commissionAmount=0, commissionRate=0, spam=0, cancellationPenalty=0, miscellaneousFee=0, taxOnCancellationPenalty=0, taxOnMiscellaneousFee=0, commissionOnCpAndMfAmount=0, commissionOnCpAndMfRate=0, tax=0, refundToPassenger=0), partialRefund=false, netReporting=false, waiverCode=null, tourCode=null, dateOfIssueRelatedDocument=2000-01-02, dateOfAirlineAction=null, exchange=false, agentContact=null, airlineContact=null, settlementAuthorisationCode=null, customerFileReference=null, agentVatNumber=null, airlineVatNumber=null, originalIssue=null, airlineCodeRelatedDocument=220, relatedDocument=RelatedDocument(relatedTicketDocumentNumber=1234567890, relatedTicketCoupon1=true, relatedTicketCoupon2=false, relatedTicketCoupon3=false, relatedTicketCoupon4=false), statisticalCode=I, formOfPaymentAmounts=[], conjunctions=[], taxMiscellaneousFees=[], issueReason=Reason for Issuance, rejectionReason=null, airlineRemark=null, attachedFiles=null, comments=null, history=null, agentRegistrationNumber=null, airlineRegistrationNumber=null)
2018-08-09 13:37:11.208  INFO 26020 --- [    Test worker] o.i.bsplink.refund.utils.FilesUtility    : save file file_one.txt in attached_files directory
2018-08-09 13:37:11.209  INFO 26020 --- [    Test worker] o.i.bsplink.refund.utils.FilesUtility    : file file_one.txt saved. Path: attached_files/file_one.txt
2018-08-09 13:37:11.209  INFO 26020 --- [    Test worker] o.i.bsplink.refund.utils.FilesUtility    : upload file: file_one.txt from local to remote
2018-08-09 13:37:11.209  INFO 26020 --- [    Test worker] o.i.bsplink.refund.utils.FilesUtility    : get remote path for refund: Refund(id=102, ticketDocumentNumber=1234567890, status=PENDING, isoCountryCode=AA, agentCode=78200011, airlineCode=220, dateOfIssue=2018-06-19, billingPeriod=null, currency=RefundCurrency(code=ABC, decimals=0), passenger=PEPE, amounts=RefundAmounts(grossFare=0, lessGrossFareUsed=0, commissionAmount=0, commissionRate=0, spam=0, cancellationPenalty=0, miscellaneousFee=0, taxOnCancellationPenalty=0, taxOnMiscellaneousFee=0, commissionOnCpAndMfAmount=0, commissionOnCpAndMfRate=0, tax=0, refundToPassenger=0), partialRefund=false, netReporting=false, waiverCode=null, tourCode=null, dateOfIssueRelatedDocument=2000-01-02, dateOfAirlineAction=null, exchange=false, agentContact=null, airlineContact=null, settlementAuthorisationCode=null, customerFileReference=null, agentVatNumber=null, airlineVatNumber=null, originalIssue=null, airlineCodeRelatedDocument=220, relatedDocument=RelatedDocument(relatedTicketDocumentNumber=1234567890, relatedTicketCoupon1=true, relatedTicketCoupon2=false, relatedTicketCoupon3=false, relatedTicketCoupon4=false), statisticalCode=I, formOfPaymentAmounts=[], conjunctions=[], taxMiscellaneousFees=[], issueReason=Reason for Issuance, rejectionReason=null, airlineRemark=null, attachedFiles=null, comments=null, history=null, agentRegistrationNumber=null, airlineRegistrationNumber=null)
2018-08-09 13:37:11.209  INFO 26020 --- [    Test worker] o.i.bsplink.refund.utils.FilesUtility    : get remote full path for file: file_one.txt with refund: Refund(id=102, ticketDocumentNumber=1234567890, status=PENDING, isoCountryCode=AA, agentCode=78200011, airlineCode=220, dateOfIssue=2018-06-19, billingPeriod=null, currency=RefundCurrency(code=ABC, decimals=0), passenger=PEPE, amounts=RefundAmounts(grossFare=0, lessGrossFareUsed=0, commissionAmount=0, commissionRate=0, spam=0, cancellationPenalty=0, miscellaneousFee=0, taxOnCancellationPenalty=0, taxOnMiscellaneousFee=0, commissionOnCpAndMfAmount=0, commissionOnCpAndMfRate=0, tax=0, refundToPassenger=0), partialRefund=false, netReporting=false, waiverCode=null, tourCode=null, dateOfIssueRelatedDocument=2000-01-02, dateOfAirlineAction=null, exchange=false, agentContact=null, airlineContact=null, settlementAuthorisationCode=null, customerFileReference=null, agentVatNumber=null, airlineVatNumber=null, originalIssue=null, airlineCodeRelatedDocument=220, relatedDocument=RelatedDocument(relatedTicketDocumentNumber=1234567890, relatedTicketCoupon1=true, relatedTicketCoupon2=false, relatedTicketCoupon3=false, relatedTicketCoupon4=false), statisticalCode=I, formOfPaymentAmounts=[], conjunctions=[], taxMiscellaneousFees=[], issueReason=Reason for Issuance, rejectionReason=null, airlineRemark=null, attachedFiles=null, comments=null, history=null, agentRegistrationNumber=null, airlineRegistrationNumber=null)
2018-08-09 13:37:11.210  INFO 26020 --- [    Test worker] o.i.b.r.service.RefundHistoryService     : Saving refund history: RefundHistory(id=null, action=ATTACH_FILE, insertDateTime=2018-08-09T11:37:11.210Z, refundId=102, fileName=file_one.txt)
2018-08-09 13:37:11.214  INFO 26020 --- [    Test worker] o.i.bsplink.refund.utils.FilesUtility    : save multipart file from local to remote. File name: file_two.pdf. Refund: Refund(id=102, ticketDocumentNumber=1234567890, status=PENDING, isoCountryCode=AA, agentCode=78200011, airlineCode=220, dateOfIssue=2018-06-19, billingPeriod=null, currency=RefundCurrency(code=ABC, decimals=0), passenger=PEPE, amounts=RefundAmounts(grossFare=0, lessGrossFareUsed=0, commissionAmount=0, commissionRate=0, spam=0, cancellationPenalty=0, miscellaneousFee=0, taxOnCancellationPenalty=0, taxOnMiscellaneousFee=0, commissionOnCpAndMfAmount=0, commissionOnCpAndMfRate=0, tax=0, refundToPassenger=0), partialRefund=false, netReporting=false, waiverCode=null, tourCode=null, dateOfIssueRelatedDocument=2000-01-02, dateOfAirlineAction=null, exchange=false, agentContact=null, airlineContact=null, settlementAuthorisationCode=null, customerFileReference=null, agentVatNumber=null, airlineVatNumber=null, originalIssue=null, airlineCodeRelatedDocument=220, relatedDocument=RelatedDocument(relatedTicketDocumentNumber=1234567890, relatedTicketCoupon1=true, relatedTicketCoupon2=false, relatedTicketCoupon3=false, relatedTicketCoupon4=false), statisticalCode=I, formOfPaymentAmounts=[], conjunctions=[], taxMiscellaneousFees=[], issueReason=Reason for Issuance, rejectionReason=null, airlineRemark=null, attachedFiles=null, comments=null, history=null, agentRegistrationNumber=null, airlineRegistrationNumber=null)
2018-08-09 13:37:11.215  INFO 26020 --- [    Test worker] o.i.bsplink.refund.utils.FilesUtility    : save file file_two.pdf in attached_files directory
2018-08-09 13:37:11.215  INFO 26020 --- [    Test worker] o.i.bsplink.refund.utils.FilesUtility    : file file_two.pdf saved. Path: attached_files/file_two.pdf
2018-08-09 13:37:11.215  INFO 26020 --- [    Test worker] o.i.bsplink.refund.utils.FilesUtility    : upload file: file_two.pdf from local to remote
2018-08-09 13:37:11.215  INFO 26020 --- [    Test worker] o.i.bsplink.refund.utils.FilesUtility    : get remote path for refund: Refund(id=102, ticketDocumentNumber=1234567890, status=PENDING, isoCountryCode=AA, agentCode=78200011, airlineCode=220, dateOfIssue=2018-06-19, billingPeriod=null, currency=RefundCurrency(code=ABC, decimals=0), passenger=PEPE, amounts=RefundAmounts(grossFare=0, lessGrossFareUsed=0, commissionAmount=0, commissionRate=0, spam=0, cancellationPenalty=0, miscellaneousFee=0, taxOnCancellationPenalty=0, taxOnMiscellaneousFee=0, commissionOnCpAndMfAmount=0, commissionOnCpAndMfRate=0, tax=0, refundToPassenger=0), partialRefund=false, netReporting=false, waiverCode=null, tourCode=null, dateOfIssueRelatedDocument=2000-01-02, dateOfAirlineAction=null, exchange=false, agentContact=null, airlineContact=null, settlementAuthorisationCode=null, customerFileReference=null, agentVatNumber=null, airlineVatNumber=null, originalIssue=null, airlineCodeRelatedDocument=220, relatedDocument=RelatedDocument(relatedTicketDocumentNumber=1234567890, relatedTicketCoupon1=true, relatedTicketCoupon2=false, relatedTicketCoupon3=false, relatedTicketCoupon4=false), statisticalCode=I, formOfPaymentAmounts=[], conjunctions=[], taxMiscellaneousFees=[], issueReason=Reason for Issuance, rejectionReason=null, airlineRemark=null, attachedFiles=null, comments=null, history=null, agentRegistrationNumber=null, airlineRegistrationNumber=null)
2018-08-09 13:37:11.215  INFO 26020 --- [    Test worker] o.i.bsplink.refund.utils.FilesUtility    : get remote full path for file: file_two.pdf with refund: Refund(id=102, ticketDocumentNumber=1234567890, status=PENDING, isoCountryCode=AA, agentCode=78200011, airlineCode=220, dateOfIssue=2018-06-19, billingPeriod=null, currency=RefundCurrency(code=ABC, decimals=0), passenger=PEPE, amounts=RefundAmounts(grossFare=0, lessGrossFareUsed=0, commissionAmount=0, commissionRate=0, spam=0, cancellationPenalty=0, miscellaneousFee=0, taxOnCancellationPenalty=0, taxOnMiscellaneousFee=0, commissionOnCpAndMfAmount=0, commissionOnCpAndMfRate=0, tax=0, refundToPassenger=0), partialRefund=false, netReporting=false, waiverCode=null, tourCode=null, dateOfIssueRelatedDocument=2000-01-02, dateOfAirlineAction=null, exchange=false, agentContact=null, airlineContact=null, settlementAuthorisationCode=null, customerFileReference=null, agentVatNumber=null, airlineVatNumber=null, originalIssue=null, airlineCodeRelatedDocument=220, relatedDocument=RelatedDocument(relatedTicketDocumentNumber=1234567890, relatedTicketCoupon1=true, relatedTicketCoupon2=false, relatedTicketCoupon3=false, relatedTicketCoupon4=false), statisticalCode=I, formOfPaymentAmounts=[], conjunctions=[], taxMiscellaneousFees=[], issueReason=Reason for Issuance, rejectionReason=null, airlineRemark=null, attachedFiles=null, comments=null, history=null, agentRegistrationNumber=null, airlineRegistrationNumber=null)
2018-08-09 13:37:11.216  INFO 26020 --- [    Test worker] o.i.b.r.service.RefundHistoryService     : Saving refund history: RefundHistory(id=null, action=ATTACH_FILE, insertDateTime=2018-08-09T11:37:11.215Z, refundId=102, fileName=file_two.pdf)
2018-08-09 13:37:11.216  INFO 26020 --- [    Test worker] o.i.bsplink.refund.utils.FilesUtility    : save multipart file from local to remote. File name: file_three.txt. Refund: Refund(id=102, ticketDocumentNumber=1234567890, status=PENDING, isoCountryCode=AA, agentCode=78200011, airlineCode=220, dateOfIssue=2018-06-19, billingPeriod=null, currency=RefundCurrency(code=ABC, decimals=0), passenger=PEPE, amounts=RefundAmounts(grossFare=0, lessGrossFareUsed=0, commissionAmount=0, commissionRate=0, spam=0, cancellationPenalty=0, miscellaneousFee=0, taxOnCancellationPenalty=0, taxOnMiscellaneousFee=0, commissionOnCpAndMfAmount=0, commissionOnCpAndMfRate=0, tax=0, refundToPassenger=0), partialRefund=false, netReporting=false, waiverCode=null, tourCode=null, dateOfIssueRelatedDocument=2000-01-02, dateOfAirlineAction=null, exchange=false, agentContact=null, airlineContact=null, settlementAuthorisationCode=null, customerFileReference=null, agentVatNumber=null, airlineVatNumber=null, originalIssue=null, airlineCodeRelatedDocument=220, relatedDocument=RelatedDocument(relatedTicketDocumentNumber=1234567890, relatedTicketCoupon1=true, relatedTicketCoupon2=false, relatedTicketCoupon3=false, relatedTicketCoupon4=false), statisticalCode=I, formOfPaymentAmounts=[], conjunctions=[], taxMiscellaneousFees=[], issueReason=Reason for Issuance, rejectionReason=null, airlineRemark=null, attachedFiles=null, comments=null, history=null, agentRegistrationNumber=null, airlineRegistrationNumber=null)
2018-08-09 13:37:11.216  INFO 26020 --- [    Test worker] o.i.bsplink.refund.utils.FilesUtility    : save file file_three.txt in attached_files directory
2018-08-09 13:37:11.217  INFO 26020 --- [    Test worker] o.i.bsplink.refund.utils.FilesUtility    : file file_three.txt saved. Path: attached_files/file_three.txt
2018-08-09 13:37:11.217  INFO 26020 --- [    Test worker] o.i.bsplink.refund.utils.FilesUtility    : upload file: file_three.txt from local to remote
2018-08-09 13:37:11.217  INFO 26020 --- [    Test worker] o.i.bsplink.refund.utils.FilesUtility    : get remote path for refund: Refund(id=102, ticketDocumentNumber=1234567890, status=PENDING, isoCountryCode=AA, agentCode=78200011, airlineCode=220, dateOfIssue=2018-06-19, billingPeriod=null, currency=RefundCurrency(code=ABC, decimals=0), passenger=PEPE, amounts=RefundAmounts(grossFare=0, lessGrossFareUsed=0, commissionAmount=0, commissionRate=0, spam=0, cancellationPenalty=0, miscellaneousFee=0, taxOnCancellationPenalty=0, taxOnMiscellaneousFee=0, commissionOnCpAndMfAmount=0, commissionOnCpAndMfRate=0, tax=0, refundToPassenger=0), partialRefund=false, netReporting=false, waiverCode=null, tourCode=null, dateOfIssueRelatedDocument=2000-01-02, dateOfAirlineAction=null, exchange=false, agentContact=null, airlineContact=null, settlementAuthorisationCode=null, customerFileReference=null, agentVatNumber=null, airlineVatNumber=null, originalIssue=null, airlineCodeRelatedDocument=220, relatedDocument=RelatedDocument(relatedTicketDocumentNumber=1234567890, relatedTicketCoupon1=true, relatedTicketCoupon2=false, relatedTicketCoupon3=false, relatedTicketCoupon4=false), statisticalCode=I, formOfPaymentAmounts=[], conjunctions=[], taxMiscellaneousFees=[], issueReason=Reason for Issuance, rejectionReason=null, airlineRemark=null, attachedFiles=null, comments=null, history=null, agentRegistrationNumber=null, airlineRegistrationNumber=null)
2018-08-09 13:37:11.217  INFO 26020 --- [    Test worker] o.i.bsplink.refund.utils.FilesUtility    : get remote full path for file: file_three.txt with refund: Refund(id=102, ticketDocumentNumber=1234567890, status=PENDING, isoCountryCode=AA, agentCode=78200011, airlineCode=220, dateOfIssue=2018-06-19, billingPeriod=null, currency=RefundCurrency(code=ABC, decimals=0), passenger=PEPE, amounts=RefundAmounts(grossFare=0, lessGrossFareUsed=0, commissionAmount=0, commissionRate=0, spam=0, cancellationPenalty=0, miscellaneousFee=0, taxOnCancellationPenalty=0, taxOnMiscellaneousFee=0, commissionOnCpAndMfAmount=0, commissionOnCpAndMfRate=0, tax=0, refundToPassenger=0), partialRefund=false, netReporting=false, waiverCode=null, tourCode=null, dateOfIssueRelatedDocument=2000-01-02, dateOfAirlineAction=null, exchange=false, agentContact=null, airlineContact=null, settlementAuthorisationCode=null, customerFileReference=null, agentVatNumber=null, airlineVatNumber=null, originalIssue=null, airlineCodeRelatedDocument=220, relatedDocument=RelatedDocument(relatedTicketDocumentNumber=1234567890, relatedTicketCoupon1=true, relatedTicketCoupon2=false, relatedTicketCoupon3=false, relatedTicketCoupon4=false), statisticalCode=I, formOfPaymentAmounts=[], conjunctions=[], taxMiscellaneousFees=[], issueReason=Reason for Issuance, rejectionReason=null, airlineRemark=null, attachedFiles=null, comments=null, history=null, agentRegistrationNumber=null, airlineRegistrationNumber=null)
2018-08-09 13:37:11.218  INFO 26020 --- [    Test worker] o.i.b.r.service.RefundHistoryService     : Saving refund history: RefundHistory(id=null, action=ATTACH_FILE, insertDateTime=2018-08-09T11:37:11.217Z, refundId=102, fileName=file_three.txt)
2018-08-09 13:37:11.218  INFO 26020 --- [    Test worker] o.i.b.r.controller.RefundController      : responding with response: [org.iata.bsplink.refund.response.SimpleResponse@5caeae05, org.iata.bsplink.refund.response.SimpleResponse@16204060, org.iata.bsplink.refund.response.SimpleResponse@69d23399]
27271 [Test worker] INFO  org.springframework.test.context.transaction.TransactionContext  – Rolled back transaction for test context [DefaultTestContext@32e1cd1c testClass = RefundControllerTest, testInstance = org.iata.bsplink.refund.controller.RefundControllerTest@146cd462, testMethod = testSaveFiles@RefundControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@1f5d4e4b testClass = RefundControllerTest, locations = '{}', classes = '{class org.iata.bsplink.refund.Application}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{app.host.local.protocol=local, app.host.sftp.protocol=sftp, org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@e7e8512, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@4ece6cea, [ImportsContextCustomizer@7e32a44a key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@7c81a5a0, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@2dc9c285, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@d444633b, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@794b4b8d], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -&gt; true]].
27273 [Test worker] INFO  org.springframework.test.context.transaction.TransactionContext  – Began transaction (1) for test context [DefaultTestContext@32e1cd1c testClass = RefundControllerTest, testInstance = org.iata.bsplink.refund.controller.RefundControllerTest@6ede1f7, testMethod = testUpdateRefundModifyHistory@RefundControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@1f5d4e4b testClass = RefundControllerTest, locations = '{}', classes = '{class org.iata.bsplink.refund.Application}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{app.host.local.protocol=local, app.host.sftp.protocol=sftp, org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@e7e8512, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@4ece6cea, [ImportsContextCustomizer@7e32a44a key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@7c81a5a0, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@2dc9c285, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@d444633b, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@794b4b8d], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -&gt; true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@494e061e]; rollback [true]
2018-08-09 13:37:11.242  INFO 26020 --- [    Test worker] o.i.b.r.controller.RefundController      : received request to update indirect refund: Refund(id=109, ticketDocumentNumber=null, status=PENDING, isoCountryCode=AA, agentCode=78200011, airlineCode=220, dateOfIssue=2018-06-19, billingPeriod=null, currency=RefundCurrency(code=ABC, decimals=0), passenger=PEPE, amounts=RefundAmounts(grossFare=0, lessGrossFareUsed=0, commissionAmount=0, commissionRate=0, spam=0, cancellationPenalty=0, miscellaneousFee=0, taxOnCancellationPenalty=0, taxOnMiscellaneousFee=0, commissionOnCpAndMfAmount=0, commissionOnCpAndMfRate=0, tax=0, refundToPassenger=0), partialRefund=false, netReporting=false, waiverCode=null, tourCode=null, dateOfIssueRelatedDocument=2000-01-02, dateOfAirlineAction=null, exchange=false, agentContact=null, airlineContact=null, settlementAuthorisationCode=null, customerFileReference=null, agentVatNumber=null, airlineVatNumber=null, originalIssue=null, airlineCodeRelatedDocument=220, relatedDocument=RelatedDocument(relatedTicketDocumentNumber=1234567890, relatedTicketCoupon1=true, relatedTicketCoupon2=false, relatedTicketCoupon3=false, relatedTicketCoupon4=false), statisticalCode=I, formOfPaymentAmounts=[], conjunctions=[], taxMiscellaneousFees=[], issueReason=Reason for Issuance, rejectionReason=null, airlineRemark=null, attachedFiles=null, comments=null, history=[RefundHistory(id=null, action=ATTACH_FILE, insertDateTime=2018-08-09T11:37:11.229Z, refundId=null, fileName=null)], agentRegistrationNumber=null, airlineRegistrationNumber=null)
2018-08-09 13:37:11.243  INFO 26020 --- [    Test worker] o.i.b.r.v.RefundUpdateValidator          : Validating refund to update: Refund(id=109, ticketDocumentNumber=null, status=PENDING, isoCountryCode=AA, agentCode=78200011, airlineCode=220, dateOfIssue=2018-06-19, billingPeriod=null, currency=RefundCurrency(code=ABC, decimals=0), passenger=PEPE, amounts=RefundAmounts(grossFare=0, lessGrossFareUsed=0, commissionAmount=0, commissionRate=0, spam=0, cancellationPenalty=0, miscellaneousFee=0, taxOnCancellationPenalty=0, taxOnMiscellaneousFee=0, commissionOnCpAndMfAmount=0, commissionOnCpAndMfRate=0, tax=0, refundToPassenger=0), partialRefund=false, netReporting=false, waiverCode=null, tourCode=null, dateOfIssueRelatedDocument=2000-01-02, dateOfAirlineAction=null, exchange=false, agentContact=null, airlineContact=null, settlementAuthorisationCode=null, customerFileReference=null, agentVatNumber=null, airlineVatNumber=null, originalIssue=null, airlineCodeRelatedDocument=220, relatedDocument=RelatedDocument(relatedTicketDocumentNumber=1234567890, relatedTicketCoupon1=true, relatedTicketCoupon2=false, relatedTicketCoupon3=false, relatedTicketCoupon4=false), statisticalCode=I, formOfPaymentAmounts=[], conjunctions=[], taxMiscellaneousFees=[], issueReason=Reason for Issuance, rejectionReason=null, airlineRemark=null, attachedFiles=null, comments=null, history=[RefundHistory(id=null, action=ATTACH_FILE, insertDateTime=2018-08-09T11:37:11.229Z, refundId=null, fileName=null)], agentRegistrationNumber=null, airlineRegistrationNumber=null)
2018-08-09 13:37:11.244  INFO 26020 --- [    Test worker] o.i.b.r.v.RefundUpdateValidator          : history cannot be modified
27294 [Test worker] INFO  org.iata.bsplink.commons.rest.exception.handler.ApplicationExceptionHandler  – &lt;400 Bad Request,ValidationErrorResponse(validationErrors=[org.iata.bsplink.commons.rest.response.validation.ValidationError@82c2092a]),{}&gt;
org.iata.bsplink.commons.rest.exception.ApplicationValidationException: Validation error
	at org.iata.bsplink.refund.validation.RefundUpdateValidator.validate(RefundUpdateValidator.java:62)
	at org.iata.bsplink.refund.validation.RefundUpdateValidator.validate(RefundUpdateValidator.java:81)
	at org.iata.bsplink.refund.controller.RefundController.updateRefund(RefundController.java:310)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:209)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:136)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:102)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:870)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:776)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:991)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:925)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:978)
	at org.springframework.web.servlet.FrameworkServlet.doPut(FrameworkServlet.java:892)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:664)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:855)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:66)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:742)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:166)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:99)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.HttpPutFormContentFilter.doFilterInternal(HttpPutFormContentFilter.java:109)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:81)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:200)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:166)
	at org.iata.bsplink.refund.controller.RefundControllerTest.testUpdateRefundModifyHistory(RefundControllerTest.java:315)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.springframework.test.context.junit4.statements.RunBeforeTestExecutionCallbacks.evaluate(RunBeforeTestExecutionCallbacks.java:73)
	at org.springframework.test.context.junit4.statements.RunAfterTestExecutionCallbacks.evaluate(RunAfterTestExecutionCallbacks.java:83)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75)
	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86)
	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:251)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)
	at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecutor.runTestClass(JUnitTestClassExecutor.java:116)
	at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecutor.execute(JUnitTestClassExecutor.java:59)
	at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecutor.execute(JUnitTestClassExecutor.java:39)
	at org.gradle.api.internal.tasks.testing.junit.AbstractJUnitTestClassProcessor.processTestClass(AbstractJUnitTestClassProcessor.java:66)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.processTestClass(SuiteTestClassProcessor.java:51)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:35)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:32)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:93)
	at com.sun.proxy.$Proxy1.processTestClass(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.processTestClass(TestWorker.java:109)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:35)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.remote.internal.hub.MessageHubBackedObjectConnection$DispatchWrapper.dispatch(MessageHubBackedObjectConnection.java:146)
	at org.gradle.internal.remote.internal.hub.MessageHubBackedObjectConnection$DispatchWrapper.dispatch(MessageHubBackedObjectConnection.java:128)
	at org.gradle.internal.remote.internal.hub.MessageHub$Handler.run(MessageHub.java:404)
	at org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:63)
	at org.gradle.internal.concurrent.ManagedExecutorImpl$1.run(ManagedExecutorImpl.java:46)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at org.gradle.internal.concurrent.ThreadFactoryImpl$ManagedThreadRunnable.run(ThreadFactoryImpl.java:55)
	at java.lang.Thread.run(Thread.java:748)
27309 [Test worker] INFO  org.springframework.test.context.transaction.TransactionContext  – Rolled back transaction for test context [DefaultTestContext@32e1cd1c testClass = RefundControllerTest, testInstance = org.iata.bsplink.refund.controller.RefundControllerTest@6ede1f7, testMethod = testUpdateRefundModifyHistory@RefundControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@1f5d4e4b testClass = RefundControllerTest, locations = '{}', classes = '{class org.iata.bsplink.refund.Application}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{app.host.local.protocol=local, app.host.sftp.protocol=sftp, org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@e7e8512, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@4ece6cea, [ImportsContextCustomizer@7e32a44a key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@7c81a5a0, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@2dc9c285, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@d444633b, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@794b4b8d], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -&gt; true]].
27311 [Test worker] INFO  org.springframework.test.context.transaction.TransactionContext  – Began transaction (1) for test context [DefaultTestContext@32e1cd1c testClass = RefundControllerTest, testInstance = org.iata.bsplink.refund.controller.RefundControllerTest@777909dc, testMethod = testChangeRefundStatusViaMassloadFileNameNotFound@RefundControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@1f5d4e4b testClass = RefundControllerTest, locations = '{}', classes = '{class org.iata.bsplink.refund.Application}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{app.host.local.protocol=local, app.host.sftp.protocol=sftp, org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@e7e8512, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@4ece6cea, [ImportsContextCustomizer@7e32a44a key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@7c81a5a0, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@2dc9c285, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@d444633b, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@794b4b8d], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -&gt; true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@494e061e]; rollback [true]
2018-08-09 13:37:11.268  INFO 26020 --- [    Test worker] o.i.b.r.controller.RefundController      : received request to change refund's status via massload file: null AAe9EARS_20001224_2209_123
27324 [Test worker] INFO  org.springframework.test.context.transaction.TransactionContext  – Rolled back transaction for test context [DefaultTestContext@32e1cd1c testClass = RefundControllerTest, testInstance = org.iata.bsplink.refund.controller.RefundControllerTest@777909dc, testMethod = testChangeRefundStatusViaMassloadFileNameNotFound@RefundControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@1f5d4e4b testClass = RefundControllerTest, locations = '{}', classes = '{class org.iata.bsplink.refund.Application}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{app.host.local.protocol=local, app.host.sftp.protocol=sftp, org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@e7e8512, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@4ece6cea, [ImportsContextCustomizer@7e32a44a key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@7c81a5a0, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@2dc9c285, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@d444633b, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@794b4b8d], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -&gt; true]].
27327 [Test worker] INFO  org.springframework.test.context.transaction.TransactionContext  – Began transaction (1) for test context [DefaultTestContext@32e1cd1c testClass = RefundControllerTest, testInstance = org.iata.bsplink.refund.controller.RefundControllerTest@2c21b44, testMethod = testChangeRefundStatusViaMassloadFileNameNotFoundBecauseOfStatus@RefundControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@1f5d4e4b testClass = RefundControllerTest, locations = '{}', classes = '{class org.iata.bsplink.refund.Application}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{app.host.local.protocol=local, app.host.sftp.protocol=sftp, org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@e7e8512, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@4ece6cea, [ImportsContextCustomizer@7e32a44a key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@7c81a5a0, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@2dc9c285, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@d444633b, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@794b4b8d], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -&gt; true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@494e061e]; rollback [true]
2018-08-09 13:37:11.282  INFO 26020 --- [    Test worker] o.i.b.r.controller.RefundController      : received request to change refund's status via massload file: Refund(id=110, ticketDocumentNumber=1234567890, status=DRAFT, isoCountryCode=AA, agentCode=78200011, airlineCode=220, dateOfIssue=2018-06-19, billingPeriod=null, currency=RefundCurrency(code=ABC, decimals=0), passenger=PEPE, amounts=RefundAmounts(grossFare=0, lessGrossFareUsed=0, commissionAmount=0, commissionRate=0, spam=0, cancellationPenalty=0, miscellaneousFee=0, taxOnCancellationPenalty=0, taxOnMiscellaneousFee=0, commissionOnCpAndMfAmount=0, commissionOnCpAndMfRate=0, tax=0, refundToPassenger=0), partialRefund=false, netReporting=false, waiverCode=null, tourCode=null, dateOfIssueRelatedDocument=2000-01-02, dateOfAirlineAction=null, exchange=false, agentContact=null, airlineContact=null, settlementAuthorisationCode=null, customerFileReference=null, agentVatNumber=null, airlineVatNumber=null, originalIssue=null, airlineCodeRelatedDocument=220, relatedDocument=RelatedDocument(relatedTicketDocumentNumber=1234567890, relatedTicketCoupon1=true, relatedTicketCoupon2=false, relatedTicketCoupon3=false, relatedTicketCoupon4=false), statisticalCode=I, formOfPaymentAmounts=[], conjunctions=[], taxMiscellaneousFees=[], issueReason=Reason for Issuance, rejectionReason=null, airlineRemark=null, attachedFiles=null, comments=null, history=null, agentRegistrationNumber=null, airlineRegistrationNumber=null) AAe9EARS_20001224_2209_123
27340 [Test worker] INFO  org.springframework.test.context.transaction.TransactionContext  – Rolled back transaction for test context [DefaultTestContext@32e1cd1c testClass = RefundControllerTest, testInstance = org.iata.bsplink.refund.controller.RefundControllerTest@2c21b44, testMethod = testChangeRefundStatusViaMassloadFileNameNotFoundBecauseOfStatus@RefundControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@1f5d4e4b testClass = RefundControllerTest, locations = '{}', classes = '{class org.iata.bsplink.refund.Application}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{app.host.local.protocol=local, app.host.sftp.protocol=sftp, org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@e7e8512, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@4ece6cea, [ImportsContextCustomizer@7e32a44a key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@7c81a5a0, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@2dc9c285, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@d444633b, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@794b4b8d], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -&gt; true]].
27342 [Test worker] INFO  org.springframework.test.context.transaction.TransactionContext  – Began transaction (1) for test context [DefaultTestContext@32e1cd1c testClass = RefundControllerTest, testInstance = org.iata.bsplink.refund.controller.RefundControllerTest@56f4e602, testMethod = testSaveComment@RefundControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@1f5d4e4b testClass = RefundControllerTest, locations = '{}', classes = '{class org.iata.bsplink.refund.Application}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{app.host.local.protocol=local, app.host.sftp.protocol=sftp, org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@e7e8512, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@4ece6cea, [ImportsContextCustomizer@7e32a44a key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@7c81a5a0, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@2dc9c285, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@d444633b, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@794b4b8d], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -&gt; true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@494e061e]; rollback [true]
2018-08-09 13:37:11.297  INFO 26020 --- [    Test worker] o.i.b.r.controller.RefundController      : received request for creating comment: CommentRequest(text=Text one)
2018-08-09 13:37:11.297  INFO 26020 --- [    Test worker] o.i.b.refund.service.CommentService      : Saving Comment: CommentRequest(text=Text one)
2018-08-09 13:37:11.299  INFO 26020 --- [    Test worker] o.i.b.refund.service.CommentService      : Saving refund history: RefundHistory(id=null, action=ADD_COMMENT, insertDateTime=2018-08-09T11:37:11.299Z, refundId=111, fileName=null)
2018-08-09 13:37:11.299  INFO 26020 --- [    Test worker] o.i.b.r.service.RefundHistoryService     : Saving refund history: RefundHistory(id=null, action=ADD_COMMENT, insertDateTime=2018-08-09T11:37:11.299Z, refundId=111, fileName=null)
2018-08-09 13:37:11.304  INFO 26020 --- [    Test worker] o.i.b.refund.service.CommentService      : Comment saved: Comment(id=112, text=Text one, insertDateTime=2018-08-09T11:37:11.297Z, refundId=111)
2018-08-09 13:37:11.305  INFO 26020 --- [    Test worker] o.i.b.r.controller.RefundController      : responding with response: Comment(id=112, text=Text one, insertDateTime=2018-08-09T11:37:11.297Z, refundId=111)
27357 [Test worker] INFO  org.springframework.test.context.transaction.TransactionContext  – Rolled back transaction for test context [DefaultTestContext@32e1cd1c testClass = RefundControllerTest, testInstance = org.iata.bsplink.refund.controller.RefundControllerTest@56f4e602, testMethod = testSaveComment@RefundControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@1f5d4e4b testClass = RefundControllerTest, locations = '{}', classes = '{class org.iata.bsplink.refund.Application}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{app.host.local.protocol=local, app.host.sftp.protocol=sftp, org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@e7e8512, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@4ece6cea, [ImportsContextCustomizer@7e32a44a key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@7c81a5a0, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@2dc9c285, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@d444633b, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@794b4b8d], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -&gt; true]].
27359 [Test worker] INFO  org.springframework.test.context.transaction.TransactionContext  – Began transaction (1) for test context [DefaultTestContext@32e1cd1c testClass = RefundControllerTest, testInstance = org.iata.bsplink.refund.controller.RefundControllerTest@6592a51c, testMethod = testUpdateRefundWithFileNameBadRequestIncorrectAirline@RefundControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@1f5d4e4b testClass = RefundControllerTest, locations = '{}', classes = '{class org.iata.bsplink.refund.Application}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{app.host.local.protocol=local, app.host.sftp.protocol=sftp, org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@e7e8512, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@4ece6cea, [ImportsContextCustomizer@7e32a44a key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@7c81a5a0, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@2dc9c285, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@d444633b, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@794b4b8d], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -&gt; true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@494e061e]; rollback [true]
2018-08-09 13:37:11.325  INFO 26020 --- [    Test worker] o.i.b.r.v.RefundUpdateValidator          : Validating refund to update: Refund(id=114, ticketDocumentNumber=null, status=PENDING, isoCountryCode=AA, agentCode=78200011, airlineCode=123, dateOfIssue=2018-06-19, billingPeriod=null, currency=RefundCurrency(code=ABC, decimals=0), passenger=PEPE, amounts=RefundAmounts(grossFare=0, lessGrossFareUsed=0, commissionAmount=0, commissionRate=0, spam=0, cancellationPenalty=0, miscellaneousFee=0, taxOnCancellationPenalty=0, taxOnMiscellaneousFee=0, commissionOnCpAndMfAmount=0, commissionOnCpAndMfRate=0, tax=0, refundToPassenger=0), partialRefund=false, netReporting=false, waiverCode=null, tourCode=null, dateOfIssueRelatedDocument=2000-01-02, dateOfAirlineAction=null, exchange=false, agentContact=null, airlineContact=null, settlementAuthorisationCode=null, customerFileReference=null, agentVatNumber=null, airlineVatNumber=null, originalIssue=null, airlineCodeRelatedDocument=220, relatedDocument=RelatedDocument(relatedTicketDocumentNumber=1234567890, relatedTicketCoupon1=true, relatedTicketCoupon2=false, relatedTicketCoupon3=false, relatedTicketCoupon4=false), statisticalCode=I, formOfPaymentAmounts=[], conjunctions=[], taxMiscellaneousFees=[], issueReason=Reason for Issuance, rejectionReason=null, airlineRemark=null, attachedFiles=null, comments=null, history=null, agentRegistrationNumber=null, airlineRegistrationNumber=null)
27376 [Test worker] INFO  org.iata.bsplink.commons.rest.exception.handler.ApplicationExceptionHandler  – &lt;400 Bad Request,ValidationErrorResponse(validationErrors=[org.iata.bsplink.commons.rest.response.validation.ValidationError@178dfd85]),{}&gt;
org.iata.bsplink.commons.rest.exception.ApplicationValidationException: Validation error
	at org.iata.bsplink.refund.validation.RefundUpdateValidator.validate(RefundUpdateValidator.java:62)
	at org.iata.bsplink.refund.validation.MassloadValidator.validate(MassloadValidator.java:34)
	at org.iata.bsplink.refund.controller.RefundController.updateRefundViaMassload(RefundController.java:454)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:209)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:136)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:102)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:870)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:776)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:991)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:925)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:978)
	at org.springframework.web.servlet.FrameworkServlet.doPut(FrameworkServlet.java:892)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:664)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:855)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:66)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:742)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:166)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:99)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.HttpPutFormContentFilter.doFilterInternal(HttpPutFormContentFilter.java:109)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:81)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:200)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:166)
	at org.iata.bsplink.refund.controller.RefundControllerTest.testUpdateRefundWithFileNameBadRequestIncorrectAirline(RefundControllerTest.java:965)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.springframework.test.context.junit4.statements.RunBeforeTestExecutionCallbacks.evaluate(RunBeforeTestExecutionCallbacks.java:73)
	at org.springframework.test.context.junit4.statements.RunAfterTestExecutionCallbacks.evaluate(RunAfterTestExecutionCallbacks.java:83)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75)
	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86)
	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:251)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)
	at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecutor.runTestClass(JUnitTestClassExecutor.java:116)
	at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecutor.execute(JUnitTestClassExecutor.java:59)
	at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecutor.execute(JUnitTestClassExecutor.java:39)
	at org.gradle.api.internal.tasks.testing.junit.AbstractJUnitTestClassProcessor.processTestClass(AbstractJUnitTestClassProcessor.java:66)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.processTestClass(SuiteTestClassProcessor.java:51)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:35)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:32)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:93)
	at com.sun.proxy.$Proxy1.processTestClass(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.processTestClass(TestWorker.java:109)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:35)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.remote.internal.hub.MessageHubBackedObjectConnection$DispatchWrapper.dispatch(MessageHubBackedObjectConnection.java:146)
	at org.gradle.internal.remote.internal.hub.MessageHubBackedObjectConnection$DispatchWrapper.dispatch(MessageHubBackedObjectConnection.java:128)
	at org.gradle.internal.remote.internal.hub.MessageHub$Handler.run(MessageHub.java:404)
	at org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:63)
	at org.gradle.internal.concurrent.ManagedExecutorImpl$1.run(ManagedExecutorImpl.java:46)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at org.gradle.internal.concurrent.ThreadFactoryImpl$ManagedThreadRunnable.run(ThreadFactoryImpl.java:55)
	at java.lang.Thread.run(Thread.java:748)
27388 [Test worker] INFO  org.springframework.test.context.transaction.TransactionContext  – Rolled back transaction for test context [DefaultTestContext@32e1cd1c testClass = RefundControllerTest, testInstance = org.iata.bsplink.refund.controller.RefundControllerTest@6592a51c, testMethod = testUpdateRefundWithFileNameBadRequestIncorrectAirline@RefundControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@1f5d4e4b testClass = RefundControllerTest, locations = '{}', classes = '{class org.iata.bsplink.refund.Application}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{app.host.local.protocol=local, app.host.sftp.protocol=sftp, org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@e7e8512, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@4ece6cea, [ImportsContextCustomizer@7e32a44a key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@7c81a5a0, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@2dc9c285, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@d444633b, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@794b4b8d], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -&gt; true]].
27391 [Test worker] INFO  org.springframework.test.context.transaction.TransactionContext  – Began transaction (1) for test context [DefaultTestContext@32e1cd1c testClass = RefundControllerTest, testInstance = org.iata.bsplink.refund.controller.RefundControllerTest@6630d5bc, testMethod = testChangeRefundStatusViaMassloadFileNameIncorrectAirline@RefundControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@1f5d4e4b testClass = RefundControllerTest, locations = '{}', classes = '{class org.iata.bsplink.refund.Application}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{app.host.local.protocol=local, app.host.sftp.protocol=sftp, org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@e7e8512, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@4ece6cea, [ImportsContextCustomizer@7e32a44a key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@7c81a5a0, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@2dc9c285, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@d444633b, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@794b4b8d], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -&gt; true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@494e061e]; rollback [true]
2018-08-09 13:37:11.346  INFO 26020 --- [    Test worker] o.i.b.r.controller.RefundController      : received request to change refund's status via massload file: Refund(id=115, ticketDocumentNumber=1234567890, status=PENDING, isoCountryCode=AA, agentCode=78200011, airlineCode=123, dateOfIssue=2018-06-19, billingPeriod=null, currency=RefundCurrency(code=ABC, decimals=0), passenger=PEPE, amounts=RefundAmounts(grossFare=0, lessGrossFareUsed=0, commissionAmount=0, commissionRate=0, spam=0, cancellationPenalty=0, miscellaneousFee=0, taxOnCancellationPenalty=0, taxOnMiscellaneousFee=0, commissionOnCpAndMfAmount=0, commissionOnCpAndMfRate=0, tax=0, refundToPassenger=0), partialRefund=false, netReporting=false, waiverCode=null, tourCode=null, dateOfIssueRelatedDocument=2000-01-02, dateOfAirlineAction=null, exchange=false, agentContact=null, airlineContact=null, settlementAuthorisationCode=null, customerFileReference=null, agentVatNumber=null, airlineVatNumber=null, originalIssue=null, airlineCodeRelatedDocument=220, relatedDocument=RelatedDocument(relatedTicketDocumentNumber=1234567890, relatedTicketCoupon1=true, relatedTicketCoupon2=false, relatedTicketCoupon3=false, relatedTicketCoupon4=false), statisticalCode=I, formOfPaymentAmounts=[], conjunctions=[], taxMiscellaneousFees=[], issueReason=Reason for Issuance, rejectionReason=null, airlineRemark=null, attachedFiles=null, comments=null, history=null, agentRegistrationNumber=null, airlineRegistrationNumber=null) AAe9EARS_20001224_2209_123
27396 [Test worker] INFO  org.iata.bsplink.commons.rest.exception.handler.ApplicationExceptionHandler  – &lt;400 Bad Request,ValidationErrorResponse(validationErrors=[org.iata.bsplink.commons.rest.response.validation.ValidationError@178dfd85]),{}&gt;
org.iata.bsplink.commons.rest.exception.ApplicationValidationException: Validation error
	at org.iata.bsplink.refund.controller.RefundController.changeRefundStatusViaMassload(RefundController.java:498)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:209)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:136)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:102)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:870)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:776)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:991)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:925)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:978)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:881)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:661)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:855)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:66)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:742)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:166)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:99)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.HttpPutFormContentFilter.doFilterInternal(HttpPutFormContentFilter.java:109)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:81)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:200)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:166)
	at org.iata.bsplink.refund.controller.RefundControllerTest.testChangeRefundStatusViaMassloadFileNameIncorrectAirline(RefundControllerTest.java:1074)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.springframework.test.context.junit4.statements.RunBeforeTestExecutionCallbacks.evaluate(RunBeforeTestExecutionCallbacks.java:73)
	at org.springframework.test.context.junit4.statements.RunAfterTestExecutionCallbacks.evaluate(RunAfterTestExecutionCallbacks.java:83)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75)
	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86)
	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:251)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)
	at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecutor.runTestClass(JUnitTestClassExecutor.java:116)
	at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecutor.execute(JUnitTestClassExecutor.java:59)
	at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecutor.execute(JUnitTestClassExecutor.java:39)
	at org.gradle.api.internal.tasks.testing.junit.AbstractJUnitTestClassProcessor.processTestClass(AbstractJUnitTestClassProcessor.java:66)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.processTestClass(SuiteTestClassProcessor.java:51)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:35)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:32)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:93)
	at com.sun.proxy.$Proxy1.processTestClass(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.processTestClass(TestWorker.java:109)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:35)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.remote.internal.hub.MessageHubBackedObjectConnection$DispatchWrapper.dispatch(MessageHubBackedObjectConnection.java:146)
	at org.gradle.internal.remote.internal.hub.MessageHubBackedObjectConnection$DispatchWrapper.dispatch(MessageHubBackedObjectConnection.java:128)
	at org.gradle.internal.remote.internal.hub.MessageHub$Handler.run(MessageHub.java:404)
	at org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:63)
	at org.gradle.internal.concurrent.ManagedExecutorImpl$1.run(ManagedExecutorImpl.java:46)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at org.gradle.internal.concurrent.ThreadFactoryImpl$ManagedThreadRunnable.run(ThreadFactoryImpl.java:55)
	at java.lang.Thread.run(Thread.java:748)
27410 [Test worker] INFO  org.springframework.test.context.transaction.TransactionContext  – Rolled back transaction for test context [DefaultTestContext@32e1cd1c testClass = RefundControllerTest, testInstance = org.iata.bsplink.refund.controller.RefundControllerTest@6630d5bc, testMethod = testChangeRefundStatusViaMassloadFileNameIncorrectAirline@RefundControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@1f5d4e4b testClass = RefundControllerTest, locations = '{}', classes = '{class org.iata.bsplink.refund.Application}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{app.host.local.protocol=local, app.host.sftp.protocol=sftp, org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@e7e8512, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@4ece6cea, [ImportsContextCustomizer@7e32a44a key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@7c81a5a0, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@2dc9c285, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@d444633b, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@794b4b8d], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -&gt; true]].
27412 [Test worker] INFO  org.springframework.test.context.transaction.TransactionContext  – Began transaction (1) for test context [DefaultTestContext@32e1cd1c testClass = RefundControllerTest, testInstance = org.iata.bsplink.refund.controller.RefundControllerTest@5ae6d503, testMethod = testUpdateRefundStatusOk@RefundControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@1f5d4e4b testClass = RefundControllerTest, locations = '{}', classes = '{class org.iata.bsplink.refund.Application}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{app.host.local.protocol=local, app.host.sftp.protocol=sftp, org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@e7e8512, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@4ece6cea, [ImportsContextCustomizer@7e32a44a key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@7c81a5a0, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@2dc9c285, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@d444633b, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@794b4b8d], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -&gt; true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@494e061e]; rollback [true]
2018-08-09 13:37:11.364  INFO 26020 --- [    Test worker] o.i.b.refund.service.RefundService       : Saving refund : Refund(id=null, ticketDocumentNumber=1234567890, status=PENDING, isoCountryCode=AA, agentCode=78200011, airlineCode=220, dateOfIssue=2018-06-19, billingPeriod=null, currency=RefundCurrency(code=ABC, decimals=0), passenger=PEPE, amounts=RefundAmounts(grossFare=0, lessGrossFareUsed=0, commissionAmount=0, commissionRate=0, spam=0, cancellationPenalty=0, miscellaneousFee=0, taxOnCancellationPenalty=0, taxOnMiscellaneousFee=0, commissionOnCpAndMfAmount=0, commissionOnCpAndMfRate=0, tax=0, refundToPassenger=0), partialRefund=false, netReporting=false, waiverCode=null, tourCode=null, dateOfIssueRelatedDocument=2000-01-02, dateOfAirlineAction=null, exchange=false, agentContact=null, airlineContact=null, settlementAuthorisationCode=null, customerFileReference=null, agentVatNumber=null, airlineVatNumber=null, originalIssue=null, airlineCodeRelatedDocument=220, relatedDocument=RelatedDocument(relatedTicketDocumentNumber=1234567890, relatedTicketCoupon1=true, relatedTicketCoupon2=false, relatedTicketCoupon3=false, relatedTicketCoupon4=false), statisticalCode=I, formOfPaymentAmounts=[], conjunctions=[], taxMiscellaneousFees=[], issueReason=Reason for Issuance, rejectionReason=null, airlineRemark=null, attachedFiles=null, comments=null, history=null, agentRegistrationNumber=null, airlineRegistrationNumber=null)
2018-08-09 13:37:11.365  INFO 26020 --- [    Test worker] o.i.b.refund.service.RefundService       : Saving refund history for: Refund(id=116, ticketDocumentNumber=1234567890, status=PENDING, isoCountryCode=AA, agentCode=78200011, airlineCode=220, dateOfIssue=2018-06-19, billingPeriod=null, currency=RefundCurrency(code=ABC, decimals=0), passenger=PEPE, amounts=RefundAmounts(grossFare=0, lessGrossFareUsed=0, commissionAmount=0, commissionRate=0, spam=0, cancellationPenalty=0, miscellaneousFee=0, taxOnCancellationPenalty=0, taxOnMiscellaneousFee=0, commissionOnCpAndMfAmount=0, commissionOnCpAndMfRate=0, tax=0, refundToPassenger=0), partialRefund=false, netReporting=false, waiverCode=null, tourCode=null, dateOfIssueRelatedDocument=2000-01-02, dateOfAirlineAction=null, exchange=false, agentContact=null, airlineContact=null, settlementAuthorisationCode=null, customerFileReference=null, agentVatNumber=null, airlineVatNumber=null, originalIssue=null, airlineCodeRelatedDocument=220, relatedDocument=RelatedDocument(relatedTicketDocumentNumber=1234567890, relatedTicketCoupon1=true, relatedTicketCoupon2=false, relatedTicketCoupon3=false, relatedTicketCoupon4=false), statisticalCode=I, formOfPaymentAmounts=[], conjunctions=[], taxMiscellaneousFees=[], issueReason=Reason for Issuance, rejectionReason=null, airlineRemark=null, attachedFiles=null, comments=null, history=null, agentRegistrationNumber=null, airlineRegistrationNumber=null) Action: REFUND_ISSUE
2018-08-09 13:37:11.365  INFO 26020 --- [    Test worker] o.i.b.r.service.RefundHistoryService     : Saving refund history: RefundHistory(id=null, action=REFUND_ISSUE, insertDateTime=2018-08-09T11:37:11.365Z, refundId=116, fileName=null)
2018-08-09 13:37:11.366  INFO 26020 --- [    Test worker] o.i.b.refund.service.RefundService       : Refund history saved: RefundHistory(id=117, action=REFUND_ISSUE, insertDateTime=2018-08-09T11:37:11.365Z, refundId=116, fileName=null)
2018-08-09 13:37:11.366  INFO 26020 --- [    Test worker] o.i.b.r.service.RefundHistoryService     : Getting refund history by id: 116
2018-08-09 13:37:11.379  INFO 26020 --- [    Test worker] o.i.b.r.controller.RefundController      : received request to change refund's status: Refund(id=116, ticketDocumentNumber=1234567890, status=PENDING, isoCountryCode=AA, agentCode=78200011, airlineCode=220, dateOfIssue=2018-06-19, billingPeriod=null, currency=RefundCurrency(code=ABC, decimals=0), passenger=PEPE, amounts=RefundAmounts(grossFare=0, lessGrossFareUsed=0, commissionAmount=0, commissionRate=0, spam=0, cancellationPenalty=0, miscellaneousFee=0, taxOnCancellationPenalty=0, taxOnMiscellaneousFee=0, commissionOnCpAndMfAmount=0, commissionOnCpAndMfRate=0, tax=0, refundToPassenger=0), partialRefund=false, netReporting=false, waiverCode=null, tourCode=null, dateOfIssueRelatedDocument=2000-01-02, dateOfAirlineAction=null, exchange=false, agentContact=null, airlineContact=null, settlementAuthorisationCode=null, customerFileReference=null, agentVatNumber=null, airlineVatNumber=null, originalIssue=null, airlineCodeRelatedDocument=220, relatedDocument=RelatedDocument(relatedTicketDocumentNumber=1234567890, relatedTicketCoupon1=true, relatedTicketCoupon2=false, relatedTicketCoupon3=false, relatedTicketCoupon4=false), statisticalCode=I, formOfPaymentAmounts=[], conjunctions=[], taxMiscellaneousFees=[], issueReason=Reason for Issuance, rejectionReason=null, airlineRemark=null, attachedFiles=null, comments=null, history=[RefundHistory(id=117, action=REFUND_ISSUE, insertDateTime=2018-08-09T11:37:11.365Z, refundId=116, fileName=null)], agentRegistrationNumber=null, airlineRegistrationNumber=null)
2018-08-09 13:37:11.379  INFO 26020 --- [    Test worker] o.i.b.r.v.RefundStatusValidator          : Validating status from PENDING to UNDER_INVESTIGATION
2018-08-09 13:37:11.380  INFO 26020 --- [    Test worker] o.i.b.r.v.RefundStatusValidator          : Setting billing period and rejection reason to null
2018-08-09 13:37:11.380  INFO 26020 --- [    Test worker] o.i.b.refund.service.RefundService       : Updating refund : Refund(id=116, ticketDocumentNumber=1234567890, status=UNDER_INVESTIGATION, isoCountryCode=AA, agentCode=78200011, airlineCode=220, dateOfIssue=2018-06-19, billingPeriod=null, currency=RefundCurrency(code=ABC, decimals=0), passenger=PEPE, amounts=RefundAmounts(grossFare=0, lessGrossFareUsed=0, commissionAmount=0, commissionRate=0, spam=0, cancellationPenalty=0, miscellaneousFee=0, taxOnCancellationPenalty=0, taxOnMiscellaneousFee=0, commissionOnCpAndMfAmount=0, commissionOnCpAndMfRate=0, tax=0, refundToPassenger=0), partialRefund=false, netReporting=false, waiverCode=null, tourCode=null, dateOfIssueRelatedDocument=2000-01-02, dateOfAirlineAction=2018-08-09, exchange=false, agentContact=null, airlineContact=null, settlementAuthorisationCode=null, customerFileReference=null, agentVatNumber=null, airlineVatNumber=null, originalIssue=null, airlineCodeRelatedDocument=220, relatedDocument=RelatedDocument(relatedTicketDocumentNumber=1234567890, relatedTicketCoupon1=true, relatedTicketCoupon2=false, relatedTicketCoupon3=false, relatedTicketCoupon4=false), statisticalCode=I, formOfPaymentAmounts=[], conjunctions=[], taxMiscellaneousFees=[], issueReason=Reason for Issuance, rejectionReason=null, airlineRemark=airlineRemark, attachedFiles=null, comments=null, history=[RefundHistory(id=117, action=REFUND_ISSUE, insertDateTime=2018-08-09T11:37:11.365Z, refundId=116, fileName=null)], agentRegistrationNumber=null, airlineRegistrationNumber=null)
2018-08-09 13:37:11.380  INFO 26020 --- [    Test worker] o.i.b.refund.service.RefundService       : Prepare refund history for: Refund(id=116, ticketDocumentNumber=1234567890, status=UNDER_INVESTIGATION, isoCountryCode=AA, agentCode=78200011, airlineCode=220, dateOfIssue=2018-06-19, billingPeriod=null, currency=RefundCurrency(code=ABC, decimals=0), passenger=PEPE, amounts=RefundAmounts(grossFare=0, lessGrossFareUsed=0, commissionAmount=0, commissionRate=0, spam=0, cancellationPenalty=0, miscellaneousFee=0, taxOnCancellationPenalty=0, taxOnMiscellaneousFee=0, commissionOnCpAndMfAmount=0, commissionOnCpAndMfRate=0, tax=0, refundToPassenger=0), partialRefund=false, netReporting=false, waiverCode=null, tourCode=null, dateOfIssueRelatedDocument=2000-01-02, dateOfAirlineAction=2018-08-09, exchange=false, agentContact=null, airlineContact=null, settlementAuthorisationCode=null, customerFileReference=null, agentVatNumber=null, airlineVatNumber=null, originalIssue=null, airlineCodeRelatedDocument=220, relatedDocument=RelatedDocument(relatedTicketDocumentNumber=1234567890, relatedTicketCoupon1=true, relatedTicketCoupon2=false, relatedTicketCoupon3=false, relatedTicketCoupon4=false), statisticalCode=I, formOfPaymentAmounts=[], conjunctions=[], taxMiscellaneousFees=[], issueReason=Reason for Issuance, rejectionReason=null, airlineRemark=airlineRemark, attachedFiles=null, comments=null, history=[RefundHistory(id=117, action=REFUND_ISSUE, insertDateTime=2018-08-09T11:37:11.365Z, refundId=116, fileName=null)], agentRegistrationNumber=null, airlineRegistrationNumber=null) Action: MODIFY
2018-08-09 13:37:11.380  INFO 26020 --- [    Test worker] o.i.b.refund.service.RefundService       : Saving refund history for: Refund(id=116, ticketDocumentNumber=1234567890, status=UNDER_INVESTIGATION, isoCountryCode=AA, agentCode=78200011, airlineCode=220, dateOfIssue=2018-06-19, billingPeriod=null, currency=RefundCurrency(code=ABC, decimals=0), passenger=PEPE, amounts=RefundAmounts(grossFare=0, lessGrossFareUsed=0, commissionAmount=0, commissionRate=0, spam=0, cancellationPenalty=0, miscellaneousFee=0, taxOnCancellationPenalty=0, taxOnMiscellaneousFee=0, commissionOnCpAndMfAmount=0, commissionOnCpAndMfRate=0, tax=0, refundToPassenger=0), partialRefund=false, netReporting=false, waiverCode=null, tourCode=null, dateOfIssueRelatedDocument=2000-01-02, dateOfAirlineAction=2018-08-09, exchange=false, agentContact=null, airlineContact=null, settlementAuthorisationCode=null, customerFileReference=null, agentVatNumber=null, airlineVatNumber=null, originalIssue=null, airlineCodeRelatedDocument=220, relatedDocument=RelatedDocument(relatedTicketDocumentNumber=1234567890, relatedTicketCoupon1=true, relatedTicketCoupon2=false, relatedTicketCoupon3=false, relatedTicketCoupon4=false), statisticalCode=I, formOfPaymentAmounts=[], conjunctions=[], taxMiscellaneousFees=[], issueReason=Reason for Issuance, rejectionReason=null, airlineRemark=airlineRemark, attachedFiles=null, comments=null, history=[RefundHistory(id=117, action=REFUND_ISSUE, insertDateTime=2018-08-09T11:37:11.365Z, refundId=116, fileName=null), RefundHistory(id=null, action=MODIFY, insertDateTime=2018-08-09T11:37:11.380Z, refundId=116, fileName=null)], agentRegistrationNumber=null, airlineRegistrationNumber=null) Action: MODIFY
2018-08-09 13:37:11.380  INFO 26020 --- [    Test worker] o.i.b.r.service.RefundHistoryService     : Saving refund history: RefundHistory(id=null, action=MODIFY, insertDateTime=2018-08-09T11:37:11.380Z, refundId=116, fileName=null)
2018-08-09 13:37:11.381  INFO 26020 --- [    Test worker] o.i.b.refund.service.RefundService       : Refund history saved: RefundHistory(id=118, action=MODIFY, insertDateTime=2018-08-09T11:37:11.380Z, refundId=116, fileName=null)
2018-08-09 13:37:11.381  INFO 26020 --- [    Test worker] o.i.b.r.service.RefundHistoryService     : Getting refund history by id: 116
2018-08-09 13:37:11.388  INFO 26020 --- [    Test worker] o.i.b.refund.service.RefundService       : Getting last updated Refund to retrieve
2018-08-09 13:37:11.389  INFO 26020 --- [    Test worker] o.i.b.r.controller.RefundController      : responding with response: Refund(id=116, ticketDocumentNumber=1234567890, status=UNDER_INVESTIGATION, isoCountryCode=AA, agentCode=78200011, airlineCode=220, dateOfIssue=2018-06-19, billingPeriod=null, currency=RefundCurrency(code=ABC, decimals=0), passenger=PEPE, amounts=RefundAmounts(grossFare=0, lessGrossFareUsed=0, commissionAmount=0, commissionRate=0, spam=0, cancellationPenalty=0, miscellaneousFee=0, taxOnCancellationPenalty=0, taxOnMiscellaneousFee=0, commissionOnCpAndMfAmount=0, commissionOnCpAndMfRate=0, tax=0, refundToPassenger=0), partialRefund=false, netReporting=false, waiverCode=null, tourCode=null, dateOfIssueRelatedDocument=2000-01-02, dateOfAirlineAction=2018-08-09, exchange=false, agentContact=null, airlineContact=null, settlementAuthorisationCode=null, customerFileReference=null, agentVatNumber=null, airlineVatNumber=null, originalIssue=null, airlineCodeRelatedDocument=220, relatedDocument=RelatedDocument(relatedTicketDocumentNumber=1234567890, relatedTicketCoupon1=true, relatedTicketCoupon2=false, relatedTicketCoupon3=false, relatedTicketCoupon4=false), statisticalCode=I, formOfPaymentAmounts=[], conjunctions=[], taxMiscellaneousFees=[], issueReason=Reason for Issuance, rejectionReason=null, airlineRemark=airlineRemark, attachedFiles=null, comments=null, history=[RefundHistory(id=117, action=REFUND_ISSUE, insertDateTime=2018-08-09T11:37:11.365Z, refundId=116, fileName=null), RefundHistory(id=119, action=MODIFY, insertDateTime=2018-08-09T11:37:11.380Z, refundId=116, fileName=null)], agentRegistrationNumber=null, airlineRegistrationNumber=null)
27443 [Test worker] INFO  org.springframework.test.context.transaction.TransactionContext  – Rolled back transaction for test context [DefaultTestContext@32e1cd1c testClass = RefundControllerTest, testInstance = org.iata.bsplink.refund.controller.RefundControllerTest@5ae6d503, testMethod = testUpdateRefundStatusOk@RefundControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@1f5d4e4b testClass = RefundControllerTest, locations = '{}', classes = '{class org.iata.bsplink.refund.Application}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{app.host.local.protocol=local, app.host.sftp.protocol=sftp, org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@e7e8512, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@4ece6cea, [ImportsContextCustomizer@7e32a44a key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@7c81a5a0, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@2dc9c285, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@d444633b, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@794b4b8d], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -&gt; true]].
27446 [Test worker] INFO  org.springframework.test.context.transaction.TransactionContext  – Began transaction (1) for test context [DefaultTestContext@32e1cd1c testClass = RefundControllerTest, testInstance = org.iata.bsplink.refund.controller.RefundControllerTest@65d4642b, testMethod = testGetAllCommentsForRefundNotFound@RefundControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@1f5d4e4b testClass = RefundControllerTest, locations = '{}', classes = '{class org.iata.bsplink.refund.Application}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{app.host.local.protocol=local, app.host.sftp.protocol=sftp, org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@e7e8512, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@4ece6cea, [ImportsContextCustomizer@7e32a44a key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@7c81a5a0, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@2dc9c285, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@d444633b, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@794b4b8d], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -&gt; true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@494e061e]; rollback [true]
2018-08-09 13:37:11.400  INFO 26020 --- [    Test worker] o.i.b.r.controller.RefundController      : received request for getting comments with refund: null
27451 [Test worker] INFO  org.springframework.test.context.transaction.TransactionContext  – Rolled back transaction for test context [DefaultTestContext@32e1cd1c testClass = RefundControllerTest, testInstance = org.iata.bsplink.refund.controller.RefundControllerTest@65d4642b, testMethod = testGetAllCommentsForRefundNotFound@RefundControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@1f5d4e4b testClass = RefundControllerTest, locations = '{}', classes = '{class org.iata.bsplink.refund.Application}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{app.host.local.protocol=local, app.host.sftp.protocol=sftp, org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@e7e8512, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@4ece6cea, [ImportsContextCustomizer@7e32a44a key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@7c81a5a0, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@2dc9c285, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@d444633b, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@794b4b8d], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -&gt; true]].
27456 [Test worker] INFO  org.springframework.test.context.transaction.TransactionContext  – Began transaction (1) for test context [DefaultTestContext@32e1cd1c testClass = RefundControllerTest, testInstance = org.iata.bsplink.refund.controller.RefundControllerTest@666850e6, testMethod = testUpdateRefundWithIncorrectAirlineInFileName@RefundControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@1f5d4e4b testClass = RefundControllerTest, locations = '{}', classes = '{class org.iata.bsplink.refund.Application}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{app.host.local.protocol=local, app.host.sftp.protocol=sftp, org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@e7e8512, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@4ece6cea, [ImportsContextCustomizer@7e32a44a key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@7c81a5a0, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@2dc9c285, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@d444633b, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@794b4b8d], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -&gt; true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@494e061e]; rollback [true]
2018-08-09 13:37:11.424  INFO 26020 --- [    Test worker] o.i.b.r.v.RefundUpdateValidator          : Validating refund to update: Refund(id=120, ticketDocumentNumber=null, status=PENDING, isoCountryCode=AA, agentCode=78200011, airlineCode=220, dateOfIssue=2018-06-19, billingPeriod=null, currency=RefundCurrency(code=ABC, decimals=0), passenger=PEPE, amounts=RefundAmounts(grossFare=0, lessGrossFareUsed=0, commissionAmount=0, commissionRate=0, spam=0, cancellationPenalty=0, miscellaneousFee=0, taxOnCancellationPenalty=0, taxOnMiscellaneousFee=0, commissionOnCpAndMfAmount=0, commissionOnCpAndMfRate=0, tax=0, refundToPassenger=0), partialRefund=false, netReporting=false, waiverCode=null, tourCode=null, dateOfIssueRelatedDocument=2000-01-02, dateOfAirlineAction=null, exchange=false, agentContact=null, airlineContact=null, settlementAuthorisationCode=null, customerFileReference=null, agentVatNumber=null, airlineVatNumber=null, originalIssue=null, airlineCodeRelatedDocument=220, relatedDocument=RelatedDocument(relatedTicketDocumentNumber=1234567890, relatedTicketCoupon1=true, relatedTicketCoupon2=false, relatedTicketCoupon3=false, relatedTicketCoupon4=false), statisticalCode=I, formOfPaymentAmounts=[], conjunctions=[], taxMiscellaneousFees=[], issueReason=Reason for Issuance, rejectionReason=null, airlineRemark=null, attachedFiles=null, comments=null, history=null, agentRegistrationNumber=null, airlineRegistrationNumber=null)
27475 [Test worker] INFO  org.iata.bsplink.commons.rest.exception.handler.ApplicationExceptionHandler  – &lt;400 Bad Request,ValidationErrorResponse(validationErrors=[org.iata.bsplink.commons.rest.response.validation.ValidationError@178dfd85]),{}&gt;
org.iata.bsplink.commons.rest.exception.ApplicationValidationException: Validation error
	at org.iata.bsplink.refund.validation.RefundUpdateValidator.validate(RefundUpdateValidator.java:62)
	at org.iata.bsplink.refund.validation.MassloadValidator.validate(MassloadValidator.java:34)
	at org.iata.bsplink.refund.controller.RefundController.updateRefundViaMassload(RefundController.java:454)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:209)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:136)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:102)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:870)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:776)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:991)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:925)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:978)
	at org.springframework.web.servlet.FrameworkServlet.doPut(FrameworkServlet.java:892)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:664)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:855)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:66)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:742)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:166)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:99)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.HttpPutFormContentFilter.doFilterInternal(HttpPutFormContentFilter.java:109)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:81)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:200)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:166)
	at org.iata.bsplink.refund.controller.RefundControllerTest.testUpdateRefundWithIncorrectAirlineInFileName(RefundControllerTest.java:928)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.springframework.test.context.junit4.statements.RunBeforeTestExecutionCallbacks.evaluate(RunBeforeTestExecutionCallbacks.java:73)
	at org.springframework.test.context.junit4.statements.RunAfterTestExecutionCallbacks.evaluate(RunAfterTestExecutionCallbacks.java:83)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75)
	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86)
	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:251)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)
	at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecutor.runTestClass(JUnitTestClassExecutor.java:116)
	at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecutor.execute(JUnitTestClassExecutor.java:59)
	at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecutor.execute(JUnitTestClassExecutor.java:39)
	at org.gradle.api.internal.tasks.testing.junit.AbstractJUnitTestClassProcessor.processTestClass(AbstractJUnitTestClassProcessor.java:66)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.processTestClass(SuiteTestClassProcessor.java:51)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:35)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:32)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:93)
	at com.sun.proxy.$Proxy1.processTestClass(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.processTestClass(TestWorker.java:109)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:35)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.remote.internal.hub.MessageHubBackedObjectConnection$DispatchWrapper.dispatch(MessageHubBackedObjectConnection.java:146)
	at org.gradle.internal.remote.internal.hub.MessageHubBackedObjectConnection$DispatchWrapper.dispatch(MessageHubBackedObjectConnection.java:128)
	at org.gradle.internal.remote.internal.hub.MessageHub$Handler.run(MessageHub.java:404)
	at org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:63)
	at org.gradle.internal.concurrent.ManagedExecutorImpl$1.run(ManagedExecutorImpl.java:46)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at org.gradle.internal.concurrent.ThreadFactoryImpl$ManagedThreadRunnable.run(ThreadFactoryImpl.java:55)
	at java.lang.Thread.run(Thread.java:748)
27479 [Test worker] INFO  org.springframework.test.context.transaction.TransactionContext  – Rolled back transaction for test context [DefaultTestContext@32e1cd1c testClass = RefundControllerTest, testInstance = org.iata.bsplink.refund.controller.RefundControllerTest@666850e6, testMethod = testUpdateRefundWithIncorrectAirlineInFileName@RefundControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@1f5d4e4b testClass = RefundControllerTest, locations = '{}', classes = '{class org.iata.bsplink.refund.Application}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{app.host.local.protocol=local, app.host.sftp.protocol=sftp, org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@e7e8512, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@4ece6cea, [ImportsContextCustomizer@7e32a44a key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@7c81a5a0, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@2dc9c285, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@d444633b, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@794b4b8d], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -&gt; true]].
27483 [Test worker] INFO  org.springframework.test.context.transaction.TransactionContext  – Began transaction (1) for test context [DefaultTestContext@32e1cd1c testClass = RefundControllerTest, testInstance = org.iata.bsplink.refund.controller.RefundControllerTest@7452fe10, testMethod = testUpdateRefundNotFound@RefundControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@1f5d4e4b testClass = RefundControllerTest, locations = '{}', classes = '{class org.iata.bsplink.refund.Application}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{app.host.local.protocol=local, app.host.sftp.protocol=sftp, org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@e7e8512, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@4ece6cea, [ImportsContextCustomizer@7e32a44a key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@7c81a5a0, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@2dc9c285, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@d444633b, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@794b4b8d], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -&gt; true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@494e061e]; rollback [true]
2018-08-09 13:37:11.453  INFO 26020 --- [    Test worker] o.i.b.r.controller.RefundController      : received request to update indirect refund: Refund(id=3212312313, ticketDocumentNumber=null, status=PENDING, isoCountryCode=AA, agentCode=78200011, airlineCode=220, dateOfIssue=2018-06-19, billingPeriod=null, currency=RefundCurrency(code=ABC, decimals=0), passenger=PEPE, amounts=RefundAmounts(grossFare=0, lessGrossFareUsed=0, commissionAmount=0, commissionRate=0, spam=0, cancellationPenalty=0, miscellaneousFee=0, taxOnCancellationPenalty=0, taxOnMiscellaneousFee=0, commissionOnCpAndMfAmount=0, commissionOnCpAndMfRate=0, tax=0, refundToPassenger=0), partialRefund=false, netReporting=false, waiverCode=null, tourCode=null, dateOfIssueRelatedDocument=2000-01-02, dateOfAirlineAction=null, exchange=false, agentContact=null, airlineContact=null, settlementAuthorisationCode=null, customerFileReference=null, agentVatNumber=null, airlineVatNumber=null, originalIssue=null, airlineCodeRelatedDocument=220, relatedDocument=RelatedDocument(relatedTicketDocumentNumber=1234567890, relatedTicketCoupon1=true, relatedTicketCoupon2=false, relatedTicketCoupon3=false, relatedTicketCoupon4=false), statisticalCode=I, formOfPaymentAmounts=[], conjunctions=[], taxMiscellaneousFees=[], issueReason=Reason for Issuance, rejectionReason=null, airlineRemark=null, attachedFiles=null, comments=null, history=null, agentRegistrationNumber=null, airlineRegistrationNumber=null)
2018-08-09 13:37:11.453  INFO 26020 --- [    Test worker] o.i.b.r.v.RefundUpdateValidator          : Validating refund to update: Refund(id=3212312313, ticketDocumentNumber=null, status=PENDING, isoCountryCode=AA, agentCode=78200011, airlineCode=220, dateOfIssue=2018-06-19, billingPeriod=null, currency=RefundCurrency(code=ABC, decimals=0), passenger=PEPE, amounts=RefundAmounts(grossFare=0, lessGrossFareUsed=0, commissionAmount=0, commissionRate=0, spam=0, cancellationPenalty=0, miscellaneousFee=0, taxOnCancellationPenalty=0, taxOnMiscellaneousFee=0, commissionOnCpAndMfAmount=0, commissionOnCpAndMfRate=0, tax=0, refundToPassenger=0), partialRefund=false, netReporting=false, waiverCode=null, tourCode=null, dateOfIssueRelatedDocument=2000-01-02, dateOfAirlineAction=null, exchange=false, agentContact=null, airlineContact=null, settlementAuthorisationCode=null, customerFileReference=null, agentVatNumber=null, airlineVatNumber=null, originalIssue=null, airlineCodeRelatedDocument=220, relatedDocument=RelatedDocument(relatedTicketDocumentNumber=1234567890, relatedTicketCoupon1=true, relatedTicketCoupon2=false, relatedTicketCoupon3=false, relatedTicketCoupon4=false), statisticalCode=I, formOfPaymentAmounts=[], conjunctions=[], taxMiscellaneousFees=[], issueReason=Reason for Issuance, rejectionReason=null, airlineRemark=null, attachedFiles=null, comments=null, history=null, agentRegistrationNumber=null, airlineRegistrationNumber=null)
2018-08-09 13:37:11.454  INFO 26020 --- [    Test worker] o.i.b.r.v.RefundUpdateValidator          : Refund not found
27503 [Test worker] INFO  org.iata.bsplink.commons.rest.exception.handler.ApplicationExceptionHandler  – &lt;400 Bad Request,ValidationErrorResponse(validationErrors=[org.iata.bsplink.commons.rest.response.validation.ValidationError@aa2d14ef]),{}&gt;
org.iata.bsplink.commons.rest.exception.ApplicationValidationException: Validation error
	at org.iata.bsplink.refund.controller.RefundController.updateRefund(RefundController.java:314)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:209)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:136)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:102)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:870)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:776)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:991)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:925)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:978)
	at org.springframework.web.servlet.FrameworkServlet.doPut(FrameworkServlet.java:892)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:664)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:855)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:66)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:742)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:166)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:99)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.HttpPutFormContentFilter.doFilterInternal(HttpPutFormContentFilter.java:109)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:81)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:200)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:166)
	at org.iata.bsplink.refund.controller.RefundControllerTest.testUpdateRefundNotFound(RefundControllerTest.java:249)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.springframework.test.context.junit4.statements.RunBeforeTestExecutionCallbacks.evaluate(RunBeforeTestExecutionCallbacks.java:73)
	at org.springframework.test.context.junit4.statements.RunAfterTestExecutionCallbacks.evaluate(RunAfterTestExecutionCallbacks.java:83)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75)
	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86)
	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:251)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)
	at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecutor.runTestClass(JUnitTestClassExecutor.java:116)
	at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecutor.execute(JUnitTestClassExecutor.java:59)
	at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecutor.execute(JUnitTestClassExecutor.java:39)
	at org.gradle.api.internal.tasks.testing.junit.AbstractJUnitTestClassProcessor.processTestClass(AbstractJUnitTestClassProcessor.java:66)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.processTestClass(SuiteTestClassProcessor.java:51)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:35)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:32)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:93)
	at com.sun.proxy.$Proxy1.processTestClass(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.processTestClass(TestWorker.java:109)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:35)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.remote.internal.hub.MessageHubBackedObjectConnection$DispatchWrapper.dispatch(MessageHubBackedObjectConnection.java:146)
	at org.gradle.internal.remote.internal.hub.MessageHubBackedObjectConnection$DispatchWrapper.dispatch(MessageHubBackedObjectConnection.java:128)
	at org.gradle.internal.remote.internal.hub.MessageHub$Handler.run(MessageHub.java:404)
	at org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:63)
	at org.gradle.internal.concurrent.ManagedExecutorImpl$1.run(ManagedExecutorImpl.java:46)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at org.gradle.internal.concurrent.ThreadFactoryImpl$ManagedThreadRunnable.run(ThreadFactoryImpl.java:55)
	at java.lang.Thread.run(Thread.java:748)
27507 [Test worker] INFO  org.springframework.test.context.transaction.TransactionContext  – Rolled back transaction for test context [DefaultTestContext@32e1cd1c testClass = RefundControllerTest, testInstance = org.iata.bsplink.refund.controller.RefundControllerTest@7452fe10, testMethod = testUpdateRefundNotFound@RefundControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@1f5d4e4b testClass = RefundControllerTest, locations = '{}', classes = '{class org.iata.bsplink.refund.Application}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{app.host.local.protocol=local, app.host.sftp.protocol=sftp, org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@e7e8512, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@4ece6cea, [ImportsContextCustomizer@7e32a44a key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@7c81a5a0, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@2dc9c285, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@d444633b, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@794b4b8d], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -&gt; true]].
27516 [Test worker] INFO  org.springframework.test.context.transaction.TransactionContext  – Began transaction (1) for test context [DefaultTestContext@32e1cd1c testClass = RefundControllerTest, testInstance = org.iata.bsplink.refund.controller.RefundControllerTest@146e987, testMethod = testGetRefunds@RefundControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@1f5d4e4b testClass = RefundControllerTest, locations = '{}', classes = '{class org.iata.bsplink.refund.Application}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{app.host.local.protocol=local, app.host.sftp.protocol=sftp, org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@e7e8512, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@4ece6cea, [ImportsContextCustomizer@7e32a44a key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@7c81a5a0, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@2dc9c285, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@d444633b, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@794b4b8d], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -&gt; true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@494e061e]; rollback [true]
27545 [Test worker] INFO  org.springframework.test.context.transaction.TransactionContext  – Rolled back transaction for test context [DefaultTestContext@32e1cd1c testClass = RefundControllerTest, testInstance = org.iata.bsplink.refund.controller.RefundControllerTest@146e987, testMethod = testGetRefunds@RefundControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@1f5d4e4b testClass = RefundControllerTest, locations = '{}', classes = '{class org.iata.bsplink.refund.Application}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{app.host.local.protocol=local, app.host.sftp.protocol=sftp, org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@e7e8512, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@4ece6cea, [ImportsContextCustomizer@7e32a44a key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@7c81a5a0, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@2dc9c285, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@d444633b, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@794b4b8d], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -&gt; true]].
27547 [Test worker] INFO  org.springframework.test.context.transaction.TransactionContext  – Began transaction (1) for test context [DefaultTestContext@32e1cd1c testClass = RefundControllerTest, testInstance = org.iata.bsplink.refund.controller.RefundControllerTest@51ca8b80, testMethod = testGetRefund@RefundControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@1f5d4e4b testClass = RefundControllerTest, locations = '{}', classes = '{class org.iata.bsplink.refund.Application}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{app.host.local.protocol=local, app.host.sftp.protocol=sftp, org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@e7e8512, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@4ece6cea, [ImportsContextCustomizer@7e32a44a key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@7c81a5a0, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@2dc9c285, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@d444633b, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@794b4b8d], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -&gt; true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@494e061e]; rollback [true]
27555 [Test worker] INFO  org.springframework.test.context.transaction.TransactionContext  – Rolled back transaction for test context [DefaultTestContext@32e1cd1c testClass = RefundControllerTest, testInstance = org.iata.bsplink.refund.controller.RefundControllerTest@51ca8b80, testMethod = testGetRefund@RefundControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@1f5d4e4b testClass = RefundControllerTest, locations = '{}', classes = '{class org.iata.bsplink.refund.Application}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{app.host.local.protocol=local, app.host.sftp.protocol=sftp, org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@e7e8512, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@4ece6cea, [ImportsContextCustomizer@7e32a44a key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@7c81a5a0, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@2dc9c285, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@d444633b, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@794b4b8d], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -&gt; true]].
27558 [Test worker] INFO  org.springframework.test.context.transaction.TransactionContext  – Began transaction (1) for test context [DefaultTestContext@32e1cd1c testClass = RefundControllerTest, testInstance = org.iata.bsplink.refund.controller.RefundControllerTest@277648d5, testMethod = testUpdateRefundChangeAgentCode@RefundControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@1f5d4e4b testClass = RefundControllerTest, locations = '{}', classes = '{class org.iata.bsplink.refund.Application}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{app.host.local.protocol=local, app.host.sftp.protocol=sftp, org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@e7e8512, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@4ece6cea, [ImportsContextCustomizer@7e32a44a key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@7c81a5a0, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@2dc9c285, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@d444633b, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@794b4b8d], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -&gt; true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@494e061e]; rollback [true]
2018-08-09 13:37:11.518  INFO 26020 --- [    Test worker] o.i.b.r.controller.RefundController      : received request to update indirect refund: Refund(id=127, ticketDocumentNumber=null, status=PENDING, isoCountryCode=AA, agentCode=99999999, airlineCode=220, dateOfIssue=2018-06-19, billingPeriod=null, currency=RefundCurrency(code=ABC, decimals=0), passenger=PEPE, amounts=RefundAmounts(grossFare=0, lessGrossFareUsed=0, commissionAmount=0, commissionRate=0, spam=0, cancellationPenalty=0, miscellaneousFee=0, taxOnCancellationPenalty=0, taxOnMiscellaneousFee=0, commissionOnCpAndMfAmount=0, commissionOnCpAndMfRate=0, tax=0, refundToPassenger=0), partialRefund=false, netReporting=false, waiverCode=null, tourCode=null, dateOfIssueRelatedDocument=2000-01-02, dateOfAirlineAction=null, exchange=false, agentContact=null, airlineContact=null, settlementAuthorisationCode=null, customerFileReference=null, agentVatNumber=null, airlineVatNumber=null, originalIssue=null, airlineCodeRelatedDocument=220, relatedDocument=RelatedDocument(relatedTicketDocumentNumber=1234567890, relatedTicketCoupon1=true, relatedTicketCoupon2=false, relatedTicketCoupon3=false, relatedTicketCoupon4=false), statisticalCode=I, formOfPaymentAmounts=[], conjunctions=[], taxMiscellaneousFees=[], issueReason=Reason for Issuance, rejectionReason=null, airlineRemark=null, attachedFiles=null, comments=null, history=null, agentRegistrationNumber=null, airlineRegistrationNumber=null)
2018-08-09 13:37:11.518  INFO 26020 --- [    Test worker] o.i.b.r.v.RefundUpdateValidator          : Validating refund to update: Refund(id=127, ticketDocumentNumber=null, status=PENDING, isoCountryCode=AA, agentCode=99999999, airlineCode=220, dateOfIssue=2018-06-19, billingPeriod=null, currency=RefundCurrency(code=ABC, decimals=0), passenger=PEPE, amounts=RefundAmounts(grossFare=0, lessGrossFareUsed=0, commissionAmount=0, commissionRate=0, spam=0, cancellationPenalty=0, miscellaneousFee=0, taxOnCancellationPenalty=0, taxOnMiscellaneousFee=0, commissionOnCpAndMfAmount=0, commissionOnCpAndMfRate=0, tax=0, refundToPassenger=0), partialRefund=false, netReporting=false, waiverCode=null, tourCode=null, dateOfIssueRelatedDocument=2000-01-02, dateOfAirlineAction=null, exchange=false, agentContact=null, airlineContact=null, settlementAuthorisationCode=null, customerFileReference=null, agentVatNumber=null, airlineVatNumber=null, originalIssue=null, airlineCodeRelatedDocument=220, relatedDocument=RelatedDocument(relatedTicketDocumentNumber=1234567890, relatedTicketCoupon1=true, relatedTicketCoupon2=false, relatedTicketCoupon3=false, relatedTicketCoupon4=false), statisticalCode=I, formOfPaymentAmounts=[], conjunctions=[], taxMiscellaneousFees=[], issueReason=Reason for Issuance, rejectionReason=null, airlineRemark=null, attachedFiles=null, comments=null, history=null, agentRegistrationNumber=null, airlineRegistrationNumber=null)
2018-08-09 13:37:11.518  INFO 26020 --- [    Test worker] o.i.b.r.v.RefundUpdateValidator          : agentCode cannot be modified
27570 [Test worker] INFO  org.iata.bsplink.commons.rest.exception.handler.ApplicationExceptionHandler  – &lt;400 Bad Request,ValidationErrorResponse(validationErrors=[org.iata.bsplink.commons.rest.response.validation.ValidationError@44f157f6]),{}&gt;
org.iata.bsplink.commons.rest.exception.ApplicationValidationException: Validation error
	at org.iata.bsplink.refund.validation.RefundUpdateValidator.validate(RefundUpdateValidator.java:62)
	at org.iata.bsplink.refund.validation.RefundUpdateValidator.validate(RefundUpdateValidator.java:81)
	at org.iata.bsplink.refund.controller.RefundController.updateRefund(RefundController.java:310)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:209)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:136)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:102)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:870)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:776)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:991)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:925)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:978)
	at org.springframework.web.servlet.FrameworkServlet.doPut(FrameworkServlet.java:892)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:664)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:855)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:66)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:742)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:166)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:99)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.HttpPutFormContentFilter.doFilterInternal(HttpPutFormContentFilter.java:109)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:81)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:200)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:166)
	at org.iata.bsplink.refund.controller.RefundControllerTest.testUpdateRefundChangeAgentCode(RefundControllerTest.java:260)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.springframework.test.context.junit4.statements.RunBeforeTestExecutionCallbacks.evaluate(RunBeforeTestExecutionCallbacks.java:73)
	at org.springframework.test.context.junit4.statements.RunAfterTestExecutionCallbacks.evaluate(RunAfterTestExecutionCallbacks.java:83)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75)
	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86)
	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:251)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)
	at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecutor.runTestClass(JUnitTestClassExecutor.java:116)
	at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecutor.execute(JUnitTestClassExecutor.java:59)
	at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecutor.execute(JUnitTestClassExecutor.java:39)
	at org.gradle.api.internal.tasks.testing.junit.AbstractJUnitTestClassProcessor.processTestClass(AbstractJUnitTestClassProcessor.java:66)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.processTestClass(SuiteTestClassProcessor.java:51)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:35)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:32)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:93)
	at com.sun.proxy.$Proxy1.processTestClass(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.processTestClass(TestWorker.java:109)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:35)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.remote.internal.hub.MessageHubBackedObjectConnection$DispatchWrapper.dispatch(MessageHubBackedObjectConnection.java:146)
	at org.gradle.internal.remote.internal.hub.MessageHubBackedObjectConnection$DispatchWrapper.dispatch(MessageHubBackedObjectConnection.java:128)
	at org.gradle.internal.remote.internal.hub.MessageHub$Handler.run(MessageHub.java:404)
	at org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:63)
	at org.gradle.internal.concurrent.ManagedExecutorImpl$1.run(ManagedExecutorImpl.java:46)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at org.gradle.internal.concurrent.ThreadFactoryImpl$ManagedThreadRunnable.run(ThreadFactoryImpl.java:55)
	at java.lang.Thread.run(Thread.java:748)
27574 [Test worker] INFO  org.springframework.test.context.transaction.TransactionContext  – Rolled back transaction for test context [DefaultTestContext@32e1cd1c testClass = RefundControllerTest, testInstance = org.iata.bsplink.refund.controller.RefundControllerTest@277648d5, testMethod = testUpdateRefundChangeAgentCode@RefundControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@1f5d4e4b testClass = RefundControllerTest, locations = '{}', classes = '{class org.iata.bsplink.refund.Application}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{app.host.local.protocol=local, app.host.sftp.protocol=sftp, org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@e7e8512, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@4ece6cea, [ImportsContextCustomizer@7e32a44a key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@7c81a5a0, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@2dc9c285, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@d444633b, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@794b4b8d], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -&gt; true]].
27576 [Test worker] INFO  org.springframework.test.context.transaction.TransactionContext  – Began transaction (1) for test context [DefaultTestContext@32e1cd1c testClass = RefundControllerTest, testInstance = org.iata.bsplink.refund.controller.RefundControllerTest@645c9fd7, testMethod = testUpdateRefundWithIncorrectFileName@RefundControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@1f5d4e4b testClass = RefundControllerTest, locations = '{}', classes = '{class org.iata.bsplink.refund.Application}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{app.host.local.protocol=local, app.host.sftp.protocol=sftp, org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@e7e8512, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@4ece6cea, [ImportsContextCustomizer@7e32a44a key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@7c81a5a0, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@2dc9c285, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@d444633b, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@794b4b8d], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -&gt; true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@494e061e]; rollback [true]
2018-08-09 13:37:11.537  INFO 26020 --- [    Test worker] o.i.b.r.v.RefundUpdateValidator          : Validating refund to update: Refund(id=128, ticketDocumentNumber=null, status=PENDING, isoCountryCode=AA, agentCode=78200011, airlineCode=220, dateOfIssue=2018-06-19, billingPeriod=null, currency=RefundCurrency(code=ABC, decimals=0), passenger=PEPE, amounts=RefundAmounts(grossFare=0, lessGrossFareUsed=0, commissionAmount=0, commissionRate=0, spam=0, cancellationPenalty=0, miscellaneousFee=0, taxOnCancellationPenalty=0, taxOnMiscellaneousFee=0, commissionOnCpAndMfAmount=0, commissionOnCpAndMfRate=0, tax=0, refundToPassenger=0), partialRefund=false, netReporting=false, waiverCode=null, tourCode=null, dateOfIssueRelatedDocument=2000-01-02, dateOfAirlineAction=null, exchange=false, agentContact=null, airlineContact=null, settlementAuthorisationCode=null, customerFileReference=null, agentVatNumber=null, airlineVatNumber=null, originalIssue=null, airlineCodeRelatedDocument=220, relatedDocument=RelatedDocument(relatedTicketDocumentNumber=1234567890, relatedTicketCoupon1=true, relatedTicketCoupon2=false, relatedTicketCoupon3=false, relatedTicketCoupon4=false), statisticalCode=I, formOfPaymentAmounts=[], conjunctions=[], taxMiscellaneousFees=[], issueReason=Reason for Issuance, rejectionReason=null, airlineRemark=null, attachedFiles=null, comments=null, history=null, agentRegistrationNumber=null, airlineRegistrationNumber=null)
27588 [Test worker] INFO  org.iata.bsplink.commons.rest.exception.handler.ApplicationExceptionHandler  – &lt;400 Bad Request,ValidationErrorResponse(validationErrors=[org.iata.bsplink.commons.rest.response.validation.ValidationError@6591e028, org.iata.bsplink.commons.rest.response.validation.ValidationError@9af71348, org.iata.bsplink.commons.rest.response.validation.ValidationError@178dfd85]),{}&gt;
org.iata.bsplink.commons.rest.exception.ApplicationValidationException: Validation error
	at org.iata.bsplink.refund.validation.RefundUpdateValidator.validate(RefundUpdateValidator.java:62)
	at org.iata.bsplink.refund.validation.MassloadValidator.validate(MassloadValidator.java:34)
	at org.iata.bsplink.refund.controller.RefundController.updateRefundViaMassload(RefundController.java:454)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:209)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:136)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:102)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:870)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:776)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:991)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:925)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:978)
	at org.springframework.web.servlet.FrameworkServlet.doPut(FrameworkServlet.java:892)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:664)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:855)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:66)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:742)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:166)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:99)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.HttpPutFormContentFilter.doFilterInternal(HttpPutFormContentFilter.java:109)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:81)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:200)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:166)
	at org.iata.bsplink.refund.controller.RefundControllerTest.testUpdateRefundWithIncorrectFileName(RefundControllerTest.java:915)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.springframework.test.context.junit4.statements.RunBeforeTestExecutionCallbacks.evaluate(RunBeforeTestExecutionCallbacks.java:73)
	at org.springframework.test.context.junit4.statements.RunAfterTestExecutionCallbacks.evaluate(RunAfterTestExecutionCallbacks.java:83)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75)
	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86)
	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:251)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)
	at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecutor.runTestClass(JUnitTestClassExecutor.java:116)
	at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecutor.execute(JUnitTestClassExecutor.java:59)
	at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecutor.execute(JUnitTestClassExecutor.java:39)
	at org.gradle.api.internal.tasks.testing.junit.AbstractJUnitTestClassProcessor.processTestClass(AbstractJUnitTestClassProcessor.java:66)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.processTestClass(SuiteTestClassProcessor.java:51)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:35)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:32)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:93)
	at com.sun.proxy.$Proxy1.processTestClass(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.processTestClass(TestWorker.java:109)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:35)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.remote.internal.hub.MessageHubBackedObjectConnection$DispatchWrapper.dispatch(MessageHubBackedObjectConnection.java:146)
	at org.gradle.internal.remote.internal.hub.MessageHubBackedObjectConnection$DispatchWrapper.dispatch(MessageHubBackedObjectConnection.java:128)
	at org.gradle.internal.remote.internal.hub.MessageHub$Handler.run(MessageHub.java:404)
	at org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:63)
	at org.gradle.internal.concurrent.ManagedExecutorImpl$1.run(ManagedExecutorImpl.java:46)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at org.gradle.internal.concurrent.ThreadFactoryImpl$ManagedThreadRunnable.run(ThreadFactoryImpl.java:55)
	at java.lang.Thread.run(Thread.java:748)
27594 [Test worker] INFO  org.springframework.test.context.transaction.TransactionContext  – Rolled back transaction for test context [DefaultTestContext@32e1cd1c testClass = RefundControllerTest, testInstance = org.iata.bsplink.refund.controller.RefundControllerTest@645c9fd7, testMethod = testUpdateRefundWithIncorrectFileName@RefundControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@1f5d4e4b testClass = RefundControllerTest, locations = '{}', classes = '{class org.iata.bsplink.refund.Application}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{app.host.local.protocol=local, app.host.sftp.protocol=sftp, org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@e7e8512, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@4ece6cea, [ImportsContextCustomizer@7e32a44a key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@7c81a5a0, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@2dc9c285, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@d444633b, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@794b4b8d], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -&gt; true]].
27597 [Test worker] INFO  org.springframework.test.context.transaction.TransactionContext  – Began transaction (1) for test context [DefaultTestContext@32e1cd1c testClass = RefundControllerTest, testInstance = org.iata.bsplink.refund.controller.RefundControllerTest@7eac0f9c, testMethod = testSaveCommentsNoRefundId@RefundControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@1f5d4e4b testClass = RefundControllerTest, locations = '{}', classes = '{class org.iata.bsplink.refund.Application}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{app.host.local.protocol=local, app.host.sftp.protocol=sftp, org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@e7e8512, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@4ece6cea, [ImportsContextCustomizer@7e32a44a key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@7c81a5a0, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@2dc9c285, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@d444633b, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@794b4b8d], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -&gt; true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@494e061e]; rollback [true]
27600 [Test worker] INFO  org.iata.bsplink.commons.rest.exception.handler.ApplicationExceptionHandler  – &lt;400 Bad Request,ApplicationErrorResponse(timestamp=1533814631551, status=400, error=Bad Request, message=Bad Request, path=/v1/refunds/indirects/null/comments),{}&gt;
org.springframework.web.method.annotation.MethodArgumentTypeMismatchException: Failed to convert value of type 'java.lang.String' to required type 'java.lang.Long'; nested exception is java.lang.NumberFormatException: For input string: &quot;null&quot;
	at org.springframework.web.method.annotation.AbstractNamedValueMethodArgumentResolver.resolveArgument(AbstractNamedValueMethodArgumentResolver.java:131)
	at org.springframework.web.method.support.HandlerMethodArgumentResolverComposite.resolveArgument(HandlerMethodArgumentResolverComposite.java:124)
	at org.springframework.web.method.support.InvocableHandlerMethod.getMethodArgumentValues(InvocableHandlerMethod.java:161)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:131)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:102)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:870)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:776)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:991)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:925)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:978)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:881)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:661)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:855)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:66)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:742)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:166)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:99)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.HttpPutFormContentFilter.doFilterInternal(HttpPutFormContentFilter.java:109)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:81)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:200)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:166)
	at org.iata.bsplink.refund.controller.RefundControllerTest.testSaveCommentsNoRefundId(RefundControllerTest.java:201)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.springframework.test.context.junit4.statements.RunBeforeTestExecutionCallbacks.evaluate(RunBeforeTestExecutionCallbacks.java:73)
	at org.springframework.test.context.junit4.statements.RunAfterTestExecutionCallbacks.evaluate(RunAfterTestExecutionCallbacks.java:83)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75)
	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86)
	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:251)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)
	at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecutor.runTestClass(JUnitTestClassExecutor.java:116)
	at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecutor.execute(JUnitTestClassExecutor.java:59)
	at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecutor.execute(JUnitTestClassExecutor.java:39)
	at org.gradle.api.internal.tasks.testing.junit.AbstractJUnitTestClassProcessor.processTestClass(AbstractJUnitTestClassProcessor.java:66)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.processTestClass(SuiteTestClassProcessor.java:51)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:35)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:32)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:93)
	at com.sun.proxy.$Proxy1.processTestClass(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.processTestClass(TestWorker.java:109)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:35)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.remote.internal.hub.MessageHubBackedObjectConnection$DispatchWrapper.dispatch(MessageHubBackedObjectConnection.java:146)
	at org.gradle.internal.remote.internal.hub.MessageHubBackedObjectConnection$DispatchWrapper.dispatch(MessageHubBackedObjectConnection.java:128)
	at org.gradle.internal.remote.internal.hub.MessageHub$Handler.run(MessageHub.java:404)
	at org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:63)
	at org.gradle.internal.concurrent.ManagedExecutorImpl$1.run(ManagedExecutorImpl.java:46)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at org.gradle.internal.concurrent.ThreadFactoryImpl$ManagedThreadRunnable.run(ThreadFactoryImpl.java:55)
	at java.lang.Thread.run(Thread.java:748)
Caused by: java.lang.NumberFormatException: For input string: &quot;null&quot;
	at java.lang.NumberFormatException.forInputString(NumberFormatException.java:65)
	at java.lang.Long.parseLong(Long.java:589)
	at java.lang.Long.valueOf(Long.java:803)
	at org.springframework.util.NumberUtils.parseNumber(NumberUtils.java:213)
	at org.springframework.beans.propertyeditors.CustomNumberEditor.setAsText(CustomNumberEditor.java:115)
	at org.springframework.beans.TypeConverterDelegate.doConvertTextValue(TypeConverterDelegate.java:466)
	at org.springframework.beans.TypeConverterDelegate.doConvertValue(TypeConverterDelegate.java:439)
	at org.springframework.beans.TypeConverterDelegate.convertIfNecessary(TypeConverterDelegate.java:192)
	at org.springframework.beans.TypeConverterDelegate.convertIfNecessary(TypeConverterDelegate.java:99)
	at org.springframework.beans.TypeConverterSupport.doConvert(TypeConverterSupport.java:73)
	at org.springframework.beans.TypeConverterSupport.convertIfNecessary(TypeConverterSupport.java:52)
	at org.springframework.validation.DataBinder.convertIfNecessary(DataBinder.java:692)
	at org.springframework.web.method.annotation.AbstractNamedValueMethodArgumentResolver.resolveArgument(AbstractNamedValueMethodArgumentResolver.java:123)
	... 87 more
27604 [Test worker] INFO  org.springframework.test.context.transaction.TransactionContext  – Rolled back transaction for test context [DefaultTestContext@32e1cd1c testClass = RefundControllerTest, testInstance = org.iata.bsplink.refund.controller.RefundControllerTest@7eac0f9c, testMethod = testSaveCommentsNoRefundId@RefundControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@1f5d4e4b testClass = RefundControllerTest, locations = '{}', classes = '{class org.iata.bsplink.refund.Application}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{app.host.local.protocol=local, app.host.sftp.protocol=sftp, org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@e7e8512, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@4ece6cea, [ImportsContextCustomizer@7e32a44a key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@7c81a5a0, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@2dc9c285, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@d444633b, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@794b4b8d], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -&gt; true]].
27606 [Test worker] INFO  org.springframework.test.context.transaction.TransactionContext  – Began transaction (1) for test context [DefaultTestContext@32e1cd1c testClass = RefundControllerTest, testInstance = org.iata.bsplink.refund.controller.RefundControllerTest@62193c03, testMethod = testUpdateRefundStatusErrors@RefundControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@1f5d4e4b testClass = RefundControllerTest, locations = '{}', classes = '{class org.iata.bsplink.refund.Application}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{app.host.local.protocol=local, app.host.sftp.protocol=sftp, org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@e7e8512, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@4ece6cea, [ImportsContextCustomizer@7e32a44a key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@7c81a5a0, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@2dc9c285, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@d444633b, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@794b4b8d], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -&gt; true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@494e061e]; rollback [true]
2018-08-09 13:37:11.564  INFO 26020 --- [    Test worker] o.i.b.r.controller.RefundController      : received request to change refund's status: null
27616 [Test worker] INFO  org.springframework.test.context.transaction.TransactionContext  – Rolled back transaction for test context [DefaultTestContext@32e1cd1c testClass = RefundControllerTest, testInstance = org.iata.bsplink.refund.controller.RefundControllerTest@62193c03, testMethod = testUpdateRefundStatusErrors@RefundControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@1f5d4e4b testClass = RefundControllerTest, locations = '{}', classes = '{class org.iata.bsplink.refund.Application}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{app.host.local.protocol=local, app.host.sftp.protocol=sftp, org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@e7e8512, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@4ece6cea, [ImportsContextCustomizer@7e32a44a key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@7c81a5a0, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@2dc9c285, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@d444633b, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@794b4b8d], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -&gt; true]].
27618 [Test worker] INFO  org.springframework.test.context.transaction.TransactionContext  – Began transaction (1) for test context [DefaultTestContext@32e1cd1c testClass = RefundControllerTest, testInstance = org.iata.bsplink.refund.controller.RefundControllerTest@373a0c23, testMethod = testUpdateRefundWithFileName@RefundControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@1f5d4e4b testClass = RefundControllerTest, locations = '{}', classes = '{class org.iata.bsplink.refund.Application}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{app.host.local.protocol=local, app.host.sftp.protocol=sftp, org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@e7e8512, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@4ece6cea, [ImportsContextCustomizer@7e32a44a key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@7c81a5a0, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@2dc9c285, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@d444633b, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@794b4b8d], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -&gt; true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@494e061e]; rollback [true]
2018-08-09 13:37:11.585  INFO 26020 --- [    Test worker] o.i.b.r.v.RefundUpdateValidator          : Validating refund to update: Refund(id=99999992314, ticketDocumentNumber=null, status=AUTHORIZED, isoCountryCode=AA, agentCode=78200011, airlineCode=220, dateOfIssue=2018-06-19, billingPeriod=null, currency=RefundCurrency(code=ABC, decimals=0), passenger=PEPE, amounts=RefundAmounts(grossFare=10, lessGrossFareUsed=0, commissionAmount=0, commissionRate=0, spam=0, cancellationPenalty=0, miscellaneousFee=0, taxOnCancellationPenalty=0, taxOnMiscellaneousFee=0, commissionOnCpAndMfAmount=0, commissionOnCpAndMfRate=0, tax=0, refundToPassenger=10), partialRefund=false, netReporting=false, waiverCode=null, tourCode=null, dateOfIssueRelatedDocument=2000-01-02, dateOfAirlineAction=null, exchange=false, agentContact=null, airlineContact=null, settlementAuthorisationCode=null, customerFileReference=null, agentVatNumber=null, airlineVatNumber=null, originalIssue=null, airlineCodeRelatedDocument=220, relatedDocument=RelatedDocument(relatedTicketDocumentNumber=1234567890, relatedTicketCoupon1=true, relatedTicketCoupon2=false, relatedTicketCoupon3=false, relatedTicketCoupon4=false), statisticalCode=I, formOfPaymentAmounts=[FormOfPaymentAmount(type=CA, amount=10, vendorCode=null, number=null)], conjunctions=[], taxMiscellaneousFees=[], issueReason=Reason for Issuance, rejectionReason=null, airlineRemark=AIRLINE REMARK, attachedFiles=null, comments=null, history=null, agentRegistrationNumber=null, airlineRegistrationNumber=null)
2018-08-09 13:37:11.586  INFO 26020 --- [    Test worker] o.i.b.r.v.RefundUpdateValidator          : Copy new field values. Ignored not allow to modify: [id, history, attachedFiles, comments, agentCode, status, ticketDocumentNumber, dateOfAirlineAction, rejectionReason]
2018-08-09 13:37:11.587  INFO 26020 --- [    Test worker] o.i.b.r.v.RefundStatusValidator          : Validating status from PENDING to AUTHORIZED
2018-08-09 13:37:11.587  INFO 26020 --- [    Test worker] o.i.b.r.v.RefundStatusValidator          : Setting billing period
2018-08-09 13:37:11.587  INFO 26020 --- [    Test worker] o.i.b.refund.service.RefundService       : Updating refund : Refund(id=129, ticketDocumentNumber=1234567890, status=AUTHORIZED, isoCountryCode=AA, agentCode=78200011, airlineCode=220, dateOfIssue=2018-06-19, billingPeriod=2018124, currency=RefundCurrency(code=ABC, decimals=0), passenger=PEPE, amounts=RefundAmounts(grossFare=10, lessGrossFareUsed=0, commissionAmount=0, commissionRate=0, spam=0, cancellationPenalty=0, miscellaneousFee=0, taxOnCancellationPenalty=0, taxOnMiscellaneousFee=0, commissionOnCpAndMfAmount=0, commissionOnCpAndMfRate=0, tax=0, refundToPassenger=10), partialRefund=false, netReporting=false, waiverCode=null, tourCode=null, dateOfIssueRelatedDocument=2000-01-02, dateOfAirlineAction=2018-08-09, exchange=false, agentContact=null, airlineContact=null, settlementAuthorisationCode=null, customerFileReference=null, agentVatNumber=null, airlineVatNumber=null, originalIssue=null, airlineCodeRelatedDocument=220, relatedDocument=RelatedDocument(relatedTicketDocumentNumber=1234567890, relatedTicketCoupon1=true, relatedTicketCoupon2=false, relatedTicketCoupon3=false, relatedTicketCoupon4=false), statisticalCode=I, formOfPaymentAmounts=[FormOfPaymentAmount(type=CA, amount=10, vendorCode=null, number=null)], conjunctions=[], taxMiscellaneousFees=[], issueReason=Reason for Issuance, rejectionReason=null, airlineRemark=AIRLINE REMARK, attachedFiles=null, comments=null, history=null, agentRegistrationNumber=null, airlineRegistrationNumber=null)
2018-08-09 13:37:11.587  INFO 26020 --- [    Test worker] o.i.b.refund.service.RefundService       : Prepare refund history for: Refund(id=129, ticketDocumentNumber=1234567890, status=AUTHORIZED, isoCountryCode=AA, agentCode=78200011, airlineCode=220, dateOfIssue=2018-06-19, billingPeriod=2018124, currency=RefundCurrency(code=ABC, decimals=0), passenger=PEPE, amounts=RefundAmounts(grossFare=10, lessGrossFareUsed=0, commissionAmount=0, commissionRate=0, spam=0, cancellationPenalty=0, miscellaneousFee=0, taxOnCancellationPenalty=0, taxOnMiscellaneousFee=0, commissionOnCpAndMfAmount=0, commissionOnCpAndMfRate=0, tax=0, refundToPassenger=10), partialRefund=false, netReporting=false, waiverCode=null, tourCode=null, dateOfIssueRelatedDocument=2000-01-02, dateOfAirlineAction=2018-08-09, exchange=false, agentContact=null, airlineContact=null, settlementAuthorisationCode=null, customerFileReference=null, agentVatNumber=null, airlineVatNumber=null, originalIssue=null, airlineCodeRelatedDocument=220, relatedDocument=RelatedDocument(relatedTicketDocumentNumber=1234567890, relatedTicketCoupon1=true, relatedTicketCoupon2=false, relatedTicketCoupon3=false, relatedTicketCoupon4=false), statisticalCode=I, formOfPaymentAmounts=[FormOfPaymentAmount(type=CA, amount=10, vendorCode=null, number=null)], conjunctions=[], taxMiscellaneousFees=[], issueReason=Reason for Issuance, rejectionReason=null, airlineRemark=AIRLINE REMARK, attachedFiles=null, comments=null, history=null, agentRegistrationNumber=null, airlineRegistrationNumber=null) Action: MODIFY
2018-08-09 13:37:11.587  INFO 26020 --- [    Test worker] o.i.b.refund.service.RefundService       : Saving refund history for: Refund(id=129, ticketDocumentNumber=1234567890, status=AUTHORIZED, isoCountryCode=AA, agentCode=78200011, airlineCode=220, dateOfIssue=2018-06-19, billingPeriod=2018124, currency=RefundCurrency(code=ABC, decimals=0), passenger=PEPE, amounts=RefundAmounts(grossFare=10, lessGrossFareUsed=0, commissionAmount=0, commissionRate=0, spam=0, cancellationPenalty=0, miscellaneousFee=0, taxOnCancellationPenalty=0, taxOnMiscellaneousFee=0, commissionOnCpAndMfAmount=0, commissionOnCpAndMfRate=0, tax=0, refundToPassenger=10), partialRefund=false, netReporting=false, waiverCode=null, tourCode=null, dateOfIssueRelatedDocument=2000-01-02, dateOfAirlineAction=2018-08-09, exchange=false, agentContact=null, airlineContact=null, settlementAuthorisationCode=null, customerFileReference=null, agentVatNumber=null, airlineVatNumber=null, originalIssue=null, airlineCodeRelatedDocument=220, relatedDocument=RelatedDocument(relatedTicketDocumentNumber=1234567890, relatedTicketCoupon1=true, relatedTicketCoupon2=false, relatedTicketCoupon3=false, relatedTicketCoupon4=false), statisticalCode=I, formOfPaymentAmounts=[FormOfPaymentAmount(type=CA, amount=10, vendorCode=null, number=null)], conjunctions=[], taxMiscellaneousFees=[], issueReason=Reason for Issuance, rejectionReason=null, airlineRemark=AIRLINE REMARK, attachedFiles=null, comments=null, history=[RefundHistory(id=null, action=MODIFY, insertDateTime=2018-08-09T11:37:11.587Z, refundId=129, fileName=null)], agentRegistrationNumber=null, airlineRegistrationNumber=null) Action: MASSLOAD_UPDATE
2018-08-09 13:37:11.587  INFO 26020 --- [    Test worker] o.i.b.r.service.RefundHistoryService     : Saving refund history: RefundHistory(id=null, action=MASSLOAD_UPDATE, insertDateTime=2018-08-09T11:37:11.587Z, refundId=129, fileName=AAe9EARS_20001224_2209_123)
2018-08-09 13:37:11.588  INFO 26020 --- [    Test worker] o.i.b.refund.service.RefundService       : Refund history saved: RefundHistory(id=130, action=MASSLOAD_UPDATE, insertDateTime=2018-08-09T11:37:11.587Z, refundId=129, fileName=AAe9EARS_20001224_2209_123)
2018-08-09 13:37:11.588  INFO 26020 --- [    Test worker] o.i.b.r.service.RefundHistoryService     : Getting refund history by id: 129
2018-08-09 13:37:11.597  INFO 26020 --- [    Test worker] o.i.b.refund.service.RefundService       : Getting last updated Refund to retrieve
2018-08-09 13:37:11.602  INFO 26020 --- [    Test worker] o.i.b.r.service.RefundHistoryService     : Getting refund history by id: 129
27656 [Test worker] INFO  org.springframework.test.context.transaction.TransactionContext  – Rolled back transaction for test context [DefaultTestContext@32e1cd1c testClass = RefundControllerTest, testInstance = org.iata.bsplink.refund.controller.RefundControllerTest@373a0c23, testMethod = testUpdateRefundWithFileName@RefundControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@1f5d4e4b testClass = RefundControllerTest, locations = '{}', classes = '{class org.iata.bsplink.refund.Application}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{app.host.local.protocol=local, app.host.sftp.protocol=sftp, org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@e7e8512, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@4ece6cea, [ImportsContextCustomizer@7e32a44a key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@7c81a5a0, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@2dc9c285, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@d444633b, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@794b4b8d], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -&gt; true]].
27658 [Test worker] INFO  org.springframework.test.context.transaction.TransactionContext  – Began transaction (1) for test context [DefaultTestContext@32e1cd1c testClass = RefundControllerTest, testInstance = org.iata.bsplink.refund.controller.RefundControllerTest@44881d5a, testMethod = testUpdateRefundErrors@RefundControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@1f5d4e4b testClass = RefundControllerTest, locations = '{}', classes = '{class org.iata.bsplink.refund.Application}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{app.host.local.protocol=local, app.host.sftp.protocol=sftp, org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@e7e8512, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@4ece6cea, [ImportsContextCustomizer@7e32a44a key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@7c81a5a0, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@2dc9c285, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@d444633b, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@794b4b8d], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -&gt; true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@494e061e]; rollback [true]
2018-08-09 13:37:11.617  INFO 26020 --- [    Test worker] o.i.b.r.controller.RefundController      : received request to update indirect refund: Refund(id=987897987, ticketDocumentNumber=null, status=PENDING, isoCountryCode=AA, agentCode=78200011, airlineCode=220, dateOfIssue=2018-06-19, billingPeriod=null, currency=RefundCurrency(code=ABC, decimals=0), passenger=PEPE, amounts=RefundAmounts(grossFare=0, lessGrossFareUsed=0, commissionAmount=0, commissionRate=0, spam=0, cancellationPenalty=0, miscellaneousFee=0, taxOnCancellationPenalty=0, taxOnMiscellaneousFee=0, commissionOnCpAndMfAmount=0, commissionOnCpAndMfRate=0, tax=0, refundToPassenger=0), partialRefund=false, netReporting=false, waiverCode=null, tourCode=null, dateOfIssueRelatedDocument=2000-01-02, dateOfAirlineAction=null, exchange=false, agentContact=null, airlineContact=null, settlementAuthorisationCode=null, customerFileReference=null, agentVatNumber=null, airlineVatNumber=null, originalIssue=null, airlineCodeRelatedDocument=220, relatedDocument=RelatedDocument(relatedTicketDocumentNumber=1234567890, relatedTicketCoupon1=true, relatedTicketCoupon2=false, relatedTicketCoupon3=false, relatedTicketCoupon4=false), statisticalCode=I, formOfPaymentAmounts=[], conjunctions=[], taxMiscellaneousFees=[], issueReason=Reason for Issuance, rejectionReason=null, airlineRemark=null, attachedFiles=null, comments=null, history=null, agentRegistrationNumber=null, airlineRegistrationNumber=null)
2018-08-09 13:37:11.617  INFO 26020 --- [    Test worker] o.i.b.r.v.RefundUpdateValidator          : Validating refund to update: Refund(id=987897987, ticketDocumentNumber=null, status=PENDING, isoCountryCode=AA, agentCode=78200011, airlineCode=220, dateOfIssue=2018-06-19, billingPeriod=null, currency=RefundCurrency(code=ABC, decimals=0), passenger=PEPE, amounts=RefundAmounts(grossFare=0, lessGrossFareUsed=0, commissionAmount=0, commissionRate=0, spam=0, cancellationPenalty=0, miscellaneousFee=0, taxOnCancellationPenalty=0, taxOnMiscellaneousFee=0, commissionOnCpAndMfAmount=0, commissionOnCpAndMfRate=0, tax=0, refundToPassenger=0), partialRefund=false, netReporting=false, waiverCode=null, tourCode=null, dateOfIssueRelatedDocument=2000-01-02, dateOfAirlineAction=null, exchange=false, agentContact=null, airlineContact=null, settlementAuthorisationCode=null, customerFileReference=null, agentVatNumber=null, airlineVatNumber=null, originalIssue=null, airlineCodeRelatedDocument=220, relatedDocument=RelatedDocument(relatedTicketDocumentNumber=1234567890, relatedTicketCoupon1=true, relatedTicketCoupon2=false, relatedTicketCoupon3=false, relatedTicketCoupon4=false), statisticalCode=I, formOfPaymentAmounts=[], conjunctions=[], taxMiscellaneousFees=[], issueReason=Reason for Issuance, rejectionReason=null, airlineRemark=null, attachedFiles=null, comments=null, history=null, agentRegistrationNumber=null, airlineRegistrationNumber=null)
2018-08-09 13:37:11.618  INFO 26020 --- [    Test worker] o.i.b.r.v.RefundUpdateValidator          : Refund not found
27668 [Test worker] INFO  org.iata.bsplink.commons.rest.exception.handler.ApplicationExceptionHandler  – &lt;400 Bad Request,ValidationErrorResponse(validationErrors=[org.iata.bsplink.commons.rest.response.validation.ValidationError@aa2d14ef]),{}&gt;
org.iata.bsplink.commons.rest.exception.ApplicationValidationException: Validation error
	at org.iata.bsplink.refund.controller.RefundController.updateRefund(RefundController.java:314)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:209)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:136)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:102)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:870)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:776)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:991)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:925)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:978)
	at org.springframework.web.servlet.FrameworkServlet.doPut(FrameworkServlet.java:892)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:664)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:855)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:66)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:742)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:166)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:99)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.HttpPutFormContentFilter.doFilterInternal(HttpPutFormContentFilter.java:109)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:81)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:200)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:166)
	at org.iata.bsplink.refund.controller.RefundControllerTest.testUpdateRefundErrors(RefundControllerTest.java:225)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.springframework.test.context.junit4.statements.RunBeforeTestExecutionCallbacks.evaluate(RunBeforeTestExecutionCallbacks.java:73)
	at org.springframework.test.context.junit4.statements.RunAfterTestExecutionCallbacks.evaluate(RunAfterTestExecutionCallbacks.java:83)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75)
	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86)
	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:251)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)
	at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecutor.runTestClass(JUnitTestClassExecutor.java:116)
	at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecutor.execute(JUnitTestClassExecutor.java:59)
	at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecutor.execute(JUnitTestClassExecutor.java:39)
	at org.gradle.api.internal.tasks.testing.junit.AbstractJUnitTestClassProcessor.processTestClass(AbstractJUnitTestClassProcessor.java:66)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.processTestClass(SuiteTestClassProcessor.java:51)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:35)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:32)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:93)
	at com.sun.proxy.$Proxy1.processTestClass(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.processTestClass(TestWorker.java:109)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:35)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.remote.internal.hub.MessageHubBackedObjectConnection$DispatchWrapper.dispatch(MessageHubBackedObjectConnection.java:146)
	at org.gradle.internal.remote.internal.hub.MessageHubBackedObjectConnection$DispatchWrapper.dispatch(MessageHubBackedObjectConnection.java:128)
	at org.gradle.internal.remote.internal.hub.MessageHub$Handler.run(MessageHub.java:404)
	at org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:63)
	at org.gradle.internal.concurrent.ManagedExecutorImpl$1.run(ManagedExecutorImpl.java:46)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at org.gradle.internal.concurrent.ThreadFactoryImpl$ManagedThreadRunnable.run(ThreadFactoryImpl.java:55)
	at java.lang.Thread.run(Thread.java:748)
27671 [Test worker] INFO  org.springframework.test.context.transaction.TransactionContext  – Rolled back transaction for test context [DefaultTestContext@32e1cd1c testClass = RefundControllerTest, testInstance = org.iata.bsplink.refund.controller.RefundControllerTest@44881d5a, testMethod = testUpdateRefundErrors@RefundControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@1f5d4e4b testClass = RefundControllerTest, locations = '{}', classes = '{class org.iata.bsplink.refund.Application}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{app.host.local.protocol=local, app.host.sftp.protocol=sftp, org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@e7e8512, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@4ece6cea, [ImportsContextCustomizer@7e32a44a key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@7c81a5a0, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@2dc9c285, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@d444633b, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@794b4b8d], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -&gt; true]].
27674 [Test worker] INFO  org.springframework.test.context.transaction.TransactionContext  – Began transaction (1) for test context [DefaultTestContext@32e1cd1c testClass = RefundControllerTest, testInstance = org.iata.bsplink.refund.controller.RefundControllerTest@18fdebd7, testMethod = testGetRefundNotFound@RefundControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@1f5d4e4b testClass = RefundControllerTest, locations = '{}', classes = '{class org.iata.bsplink.refund.Application}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{app.host.local.protocol=local, app.host.sftp.protocol=sftp, org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@e7e8512, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@4ece6cea, [ImportsContextCustomizer@7e32a44a key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@7c81a5a0, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@2dc9c285, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@d444633b, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@794b4b8d], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -&gt; true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@494e061e]; rollback [true]
27680 [Test worker] INFO  org.springframework.test.context.transaction.TransactionContext  – Rolled back transaction for test context [DefaultTestContext@32e1cd1c testClass = RefundControllerTest, testInstance = org.iata.bsplink.refund.controller.RefundControllerTest@18fdebd7, testMethod = testGetRefundNotFound@RefundControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@1f5d4e4b testClass = RefundControllerTest, locations = '{}', classes = '{class org.iata.bsplink.refund.Application}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{app.host.local.protocol=local, app.host.sftp.protocol=sftp, org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@e7e8512, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@4ece6cea, [ImportsContextCustomizer@7e32a44a key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@7c81a5a0, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@2dc9c285, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@d444633b, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@794b4b8d], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -&gt; true]].
27682 [Test worker] INFO  org.springframework.test.context.transaction.TransactionContext  – Began transaction (1) for test context [DefaultTestContext@32e1cd1c testClass = RefundControllerTest, testInstance = org.iata.bsplink.refund.controller.RefundControllerTest@41c53cc7, testMethod = testUpdateRefundStatusNotAllowed@RefundControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@1f5d4e4b testClass = RefundControllerTest, locations = '{}', classes = '{class org.iata.bsplink.refund.Application}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{app.host.local.protocol=local, app.host.sftp.protocol=sftp, org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@e7e8512, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@4ece6cea, [ImportsContextCustomizer@7e32a44a key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@7c81a5a0, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@2dc9c285, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@d444633b, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@794b4b8d], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -&gt; true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@494e061e]; rollback [true]
2018-08-09 13:37:11.634  INFO 26020 --- [    Test worker] o.i.b.refund.service.RefundService       : Saving refund : Refund(id=null, ticketDocumentNumber=1234567890, status=PENDING, isoCountryCode=AA, agentCode=78200011, airlineCode=220, dateOfIssue=2018-06-19, billingPeriod=null, currency=RefundCurrency(code=ABC, decimals=0), passenger=PEPE, amounts=RefundAmounts(grossFare=0, lessGrossFareUsed=0, commissionAmount=0, commissionRate=0, spam=0, cancellationPenalty=0, miscellaneousFee=0, taxOnCancellationPenalty=0, taxOnMiscellaneousFee=0, commissionOnCpAndMfAmount=0, commissionOnCpAndMfRate=0, tax=0, refundToPassenger=0), partialRefund=false, netReporting=false, waiverCode=null, tourCode=null, dateOfIssueRelatedDocument=2000-01-02, dateOfAirlineAction=null, exchange=false, agentContact=null, airlineContact=null, settlementAuthorisationCode=null, customerFileReference=null, agentVatNumber=null, airlineVatNumber=null, originalIssue=null, airlineCodeRelatedDocument=220, relatedDocument=RelatedDocument(relatedTicketDocumentNumber=1234567890, relatedTicketCoupon1=true, relatedTicketCoupon2=false, relatedTicketCoupon3=false, relatedTicketCoupon4=false), statisticalCode=I, formOfPaymentAmounts=[], conjunctions=[], taxMiscellaneousFees=[], issueReason=Reason for Issuance, rejectionReason=null, airlineRemark=null, attachedFiles=null, comments=null, history=null, agentRegistrationNumber=null, airlineRegistrationNumber=null)
2018-08-09 13:37:11.634  INFO 26020 --- [    Test worker] o.i.b.refund.service.RefundService       : Saving refund history for: Refund(id=134, ticketDocumentNumber=1234567890, status=PENDING, isoCountryCode=AA, agentCode=78200011, airlineCode=220, dateOfIssue=2018-06-19, billingPeriod=null, currency=RefundCurrency(code=ABC, decimals=0), passenger=PEPE, amounts=RefundAmounts(grossFare=0, lessGrossFareUsed=0, commissionAmount=0, commissionRate=0, spam=0, cancellationPenalty=0, miscellaneousFee=0, taxOnCancellationPenalty=0, taxOnMiscellaneousFee=0, commissionOnCpAndMfAmount=0, commissionOnCpAndMfRate=0, tax=0, refundToPassenger=0), partialRefund=false, netReporting=false, waiverCode=null, tourCode=null, dateOfIssueRelatedDocument=2000-01-02, dateOfAirlineAction=null, exchange=false, agentContact=null, airlineContact=null, settlementAuthorisationCode=null, customerFileReference=null, agentVatNumber=null, airlineVatNumber=null, originalIssue=null, airlineCodeRelatedDocument=220, relatedDocument=RelatedDocument(relatedTicketDocumentNumber=1234567890, relatedTicketCoupon1=true, relatedTicketCoupon2=false, relatedTicketCoupon3=false, relatedTicketCoupon4=false), statisticalCode=I, formOfPaymentAmounts=[], conjunctions=[], taxMiscellaneousFees=[], issueReason=Reason for Issuance, rejectionReason=null, airlineRemark=null, attachedFiles=null, comments=null, history=null, agentRegistrationNumber=null, airlineRegistrationNumber=null) Action: REFUND_ISSUE
2018-08-09 13:37:11.635  INFO 26020 --- [    Test worker] o.i.b.r.service.RefundHistoryService     : Saving refund history: RefundHistory(id=null, action=REFUND_ISSUE, insertDateTime=2018-08-09T11:37:11.634Z, refundId=134, fileName=null)
2018-08-09 13:37:11.635  INFO 26020 --- [    Test worker] o.i.b.refund.service.RefundService       : Refund history saved: RefundHistory(id=135, action=REFUND_ISSUE, insertDateTime=2018-08-09T11:37:11.634Z, refundId=134, fileName=null)
2018-08-09 13:37:11.636  INFO 26020 --- [    Test worker] o.i.b.r.service.RefundHistoryService     : Getting refund history by id: 134
2018-08-09 13:37:11.641  INFO 26020 --- [    Test worker] o.i.b.r.controller.RefundController      : received request to change refund's status: Refund(id=134, ticketDocumentNumber=1234567890, status=PENDING, isoCountryCode=AA, agentCode=78200011, airlineCode=220, dateOfIssue=2018-06-19, billingPeriod=null, currency=RefundCurrency(code=ABC, decimals=0), passenger=PEPE, amounts=RefundAmounts(grossFare=0, lessGrossFareUsed=0, commissionAmount=0, commissionRate=0, spam=0, cancellationPenalty=0, miscellaneousFee=0, taxOnCancellationPenalty=0, taxOnMiscellaneousFee=0, commissionOnCpAndMfAmount=0, commissionOnCpAndMfRate=0, tax=0, refundToPassenger=0), partialRefund=false, netReporting=false, waiverCode=null, tourCode=null, dateOfIssueRelatedDocument=2000-01-02, dateOfAirlineAction=null, exchange=false, agentContact=null, airlineContact=null, settlementAuthorisationCode=null, customerFileReference=null, agentVatNumber=null, airlineVatNumber=null, originalIssue=null, airlineCodeRelatedDocument=220, relatedDocument=RelatedDocument(relatedTicketDocumentNumber=1234567890, relatedTicketCoupon1=true, relatedTicketCoupon2=false, relatedTicketCoupon3=false, relatedTicketCoupon4=false), statisticalCode=I, formOfPaymentAmounts=[], conjunctions=[], taxMiscellaneousFees=[], issueReason=Reason for Issuance, rejectionReason=null, airlineRemark=null, attachedFiles=null, comments=null, history=[RefundHistory(id=135, action=REFUND_ISSUE, insertDateTime=2018-08-09T11:37:11.634Z, refundId=134, fileName=null)], agentRegistrationNumber=null, airlineRegistrationNumber=null)
2018-08-09 13:37:11.642  INFO 26020 --- [    Test worker] o.i.b.r.v.RefundStatusValidator          : Validating status from PENDING to PENDING
2018-08-09 13:37:11.642  INFO 26020 --- [    Test worker] o.i.b.r.v.RefundStatusValidator          : Change of status not allowed from PENDING to PENDING
27691 [Test worker] INFO  org.iata.bsplink.commons.rest.exception.handler.ApplicationExceptionHandler  – &lt;400 Bad Request,ValidationErrorResponse(validationErrors=[org.iata.bsplink.commons.rest.response.validation.ValidationError@b8c28d25]),{}&gt;
org.iata.bsplink.commons.rest.exception.ApplicationValidationException: Validation error
	at org.iata.bsplink.refund.validation.RefundStatusValidator.validate(RefundStatusValidator.java:52)
	at org.iata.bsplink.refund.controller.RefundController.changeRefundStatus(RefundController.java:404)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:209)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:136)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:102)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:870)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:776)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:991)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:925)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:978)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:881)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:661)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:855)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:66)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:742)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:166)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:99)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.HttpPutFormContentFilter.doFilterInternal(HttpPutFormContentFilter.java:109)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:81)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:200)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:166)
	at org.iata.bsplink.refund.controller.RefundControllerTest.testUpdateRefundStatusNotAllowed(RefundControllerTest.java:715)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.springframework.test.context.junit4.statements.RunBeforeTestExecutionCallbacks.evaluate(RunBeforeTestExecutionCallbacks.java:73)
	at org.springframework.test.context.junit4.statements.RunAfterTestExecutionCallbacks.evaluate(RunAfterTestExecutionCallbacks.java:83)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75)
	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86)
	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:251)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)
	at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecutor.runTestClass(JUnitTestClassExecutor.java:116)
	at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecutor.execute(JUnitTestClassExecutor.java:59)
	at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecutor.execute(JUnitTestClassExecutor.java:39)
	at org.gradle.api.internal.tasks.testing.junit.AbstractJUnitTestClassProcessor.processTestClass(AbstractJUnitTestClassProcessor.java:66)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.processTestClass(SuiteTestClassProcessor.java:51)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:35)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:32)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:93)
	at com.sun.proxy.$Proxy1.processTestClass(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.processTestClass(TestWorker.java:109)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:35)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.remote.internal.hub.MessageHubBackedObjectConnection$DispatchWrapper.dispatch(MessageHubBackedObjectConnection.java:146)
	at org.gradle.internal.remote.internal.hub.MessageHubBackedObjectConnection$DispatchWrapper.dispatch(MessageHubBackedObjectConnection.java:128)
	at org.gradle.internal.remote.internal.hub.MessageHub$Handler.run(MessageHub.java:404)
	at org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:63)
	at org.gradle.internal.concurrent.ManagedExecutorImpl$1.run(ManagedExecutorImpl.java:46)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at org.gradle.internal.concurrent.ThreadFactoryImpl$ManagedThreadRunnable.run(ThreadFactoryImpl.java:55)
	at java.lang.Thread.run(Thread.java:748)
27696 [Test worker] INFO  org.springframework.test.context.transaction.TransactionContext  – Rolled back transaction for test context [DefaultTestContext@32e1cd1c testClass = RefundControllerTest, testInstance = org.iata.bsplink.refund.controller.RefundControllerTest@41c53cc7, testMethod = testUpdateRefundStatusNotAllowed@RefundControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@1f5d4e4b testClass = RefundControllerTest, locations = '{}', classes = '{class org.iata.bsplink.refund.Application}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{app.host.local.protocol=local, app.host.sftp.protocol=sftp, org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@e7e8512, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@4ece6cea, [ImportsContextCustomizer@7e32a44a key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@7c81a5a0, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@2dc9c285, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@d444633b, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@794b4b8d], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -&gt; true]].
27699 [Test worker] INFO  org.springframework.test.context.transaction.TransactionContext  – Began transaction (1) for test context [DefaultTestContext@32e1cd1c testClass = RefundControllerTest, testInstance = org.iata.bsplink.refund.controller.RefundControllerTest@2a3721a1, testMethod = testSaveIndirectReturnsEntity@RefundControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@1f5d4e4b testClass = RefundControllerTest, locations = '{}', classes = '{class org.iata.bsplink.refund.Application}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{app.host.local.protocol=local, app.host.sftp.protocol=sftp, org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@e7e8512, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@4ece6cea, [ImportsContextCustomizer@7e32a44a key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@7c81a5a0, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@2dc9c285, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@d444633b, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@794b4b8d], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -&gt; true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@494e061e]; rollback [true]
2018-08-09 13:37:11.657  INFO 26020 --- [    Test worker] o.i.b.refund.service.RefundService       : Saving refund : Refund(id=null, ticketDocumentNumber=null, status=PENDING, isoCountryCode=AA, agentCode=78200011, airlineCode=220, dateOfIssue=2018-06-19, billingPeriod=null, currency=RefundCurrency(code=ABC, decimals=0), passenger=PEPE, amounts=RefundAmounts(grossFare=0, lessGrossFareUsed=0, commissionAmount=0, commissionRate=0, spam=0, cancellationPenalty=0, miscellaneousFee=0, taxOnCancellationPenalty=0, taxOnMiscellaneousFee=0, commissionOnCpAndMfAmount=0, commissionOnCpAndMfRate=0, tax=0, refundToPassenger=0), partialRefund=false, netReporting=false, waiverCode=null, tourCode=null, dateOfIssueRelatedDocument=2000-01-02, dateOfAirlineAction=null, exchange=false, agentContact=null, airlineContact=null, settlementAuthorisationCode=null, customerFileReference=null, agentVatNumber=null, airlineVatNumber=null, originalIssue=null, airlineCodeRelatedDocument=220, relatedDocument=RelatedDocument(relatedTicketDocumentNumber=1234567890, relatedTicketCoupon1=true, relatedTicketCoupon2=false, relatedTicketCoupon3=false, relatedTicketCoupon4=false), statisticalCode=I, formOfPaymentAmounts=[], conjunctions=[], taxMiscellaneousFees=[], issueReason=Reason for Issuance, rejectionReason=null, airlineRemark=null, attachedFiles=null, comments=null, history=null, agentRegistrationNumber=null, airlineRegistrationNumber=null)
2018-08-09 13:37:11.657  INFO 26020 --- [    Test worker] o.i.b.refund.service.RefundService       : Saving refund history for: Refund(id=136, ticketDocumentNumber=null, status=PENDING, isoCountryCode=AA, agentCode=78200011, airlineCode=220, dateOfIssue=2018-06-19, billingPeriod=null, currency=RefundCurrency(code=ABC, decimals=0), passenger=PEPE, amounts=RefundAmounts(grossFare=0, lessGrossFareUsed=0, commissionAmount=0, commissionRate=0, spam=0, cancellationPenalty=0, miscellaneousFee=0, taxOnCancellationPenalty=0, taxOnMiscellaneousFee=0, commissionOnCpAndMfAmount=0, commissionOnCpAndMfRate=0, tax=0, refundToPassenger=0), partialRefund=false, netReporting=false, waiverCode=null, tourCode=null, dateOfIssueRelatedDocument=2000-01-02, dateOfAirlineAction=null, exchange=false, agentContact=null, airlineContact=null, settlementAuthorisationCode=null, customerFileReference=null, agentVatNumber=null, airlineVatNumber=null, originalIssue=null, airlineCodeRelatedDocument=220, relatedDocument=RelatedDocument(relatedTicketDocumentNumber=1234567890, relatedTicketCoupon1=true, relatedTicketCoupon2=false, relatedTicketCoupon3=false, relatedTicketCoupon4=false), statisticalCode=I, formOfPaymentAmounts=[], conjunctions=[], taxMiscellaneousFees=[], issueReason=Reason for Issuance, rejectionReason=null, airlineRemark=null, attachedFiles=null, comments=null, history=null, agentRegistrationNumber=null, airlineRegistrationNumber=null) Action: REFUND_ISSUE
2018-08-09 13:37:11.658  INFO 26020 --- [    Test worker] o.i.b.r.service.RefundHistoryService     : Saving refund history: RefundHistory(id=null, action=REFUND_ISSUE, insertDateTime=2018-08-09T11:37:11.658Z, refundId=136, fileName=null)
2018-08-09 13:37:11.658  INFO 26020 --- [    Test worker] o.i.b.refund.service.RefundService       : Refund history saved: RefundHistory(id=137, action=REFUND_ISSUE, insertDateTime=2018-08-09T11:37:11.658Z, refundId=136, fileName=null)
2018-08-09 13:37:11.658  INFO 26020 --- [    Test worker] o.i.b.r.service.RefundHistoryService     : Getting refund history by id: 136
27724 [Test worker] INFO  org.springframework.test.context.transaction.TransactionContext  – Rolled back transaction for test context [DefaultTestContext@32e1cd1c testClass = RefundControllerTest, testInstance = org.iata.bsplink.refund.controller.RefundControllerTest@2a3721a1, testMethod = testSaveIndirectReturnsEntity@RefundControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@1f5d4e4b testClass = RefundControllerTest, locations = '{}', classes = '{class org.iata.bsplink.refund.Application}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{app.host.local.protocol=local, app.host.sftp.protocol=sftp, org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@e7e8512, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@4ece6cea, [ImportsContextCustomizer@7e32a44a key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@7c81a5a0, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@2dc9c285, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@d444633b, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@794b4b8d], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -&gt; true]].
27726 [Test worker] INFO  org.springframework.test.context.transaction.TransactionContext  – Began transaction (1) for test context [DefaultTestContext@32e1cd1c testClass = RefundControllerTest, testInstance = org.iata.bsplink.refund.controller.RefundControllerTest@5f71d8a8, testMethod = testUpdateRefundRejectedStatus@RefundControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@1f5d4e4b testClass = RefundControllerTest, locations = '{}', classes = '{class org.iata.bsplink.refund.Application}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{app.host.local.protocol=local, app.host.sftp.protocol=sftp, org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@e7e8512, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@4ece6cea, [ImportsContextCustomizer@7e32a44a key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@7c81a5a0, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@2dc9c285, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@d444633b, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@794b4b8d], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -&gt; true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@494e061e]; rollback [true]
2018-08-09 13:37:11.702  INFO 26020 --- [    Test worker] o.i.b.r.controller.RefundController      : received request to update indirect refund: Refund(id=138, ticketDocumentNumber=null, status=REJECTED, isoCountryCode=AA, agentCode=78200011, airlineCode=220, dateOfIssue=2018-06-19, billingPeriod=null, currency=RefundCurrency(code=ABC, decimals=0), passenger=PEPE, amounts=RefundAmounts(grossFare=0, lessGrossFareUsed=0, commissionAmount=0, commissionRate=0, spam=0, cancellationPenalty=0, miscellaneousFee=0, taxOnCancellationPenalty=0, taxOnMiscellaneousFee=0, commissionOnCpAndMfAmount=0, commissionOnCpAndMfRate=0, tax=0, refundToPassenger=0), partialRefund=false, netReporting=false, waiverCode=null, tourCode=null, dateOfIssueRelatedDocument=2000-01-02, dateOfAirlineAction=null, exchange=false, agentContact=null, airlineContact=null, settlementAuthorisationCode=null, customerFileReference=null, agentVatNumber=null, airlineVatNumber=null, originalIssue=null, airlineCodeRelatedDocument=220, relatedDocument=RelatedDocument(relatedTicketDocumentNumber=1234567890, relatedTicketCoupon1=true, relatedTicketCoupon2=false, relatedTicketCoupon3=false, relatedTicketCoupon4=false), statisticalCode=I, formOfPaymentAmounts=[], conjunctions=[], taxMiscellaneousFees=[], issueReason=Reason for Issuance, rejectionReason=null, airlineRemark=null, attachedFiles=null, comments=null, history=null, agentRegistrationNumber=null, airlineRegistrationNumber=null)
2018-08-09 13:37:11.702  INFO 26020 --- [    Test worker] o.i.b.r.v.RefundUpdateValidator          : Validating refund to update: Refund(id=138, ticketDocumentNumber=null, status=REJECTED, isoCountryCode=AA, agentCode=78200011, airlineCode=220, dateOfIssue=2018-06-19, billingPeriod=null, currency=RefundCurrency(code=ABC, decimals=0), passenger=PEPE, amounts=RefundAmounts(grossFare=0, lessGrossFareUsed=0, commissionAmount=0, commissionRate=0, spam=0, cancellationPenalty=0, miscellaneousFee=0, taxOnCancellationPenalty=0, taxOnMiscellaneousFee=0, commissionOnCpAndMfAmount=0, commissionOnCpAndMfRate=0, tax=0, refundToPassenger=0), partialRefund=false, netReporting=false, waiverCode=null, tourCode=null, dateOfIssueRelatedDocument=2000-01-02, dateOfAirlineAction=null, exchange=false, agentContact=null, airlineContact=null, settlementAuthorisationCode=null, customerFileReference=null, agentVatNumber=null, airlineVatNumber=null, originalIssue=null, airlineCodeRelatedDocument=220, relatedDocument=RelatedDocument(relatedTicketDocumentNumber=1234567890, relatedTicketCoupon1=true, relatedTicketCoupon2=false, relatedTicketCoupon3=false, relatedTicketCoupon4=false), statisticalCode=I, formOfPaymentAmounts=[], conjunctions=[], taxMiscellaneousFees=[], issueReason=Reason for Issuance, rejectionReason=null, airlineRemark=null, attachedFiles=null, comments=null, history=null, agentRegistrationNumber=null, airlineRegistrationNumber=null)
2018-08-09 13:37:11.703  INFO 26020 --- [    Test worker] o.i.b.r.v.RefundUpdateValidator          : Refund with status not allowed to be modified: REJECTED
27752 [Test worker] INFO  org.iata.bsplink.commons.rest.exception.handler.ApplicationExceptionHandler  – &lt;400 Bad Request,ValidationErrorResponse(validationErrors=[org.iata.bsplink.commons.rest.response.validation.ValidationError@56518065]),{}&gt;
org.iata.bsplink.commons.rest.exception.ApplicationValidationException: Validation error
	at org.iata.bsplink.refund.validation.RefundUpdateValidator.validateFields(RefundUpdateValidator.java:107)
	at org.iata.bsplink.refund.validation.RefundUpdateValidator.validate(RefundUpdateValidator.java:59)
	at org.iata.bsplink.refund.validation.RefundUpdateValidator.validate(RefundUpdateValidator.java:81)
	at org.iata.bsplink.refund.controller.RefundController.updateRefund(RefundController.java:310)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:209)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:136)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:102)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:870)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:776)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:991)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:925)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:978)
	at org.springframework.web.servlet.FrameworkServlet.doPut(FrameworkServlet.java:892)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:664)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:855)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:66)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:742)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:166)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:99)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.HttpPutFormContentFilter.doFilterInternal(HttpPutFormContentFilter.java:109)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:81)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:200)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:166)
	at org.iata.bsplink.refund.controller.RefundControllerTest.testUpdateRefundRejectedStatus(RefundControllerTest.java:295)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.springframework.test.context.junit4.statements.RunBeforeTestExecutionCallbacks.evaluate(RunBeforeTestExecutionCallbacks.java:73)
	at org.springframework.test.context.junit4.statements.RunAfterTestExecutionCallbacks.evaluate(RunAfterTestExecutionCallbacks.java:83)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75)
	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86)
	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:251)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)
	at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecutor.runTestClass(JUnitTestClassExecutor.java:116)
	at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecutor.execute(JUnitTestClassExecutor.java:59)
	at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecutor.execute(JUnitTestClassExecutor.java:39)
	at org.gradle.api.internal.tasks.testing.junit.AbstractJUnitTestClassProcessor.processTestClass(AbstractJUnitTestClassProcessor.java:66)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.processTestClass(SuiteTestClassProcessor.java:51)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:35)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:32)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:93)
	at com.sun.proxy.$Proxy1.processTestClass(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.processTestClass(TestWorker.java:109)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:35)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.remote.internal.hub.MessageHubBackedObjectConnection$DispatchWrapper.dispatch(MessageHubBackedObjectConnection.java:146)
	at org.gradle.internal.remote.internal.hub.MessageHubBackedObjectConnection$DispatchWrapper.dispatch(MessageHubBackedObjectConnection.java:128)
	at org.gradle.internal.remote.internal.hub.MessageHub$Handler.run(MessageHub.java:404)
	at org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:63)
	at org.gradle.internal.concurrent.ManagedExecutorImpl$1.run(ManagedExecutorImpl.java:46)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at org.gradle.internal.concurrent.ThreadFactoryImpl$ManagedThreadRunnable.run(ThreadFactoryImpl.java:55)
	at java.lang.Thread.run(Thread.java:748)
27757 [Test worker] INFO  org.springframework.test.context.transaction.TransactionContext  – Rolled back transaction for test context [DefaultTestContext@32e1cd1c testClass = RefundControllerTest, testInstance = org.iata.bsplink.refund.controller.RefundControllerTest@5f71d8a8, testMethod = testUpdateRefundRejectedStatus@RefundControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@1f5d4e4b testClass = RefundControllerTest, locations = '{}', classes = '{class org.iata.bsplink.refund.Application}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{app.host.local.protocol=local, app.host.sftp.protocol=sftp, org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@e7e8512, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@4ece6cea, [ImportsContextCustomizer@7e32a44a key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@7c81a5a0, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@2dc9c285, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@d444633b, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@794b4b8d], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -&gt; true]].
27764 [Test worker] INFO  org.springframework.test.context.transaction.TransactionContext  – Began transaction (1) for test context [DefaultTestContext@32e1cd1c testClass = RefundControllerTest, testInstance = org.iata.bsplink.refund.controller.RefundControllerTest@6c274836, testMethod = testUpdateRefundRejectionReasonNotFilled@RefundControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@1f5d4e4b testClass = RefundControllerTest, locations = '{}', classes = '{class org.iata.bsplink.refund.Application}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{app.host.local.protocol=local, app.host.sftp.protocol=sftp, org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@e7e8512, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@4ece6cea, [ImportsContextCustomizer@7e32a44a key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@7c81a5a0, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@2dc9c285, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@d444633b, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@794b4b8d], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -&gt; true]]; transaction manager [org.springframework.orm.jpa.JpaTransactionManager@494e061e]; rollback [true]
2018-08-09 13:37:11.716  INFO 26020 --- [    Test worker] o.i.b.refund.service.RefundService       : Saving refund : Refund(id=null, ticketDocumentNumber=1234567890, status=PENDING, isoCountryCode=AA, agentCode=78200011, airlineCode=220, dateOfIssue=2018-06-19, billingPeriod=null, currency=RefundCurrency(code=ABC, decimals=0), passenger=PEPE, amounts=RefundAmounts(grossFare=0, lessGrossFareUsed=0, commissionAmount=0, commissionRate=0, spam=0, cancellationPenalty=0, miscellaneousFee=0, taxOnCancellationPenalty=0, taxOnMiscellaneousFee=0, commissionOnCpAndMfAmount=0, commissionOnCpAndMfRate=0, tax=0, refundToPassenger=0), partialRefund=false, netReporting=false, waiverCode=null, tourCode=null, dateOfIssueRelatedDocument=2000-01-02, dateOfAirlineAction=null, exchange=false, agentContact=null, airlineContact=null, settlementAuthorisationCode=null, customerFileReference=null, agentVatNumber=null, airlineVatNumber=null, originalIssue=null, airlineCodeRelatedDocument=220, relatedDocument=RelatedDocument(relatedTicketDocumentNumber=1234567890, relatedTicketCoupon1=true, relatedTicketCoupon2=false, relatedTicketCoupon3=false, relatedTicketCoupon4=false), statisticalCode=I, formOfPaymentAmounts=[], conjunctions=[], taxMiscellaneousFees=[], issueReason=Reason for Issuance, rejectionReason=null, airlineRemark=null, attachedFiles=null, comments=null, history=null, agentRegistrationNumber=null, airlineRegistrationNumber=null)
2018-08-09 13:37:11.717  INFO 26020 --- [    Test worker] o.i.b.refund.service.RefundService       : Saving refund history for: Refund(id=139, ticketDocumentNumber=1234567890, status=PENDING, isoCountryCode=AA, agentCode=78200011, airlineCode=220, dateOfIssue=2018-06-19, billingPeriod=null, currency=RefundCurrency(code=ABC, decimals=0), passenger=PEPE, amounts=RefundAmounts(grossFare=0, lessGrossFareUsed=0, commissionAmount=0, commissionRate=0, spam=0, cancellationPenalty=0, miscellaneousFee=0, taxOnCancellationPenalty=0, taxOnMiscellaneousFee=0, commissionOnCpAndMfAmount=0, commissionOnCpAndMfRate=0, tax=0, refundToPassenger=0), partialRefund=false, netReporting=false, waiverCode=null, tourCode=null, dateOfIssueRelatedDocument=2000-01-02, dateOfAirlineAction=null, exchange=false, agentContact=null, airlineContact=null, settlementAuthorisationCode=null, customerFileReference=null, agentVatNumber=null, airlineVatNumber=null, originalIssue=null, airlineCodeRelatedDocument=220, relatedDocument=RelatedDocument(relatedTicketDocumentNumber=1234567890, relatedTicketCoupon1=true, relatedTicketCoupon2=false, relatedTicketCoupon3=false, relatedTicketCoupon4=false), statisticalCode=I, formOfPaymentAmounts=[], conjunctions=[], taxMiscellaneousFees=[], issueReason=Reason for Issuance, rejectionReason=null, airlineRemark=null, attachedFiles=null, comments=null, history=null, agentRegistrationNumber=null, airlineRegistrationNumber=null) Action: REFUND_ISSUE
2018-08-09 13:37:11.717  INFO 26020 --- [    Test worker] o.i.b.r.service.RefundHistoryService     : Saving refund history: RefundHistory(id=null, action=REFUND_ISSUE, insertDateTime=2018-08-09T11:37:11.717Z, refundId=139, fileName=null)
2018-08-09 13:37:11.717  INFO 26020 --- [    Test worker] o.i.b.refund.service.RefundService       : Refund history saved: RefundHistory(id=140, action=REFUND_ISSUE, insertDateTime=2018-08-09T11:37:11.717Z, refundId=139, fileName=null)
2018-08-09 13:37:11.717  INFO 26020 --- [    Test worker] o.i.b.r.service.RefundHistoryService     : Getting refund history by id: 139
2018-08-09 13:37:11.723  INFO 26020 --- [    Test worker] o.i.b.r.controller.RefundController      : received request to change refund's status: Refund(id=139, ticketDocumentNumber=1234567890, status=PENDING, isoCountryCode=AA, agentCode=78200011, airlineCode=220, dateOfIssue=2018-06-19, billingPeriod=null, currency=RefundCurrency(code=ABC, decimals=0), passenger=PEPE, amounts=RefundAmounts(grossFare=0, lessGrossFareUsed=0, commissionAmount=0, commissionRate=0, spam=0, cancellationPenalty=0, miscellaneousFee=0, taxOnCancellationPenalty=0, taxOnMiscellaneousFee=0, commissionOnCpAndMfAmount=0, commissionOnCpAndMfRate=0, tax=0, refundToPassenger=0), partialRefund=false, netReporting=false, waiverCode=null, tourCode=null, dateOfIssueRelatedDocument=2000-01-02, dateOfAirlineAction=null, exchange=false, agentContact=null, airlineContact=null, settlementAuthorisationCode=null, customerFileReference=null, agentVatNumber=null, airlineVatNumber=null, originalIssue=null, airlineCodeRelatedDocument=220, relatedDocument=RelatedDocument(relatedTicketDocumentNumber=1234567890, relatedTicketCoupon1=true, relatedTicketCoupon2=false, relatedTicketCoupon3=false, relatedTicketCoupon4=false), statisticalCode=I, formOfPaymentAmounts=[], conjunctions=[], taxMiscellaneousFees=[], issueReason=Reason for Issuance, rejectionReason=null, airlineRemark=null, attachedFiles=null, comments=null, history=[RefundHistory(id=140, action=REFUND_ISSUE, insertDateTime=2018-08-09T11:37:11.717Z, refundId=139, fileName=null)], agentRegistrationNumber=null, airlineRegistrationNumber=null)
2018-08-09 13:37:11.723  INFO 26020 --- [    Test worker] o.i.b.r.v.RefundStatusValidator          : Validating status from PENDING to REJECTED
2018-08-09 13:37:11.723  INFO 26020 --- [    Test worker] o.i.b.r.v.RefundStatusValidator          : Rejection reason is required
27780 [Test worker] INFO  org.iata.bsplink.commons.rest.exception.handler.ApplicationExceptionHandler  – &lt;400 Bad Request,ValidationErrorResponse(validationErrors=[org.iata.bsplink.commons.rest.response.validation.ValidationError@d424af21]),{}&gt;
org.iata.bsplink.commons.rest.exception.ApplicationValidationException: Validation error
	at org.iata.bsplink.refund.validation.RefundStatusValidator.validateAirlineStatusChange(RefundStatusValidator.java:100)
	at org.iata.bsplink.refund.validation.RefundStatusValidator.validate(RefundStatusValidator.java:66)
	at org.iata.bsplink.refund.controller.RefundController.changeRefundStatus(RefundController.java:404)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:209)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:136)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:102)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:870)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:776)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:991)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:925)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:978)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:881)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:661)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:855)
	at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:66)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:742)
	at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:166)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:99)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.HttpPutFormContentFilter.doFilterInternal(HttpPutFormContentFilter.java:109)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.HiddenHttpMethodFilter.doFilterInternal(HiddenHttpMethodFilter.java:81)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:200)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:107)
	at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:133)
	at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:166)
	at org.iata.bsplink.refund.controller.RefundControllerTest.testUpdateRefundRejectionReasonNotFilled(RefundControllerTest.java:813)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:50)
	at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:12)
	at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:47)
	at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:17)
	at org.springframework.test.context.junit4.statements.RunBeforeTestExecutionCallbacks.evaluate(RunBeforeTestExecutionCallbacks.java:73)
	at org.springframework.test.context.junit4.statements.RunAfterTestExecutionCallbacks.evaluate(RunAfterTestExecutionCallbacks.java:83)
	at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:26)
	at org.springframework.test.context.junit4.statements.RunBeforeTestMethodCallbacks.evaluate(RunBeforeTestMethodCallbacks.java:75)
	at org.springframework.test.context.junit4.statements.RunAfterTestMethodCallbacks.evaluate(RunAfterTestMethodCallbacks.java:86)
	at org.springframework.test.context.junit4.statements.SpringRepeat.evaluate(SpringRepeat.java:84)
	at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:325)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:251)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:97)
	at org.junit.runners.ParentRunner$3.run(ParentRunner.java:290)
	at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:71)
	at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:288)
	at org.junit.runners.ParentRunner.access$000(ParentRunner.java:58)
	at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:268)
	at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
	at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:70)
	at org.junit.runners.ParentRunner.run(ParentRunner.java:363)
	at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:190)
	at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecutor.runTestClass(JUnitTestClassExecutor.java:116)
	at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecutor.execute(JUnitTestClassExecutor.java:59)
	at org.gradle.api.internal.tasks.testing.junit.JUnitTestClassExecutor.execute(JUnitTestClassExecutor.java:39)
	at org.gradle.api.internal.tasks.testing.junit.AbstractJUnitTestClassProcessor.processTestClass(AbstractJUnitTestClassProcessor.java:66)
	at org.gradle.api.internal.tasks.testing.SuiteTestClassProcessor.processTestClass(SuiteTestClassProcessor.java:51)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:35)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.dispatch.ContextClassLoaderDispatch.dispatch(ContextClassLoaderDispatch.java:32)
	at org.gradle.internal.dispatch.ProxyDispatchAdapter$DispatchingInvocationHandler.invoke(ProxyDispatchAdapter.java:93)
	at com.sun.proxy.$Proxy1.processTestClass(Unknown Source)
	at org.gradle.api.internal.tasks.testing.worker.TestWorker.processTestClass(TestWorker.java:109)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:35)
	at org.gradle.internal.dispatch.ReflectionDispatch.dispatch(ReflectionDispatch.java:24)
	at org.gradle.internal.remote.internal.hub.MessageHubBackedObjectConnection$DispatchWrapper.dispatch(MessageHubBackedObjectConnection.java:146)
	at org.gradle.internal.remote.internal.hub.MessageHubBackedObjectConnection$DispatchWrapper.dispatch(MessageHubBackedObjectConnection.java:128)
	at org.gradle.internal.remote.internal.hub.MessageHub$Handler.run(MessageHub.java:404)
	at org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:63)
	at org.gradle.internal.concurrent.ManagedExecutorImpl$1.run(ManagedExecutorImpl.java:46)
	at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1149)
	at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:624)
	at org.gradle.internal.concurrent.ThreadFactoryImpl$ManagedThreadRunnable.run(ThreadFactoryImpl.java:55)
	at java.lang.Thread.run(Thread.java:748)
27784 [Test worker] INFO  org.springframework.test.context.transaction.TransactionContext  – Rolled back transaction for test context [DefaultTestContext@32e1cd1c testClass = RefundControllerTest, testInstance = org.iata.bsplink.refund.controller.RefundControllerTest@6c274836, testMethod = testUpdateRefundRejectionReasonNotFilled@RefundControllerTest, testException = [null], mergedContextConfiguration = [WebMergedContextConfiguration@1f5d4e4b testClass = RefundControllerTest, locations = '{}', classes = '{class org.iata.bsplink.refund.Application}', contextInitializerClasses = '[]', activeProfiles = '{}', propertySourceLocations = '{}', propertySourceProperties = '{app.host.local.protocol=local, app.host.sftp.protocol=sftp, org.springframework.boot.test.context.SpringBootTestContextBootstrapper=true}', contextCustomizers = set[org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@e7e8512, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizerFactory$Customizer@4ece6cea, [ImportsContextCustomizer@7e32a44a key = [org.springframework.boot.test.autoconfigure.web.servlet.MockMvcAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcSecurityAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebClientAutoConfiguration, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcWebDriverAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@7c81a5a0, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@2dc9c285, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@d444633b, org.springframework.boot.test.web.client.TestRestTemplateContextCustomizer@794b4b8d], resourceBasePath = 'src/main/webapp', contextLoader = 'org.springframework.boot.test.context.SpringBootContextLoader', parent = [null]], attributes = map['org.springframework.test.context.web.ServletTestExecutionListener.activateListener' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.populatedRequestContextHolder' -&gt; true, 'org.springframework.test.context.web.ServletTestExecutionListener.resetRequestContextHolder' -&gt; true]].
</pre>
</span>
</div>
</div>
<div id="footer">
<p>
<div>
<label class="hidden" id="label-for-line-wrapping-toggle" for="line-wrapping-toggle">Wrap lines
<input id="line-wrapping-toggle" type="checkbox" autocomplete="off"/>
</label>
</div>Generated by 
<a href="http://www.gradle.org">Gradle 4.6</a> at Aug 9, 2018 1:37:17 PM</p>
</div>
</div>
</body>
</html>
